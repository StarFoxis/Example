<!DOCTYPE html>
<!-- saved from url=(0071)https://chat.deepseek.com/a/chat/s/81919a07-77e7-4946-bfad-83bd2304a65a -->
<html lang="en" class="notranslate" translate="no"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style>body {transition: opacity ease-in 0.2s; } 
body[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } 
</style><title>Реализация многопоточной записи и чтения в Qt - DeepSeek</title><meta name="viewport" content="initial-scale=1.0,maximum-scale=1,width=device-width,viewport-fit=cover"><meta name="commit-id" content="544dbf7"><meta name="description" content="Chat with DeepSeek AI – your intelligent assistant for coding, content creation, file reading, and more. Upload documents, engage in long-context conversations, and get expert help in AI, natural language processing, and beyond. | 深度求索（DeepSeek）助力编程代码开发、创意写作、文件处理等任务，支持文件上传及长文本对话，随时为您提供高效的AI支持。"><meta name="keywords" content="DeepSeek,DeepSeek AI,DeepSeek Chat,AI assistant,coding assistant,long-context LLM,Open Source LLM,natural language processing,AI chatbot,AI long text,AI content creation,large language model,深度求索,大语言模型,自然语言处理,AI聊天机器人,代码开发,创意写作,AI助手,长文本对话,文件处理AI,大模型公司,人工智能,AI开发助手"><meta property="og:url" content="https://chat.deepseek.com"><meta property="og:type" content="website"><meta property="og:title" content="DeepSeek"><meta property="og:description" content="Chat with DeepSeek AI."><meta property="og:image" content="https://cdn.deepseek.com/images/deepseek-chat-open-graph-image.jpeg"><meta name="twitter:card" content="summary_large_image"><meta property="twitter:domain" content="deepseek.com"><meta property="twitter:url" content="https://chat.deepseek.com"><meta name="twitter:title" content="DeepSeek"><meta name="twitter:description" content="Chat with DeepSeek AI."><meta name="twitter:image" content="https://cdn.deepseek.com/images/deepseek-chat-open-graph-image.jpeg"><meta name="google" content="notranslate"><meta name="ip" content="77.222.96.226"><meta name="region" content="RU"><link rel="apple-touch-icon" href="https://cdn.deepseek.com/chat/icon.png"><link rel="icon" type="image/x-icon" href="https://chat.deepseek.com/favicon.svg"><script type="text/javascript" async="" id="_intercom_npm_loader" src="./dudasd_files/guh50jw4"></script><script>!function(n,t){if(n.LogAnalyticsObject=t,!n[t]){var c=function(){c.q.push(arguments)};c.q=c.q||[],n[t]=c}n[t].l=+new Date}(window,"collectEvent")</script><script async="" src="./dudasd_files/collect-rangers-v5.2.1.js.Без названия"></script><script defer="" src="./dudasd_files/default-vendors.8255dfccfe.js.Без названия"></script><script defer="" src="./dudasd_files/main.20cc786501.js.Без названия"></script><link href="./dudasd_files/main.9e0c9cad6c.css" rel="stylesheet"><style>
body.change-theme * {
  transition: none !important;
}

body.change-theme *::before {
  transition: none !important;
}

body.change-theme *::after {
  transition: none !important;
}
</style><link data-webpack="@deepseek/chat:chunk-945" rel="stylesheet" href="./dudasd_files/katex.66a418a9b7.css"><style>
  .ds-scroll-area__gutters {
    display: block;
  }
  .ds-scroll-area {
    scrollbar-width: none;
  }
  .ds-scroll-area::-webkit-scrollbar {
    display: none;
  }
  </style><style>/* cyrillic-ext */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
/* vietnamese */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB;
}
/* latin-ext */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* cyrillic-ext */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
/* vietnamese */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB;
}
/* latin-ext */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* cyrillic-ext */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
/* vietnamese */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB;
}
/* latin-ext */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* cyrillic-ext */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3GUBGEe.woff2) format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3iUBGEe.woff2) format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
/* greek-ext */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3CUBGEe.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
/* greek */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3-UBGEe.woff2) format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
/* math */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMawCUBGEe.woff2) format('woff2');
  unicode-range: U+0302-0303, U+0305, U+0307-0308, U+0310, U+0312, U+0315, U+031A, U+0326-0327, U+032C, U+032F-0330, U+0332-0333, U+0338, U+033A, U+0346, U+034D, U+0391-03A1, U+03A3-03A9, U+03B1-03C9, U+03D1, U+03D5-03D6, U+03F0-03F1, U+03F4-03F5, U+2016-2017, U+2034-2038, U+203C, U+2040, U+2043, U+2047, U+2050, U+2057, U+205F, U+2070-2071, U+2074-208E, U+2090-209C, U+20D0-20DC, U+20E1, U+20E5-20EF, U+2100-2112, U+2114-2115, U+2117-2121, U+2123-214F, U+2190, U+2192, U+2194-21AE, U+21B0-21E5, U+21F1-21F2, U+21F4-2211, U+2213-2214, U+2216-22FF, U+2308-230B, U+2310, U+2319, U+231C-2321, U+2336-237A, U+237C, U+2395, U+239B-23B7, U+23D0, U+23DC-23E1, U+2474-2475, U+25AF, U+25B3, U+25B7, U+25BD, U+25C1, U+25CA, U+25CC, U+25FB, U+266D-266F, U+27C0-27FF, U+2900-2AFF, U+2B0E-2B11, U+2B30-2B4C, U+2BFE, U+3030, U+FF5B, U+FF5D, U+1D400-1D7FF, U+1EE00-1EEFF;
}
/* symbols */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMaxKUBGEe.woff2) format('woff2');
  unicode-range: U+0001-000C, U+000E-001F, U+007F-009F, U+20DD-20E0, U+20E2-20E4, U+2150-218F, U+2190, U+2192, U+2194-2199, U+21AF, U+21E6-21F0, U+21F3, U+2218-2219, U+2299, U+22C4-22C6, U+2300-243F, U+2440-244A, U+2460-24FF, U+25A0-27BF, U+2800-28FF, U+2921-2922, U+2981, U+29BF, U+29EB, U+2B00-2BFF, U+4DC0-4DFF, U+FFF9-FFFB, U+10140-1018E, U+10190-1019C, U+101A0, U+101D0-101FD, U+102E0-102FB, U+10E60-10E7E, U+1D2C0-1D2D3, U+1D2E0-1D37F, U+1F000-1F0FF, U+1F100-1F1AD, U+1F1E6-1F1FF, U+1F30D-1F30F, U+1F315, U+1F31C, U+1F31E, U+1F320-1F32C, U+1F336, U+1F378, U+1F37D, U+1F382, U+1F393-1F39F, U+1F3A7-1F3A8, U+1F3AC-1F3AF, U+1F3C2, U+1F3C4-1F3C6, U+1F3CA-1F3CE, U+1F3D4-1F3E0, U+1F3ED, U+1F3F1-1F3F3, U+1F3F5-1F3F7, U+1F408, U+1F415, U+1F41F, U+1F426, U+1F43F, U+1F441-1F442, U+1F444, U+1F446-1F449, U+1F44C-1F44E, U+1F453, U+1F46A, U+1F47D, U+1F4A3, U+1F4B0, U+1F4B3, U+1F4B9, U+1F4BB, U+1F4BF, U+1F4C8-1F4CB, U+1F4D6, U+1F4DA, U+1F4DF, U+1F4E3-1F4E6, U+1F4EA-1F4ED, U+1F4F7, U+1F4F9-1F4FB, U+1F4FD-1F4FE, U+1F503, U+1F507-1F50B, U+1F50D, U+1F512-1F513, U+1F53E-1F54A, U+1F54F-1F5FA, U+1F610, U+1F650-1F67F, U+1F687, U+1F68D, U+1F691, U+1F694, U+1F698, U+1F6AD, U+1F6B2, U+1F6B9-1F6BA, U+1F6BC, U+1F6C6-1F6CF, U+1F6D3-1F6D7, U+1F6E0-1F6EA, U+1F6F0-1F6F3, U+1F6F7-1F6FC, U+1F700-1F7FF, U+1F800-1F80B, U+1F810-1F847, U+1F850-1F859, U+1F860-1F887, U+1F890-1F8AD, U+1F8B0-1F8BB, U+1F8C0-1F8C1, U+1F900-1F90B, U+1F93B, U+1F946, U+1F984, U+1F996, U+1F9E9, U+1FA00-1FA6F, U+1FA70-1FA7C, U+1FA80-1FA89, U+1FA8F-1FAC6, U+1FACE-1FADC, U+1FADF-1FAE9, U+1FAF0-1FAF8, U+1FB00-1FBFF;
}
/* vietnamese */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3OUBGEe.woff2) format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB;
}
/* latin-ext */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3KUBGEe.woff2) format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3yUBA.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* cyrillic-ext */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3GUBGEe.woff2) format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3iUBGEe.woff2) format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
/* greek-ext */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3CUBGEe.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
/* greek */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3-UBGEe.woff2) format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
/* math */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMawCUBGEe.woff2) format('woff2');
  unicode-range: U+0302-0303, U+0305, U+0307-0308, U+0310, U+0312, U+0315, U+031A, U+0326-0327, U+032C, U+032F-0330, U+0332-0333, U+0338, U+033A, U+0346, U+034D, U+0391-03A1, U+03A3-03A9, U+03B1-03C9, U+03D1, U+03D5-03D6, U+03F0-03F1, U+03F4-03F5, U+2016-2017, U+2034-2038, U+203C, U+2040, U+2043, U+2047, U+2050, U+2057, U+205F, U+2070-2071, U+2074-208E, U+2090-209C, U+20D0-20DC, U+20E1, U+20E5-20EF, U+2100-2112, U+2114-2115, U+2117-2121, U+2123-214F, U+2190, U+2192, U+2194-21AE, U+21B0-21E5, U+21F1-21F2, U+21F4-2211, U+2213-2214, U+2216-22FF, U+2308-230B, U+2310, U+2319, U+231C-2321, U+2336-237A, U+237C, U+2395, U+239B-23B7, U+23D0, U+23DC-23E1, U+2474-2475, U+25AF, U+25B3, U+25B7, U+25BD, U+25C1, U+25CA, U+25CC, U+25FB, U+266D-266F, U+27C0-27FF, U+2900-2AFF, U+2B0E-2B11, U+2B30-2B4C, U+2BFE, U+3030, U+FF5B, U+FF5D, U+1D400-1D7FF, U+1EE00-1EEFF;
}
/* symbols */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMaxKUBGEe.woff2) format('woff2');
  unicode-range: U+0001-000C, U+000E-001F, U+007F-009F, U+20DD-20E0, U+20E2-20E4, U+2150-218F, U+2190, U+2192, U+2194-2199, U+21AF, U+21E6-21F0, U+21F3, U+2218-2219, U+2299, U+22C4-22C6, U+2300-243F, U+2440-244A, U+2460-24FF, U+25A0-27BF, U+2800-28FF, U+2921-2922, U+2981, U+29BF, U+29EB, U+2B00-2BFF, U+4DC0-4DFF, U+FFF9-FFFB, U+10140-1018E, U+10190-1019C, U+101A0, U+101D0-101FD, U+102E0-102FB, U+10E60-10E7E, U+1D2C0-1D2D3, U+1D2E0-1D37F, U+1F000-1F0FF, U+1F100-1F1AD, U+1F1E6-1F1FF, U+1F30D-1F30F, U+1F315, U+1F31C, U+1F31E, U+1F320-1F32C, U+1F336, U+1F378, U+1F37D, U+1F382, U+1F393-1F39F, U+1F3A7-1F3A8, U+1F3AC-1F3AF, U+1F3C2, U+1F3C4-1F3C6, U+1F3CA-1F3CE, U+1F3D4-1F3E0, U+1F3ED, U+1F3F1-1F3F3, U+1F3F5-1F3F7, U+1F408, U+1F415, U+1F41F, U+1F426, U+1F43F, U+1F441-1F442, U+1F444, U+1F446-1F449, U+1F44C-1F44E, U+1F453, U+1F46A, U+1F47D, U+1F4A3, U+1F4B0, U+1F4B3, U+1F4B9, U+1F4BB, U+1F4BF, U+1F4C8-1F4CB, U+1F4D6, U+1F4DA, U+1F4DF, U+1F4E3-1F4E6, U+1F4EA-1F4ED, U+1F4F7, U+1F4F9-1F4FB, U+1F4FD-1F4FE, U+1F503, U+1F507-1F50B, U+1F50D, U+1F512-1F513, U+1F53E-1F54A, U+1F54F-1F5FA, U+1F610, U+1F650-1F67F, U+1F687, U+1F68D, U+1F691, U+1F694, U+1F698, U+1F6AD, U+1F6B2, U+1F6B9-1F6BA, U+1F6BC, U+1F6C6-1F6CF, U+1F6D3-1F6D7, U+1F6E0-1F6EA, U+1F6F0-1F6F3, U+1F6F7-1F6FC, U+1F700-1F7FF, U+1F800-1F80B, U+1F810-1F847, U+1F850-1F859, U+1F860-1F887, U+1F890-1F8AD, U+1F8B0-1F8BB, U+1F8C0-1F8C1, U+1F900-1F90B, U+1F93B, U+1F946, U+1F984, U+1F996, U+1F9E9, U+1FA00-1FA6F, U+1FA70-1FA7C, U+1FA80-1FA89, U+1FA8F-1FAC6, U+1FACE-1FADC, U+1FADF-1FAE9, U+1FAF0-1FAF8, U+1FB00-1FBFF;
}
/* vietnamese */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3OUBGEe.woff2) format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB;
}
/* latin-ext */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3KUBGEe.woff2) format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3yUBA.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* cyrillic-ext */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3GUBGEe.woff2) format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3iUBGEe.woff2) format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
/* greek-ext */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3CUBGEe.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
/* greek */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3-UBGEe.woff2) format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
/* math */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMawCUBGEe.woff2) format('woff2');
  unicode-range: U+0302-0303, U+0305, U+0307-0308, U+0310, U+0312, U+0315, U+031A, U+0326-0327, U+032C, U+032F-0330, U+0332-0333, U+0338, U+033A, U+0346, U+034D, U+0391-03A1, U+03A3-03A9, U+03B1-03C9, U+03D1, U+03D5-03D6, U+03F0-03F1, U+03F4-03F5, U+2016-2017, U+2034-2038, U+203C, U+2040, U+2043, U+2047, U+2050, U+2057, U+205F, U+2070-2071, U+2074-208E, U+2090-209C, U+20D0-20DC, U+20E1, U+20E5-20EF, U+2100-2112, U+2114-2115, U+2117-2121, U+2123-214F, U+2190, U+2192, U+2194-21AE, U+21B0-21E5, U+21F1-21F2, U+21F4-2211, U+2213-2214, U+2216-22FF, U+2308-230B, U+2310, U+2319, U+231C-2321, U+2336-237A, U+237C, U+2395, U+239B-23B7, U+23D0, U+23DC-23E1, U+2474-2475, U+25AF, U+25B3, U+25B7, U+25BD, U+25C1, U+25CA, U+25CC, U+25FB, U+266D-266F, U+27C0-27FF, U+2900-2AFF, U+2B0E-2B11, U+2B30-2B4C, U+2BFE, U+3030, U+FF5B, U+FF5D, U+1D400-1D7FF, U+1EE00-1EEFF;
}
/* symbols */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMaxKUBGEe.woff2) format('woff2');
  unicode-range: U+0001-000C, U+000E-001F, U+007F-009F, U+20DD-20E0, U+20E2-20E4, U+2150-218F, U+2190, U+2192, U+2194-2199, U+21AF, U+21E6-21F0, U+21F3, U+2218-2219, U+2299, U+22C4-22C6, U+2300-243F, U+2440-244A, U+2460-24FF, U+25A0-27BF, U+2800-28FF, U+2921-2922, U+2981, U+29BF, U+29EB, U+2B00-2BFF, U+4DC0-4DFF, U+FFF9-FFFB, U+10140-1018E, U+10190-1019C, U+101A0, U+101D0-101FD, U+102E0-102FB, U+10E60-10E7E, U+1D2C0-1D2D3, U+1D2E0-1D37F, U+1F000-1F0FF, U+1F100-1F1AD, U+1F1E6-1F1FF, U+1F30D-1F30F, U+1F315, U+1F31C, U+1F31E, U+1F320-1F32C, U+1F336, U+1F378, U+1F37D, U+1F382, U+1F393-1F39F, U+1F3A7-1F3A8, U+1F3AC-1F3AF, U+1F3C2, U+1F3C4-1F3C6, U+1F3CA-1F3CE, U+1F3D4-1F3E0, U+1F3ED, U+1F3F1-1F3F3, U+1F3F5-1F3F7, U+1F408, U+1F415, U+1F41F, U+1F426, U+1F43F, U+1F441-1F442, U+1F444, U+1F446-1F449, U+1F44C-1F44E, U+1F453, U+1F46A, U+1F47D, U+1F4A3, U+1F4B0, U+1F4B3, U+1F4B9, U+1F4BB, U+1F4BF, U+1F4C8-1F4CB, U+1F4D6, U+1F4DA, U+1F4DF, U+1F4E3-1F4E6, U+1F4EA-1F4ED, U+1F4F7, U+1F4F9-1F4FB, U+1F4FD-1F4FE, U+1F503, U+1F507-1F50B, U+1F50D, U+1F512-1F513, U+1F53E-1F54A, U+1F54F-1F5FA, U+1F610, U+1F650-1F67F, U+1F687, U+1F68D, U+1F691, U+1F694, U+1F698, U+1F6AD, U+1F6B2, U+1F6B9-1F6BA, U+1F6BC, U+1F6C6-1F6CF, U+1F6D3-1F6D7, U+1F6E0-1F6EA, U+1F6F0-1F6F3, U+1F6F7-1F6FC, U+1F700-1F7FF, U+1F800-1F80B, U+1F810-1F847, U+1F850-1F859, U+1F860-1F887, U+1F890-1F8AD, U+1F8B0-1F8BB, U+1F8C0-1F8C1, U+1F900-1F90B, U+1F93B, U+1F946, U+1F984, U+1F996, U+1F9E9, U+1FA00-1FA6F, U+1FA70-1FA7C, U+1FA80-1FA89, U+1FA8F-1FAC6, U+1FACE-1FADC, U+1FADF-1FAE9, U+1FAF0-1FAF8, U+1FB00-1FBFF;
}
/* vietnamese */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3OUBGEe.woff2) format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB;
}
/* latin-ext */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3KUBGEe.woff2) format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  font-stretch: 100%;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/roboto/v49/KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3yUBA.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
</style></head><body class="en_US light" style="--app-height: 919px;" wotdisconnected="true"><span id="warning-container"><i data-reactroot=""></i></span><div id="root"><div class="ds-theme" style="--ds-rgb-hover: 0 0 0 / 4%;"><div class="cb86951c"><div class="cddfb2ed"></div><div class="c3ecdb44"><div class="dc04ec1d a02af2e6"><div class="ca6d4be1 _5a20a69"><div class="_6acebc2"><svg width="35" height="24" viewBox="0 0 35 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_4892_24313)"><path d="M26.5542 4.34393C26.2719 4.20592 26.1506 4.46928 25.9856 4.60268C25.9292 4.64581 25.8815 4.70216 25.8338 4.75391C25.4215 5.19438 24.9396 5.48361 24.3105 5.44911C23.3905 5.39736 22.605 5.68659 21.9104 6.39041C21.7626 5.52271 21.2721 5.00462 20.5258 4.67226C20.1353 4.49976 19.7403 4.32668 19.4666 3.95119C19.2757 3.68381 19.2234 3.38595 19.1279 3.09211C19.0669 2.91501 19.0066 2.73388 18.8024 2.7034C18.5811 2.6689 18.4942 2.85463 18.4074 3.00989C18.0601 3.6447 17.9255 4.34393 17.9388 5.05235C17.9692 6.64572 18.642 7.91478 19.9789 8.81756C20.1307 8.92106 20.1698 9.02457 20.1221 9.1758C20.0307 9.48688 19.9226 9.78876 19.8271 10.0998C19.7662 10.2982 19.6753 10.3419 19.4626 10.2551C18.7288 9.94862 18.0952 9.49493 17.5351 8.94694C16.5846 8.02749 15.7249 7.01258 14.6531 6.21791C14.4013 6.03218 14.1494 5.85967 13.8889 5.69522C12.7952 4.63316 14.0321 3.76086 14.3185 3.65736C14.618 3.54925 14.4225 3.17779 13.4548 3.18239C12.487 3.18642 11.6015 3.51073 10.4727 3.94256C10.3077 4.00754 10.1341 4.05469 9.95637 4.09379C8.93227 3.89944 7.86849 3.85631 6.75755 3.98167C4.66564 4.21455 2.99464 5.20358 1.7664 6.89183C0.290908 8.92106 -0.0564026 11.2269 0.368535 13.6316C0.815324 16.1663 2.10911 18.2645 4.09695 19.905C6.15838 21.6059 8.53263 22.4397 11.2415 22.2799C12.8867 22.185 14.7181 21.9648 16.7841 20.2161C17.3051 20.4755 17.8519 20.579 18.7587 20.6566C19.4574 20.7216 20.1302 20.6221 20.6511 20.514C21.4671 20.3415 21.4107 19.5859 21.1157 19.4473C18.7242 18.3335 19.2492 18.7866 18.772 18.4198C19.987 16.9822 21.8431 14.4269 22.4158 10.9474C22.4722 10.5633 22.5441 10.0222 22.5355 9.71114C22.5309 9.52138 22.5746 9.44778 22.7913 9.42593C23.3905 9.35693 23.9718 9.19305 24.506 8.89921C26.0557 8.05279 26.6808 6.6624 26.828 4.996C26.8498 4.74126 26.8234 4.47791 26.5542 4.34393ZM13.0511 19.3438C10.7332 17.5216 9.60906 16.9219 9.14502 16.9477C8.71089 16.9736 8.78909 17.4704 8.88454 17.7942C8.98459 18.1139 9.11455 18.3341 9.29683 18.6147C9.42276 18.8004 9.50959 19.0764 9.1709 19.284C8.42453 19.7458 7.12671 19.1288 7.06576 19.0983C5.55519 18.2087 4.29245 17.0346 3.40233 15.4285C2.54268 13.8829 2.04356 12.2245 1.96133 10.4546C1.93948 10.0274 2.06541 9.87617 2.49092 9.79854C3.05099 9.69504 3.62831 9.67319 4.1878 9.75541C6.55342 10.101 8.56713 11.1585 10.2554 12.8341C11.2191 13.788 11.9482 14.9283 12.6992 16.0421C13.4979 17.2249 14.357 18.3519 15.4512 19.276C15.8377 19.5997 16.1459 19.8458 16.4408 20.0275C15.5513 20.127 14.0666 20.1483 13.0511 19.345V19.3438ZM14.162 12.1981C14.162 12.0083 14.3139 11.8571 14.5048 11.8571C14.5479 11.8571 14.587 11.8657 14.6221 11.8784C14.6698 11.8956 14.7135 11.9215 14.748 11.9606C14.8089 12.021 14.8434 12.1072 14.8434 12.1981C14.8434 12.3878 14.6916 12.5391 14.5007 12.5391C14.3098 12.5391 14.162 12.3878 14.162 12.1981ZM17.6127 13.968C17.3913 14.0588 17.17 14.1365 16.9572 14.1451C16.6271 14.1623 16.2672 14.0284 16.0717 13.8645C15.7681 13.6098 15.5507 13.4671 15.4599 13.0227C15.4208 12.8329 15.4426 12.5391 15.4771 12.3706C15.5553 12.0078 15.4685 11.7749 15.2126 11.5633C15.0045 11.3908 14.7394 11.343 14.4484 11.343C14.3397 11.343 14.2403 11.2953 14.1661 11.2568C14.0447 11.1964 13.9447 11.0452 14.0401 10.8594C14.0706 10.7991 14.2184 10.6524 14.2529 10.6266C14.6479 10.4017 15.1034 10.4753 15.5248 10.6438C15.9153 10.8037 16.2108 11.0969 16.6358 11.5115C17.0699 12.0124 17.1481 12.1504 17.3954 12.5264C17.5909 12.8203 17.7686 13.1221 17.8905 13.4677C17.9641 13.6834 17.8686 13.8599 17.6127 13.968Z" fill="var(--dsw-alias-brand-primary)"></path></g><defs><clippath id="clip0_4892_24313"><rect width="26.634" height="19.6" fill="white" transform="translate(0.199951 2.69922)"></rect></clippath></defs></svg></div><div class="e5bf614e"><div style="width: 3px;"></div><div class="ds-icon-button _4f3769f" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 34px; width: 34px; height: 34px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.67269 0.522888C10.8339 0.522888 11.7599 0.522762 12.4963 0.602541C13.2453 0.683705 13.8789 0.854296 14.4263 1.25202C14.7504 1.48744 15.0354 1.77252 15.2709 2.09654C15.6686 2.64398 15.8392 3.27762 15.9203 4.0266C16.0001 4.76295 16 5.689 16 6.85019V9.14991C16 10.3111 16.0001 11.2372 15.9203 11.9735C15.8392 12.7225 15.6686 13.3561 15.2709 13.9036C15.0354 14.2276 14.7504 14.5127 14.4263 14.7481C13.8789 15.1458 13.2453 15.3164 12.4963 15.3976C11.7599 15.4773 10.8339 15.4772 9.67269 15.4772H6.32727C5.16608 15.4772 4.24003 15.4773 3.50368 15.3976C2.75471 15.3164 2.12106 15.1458 1.57363 14.7481C1.2496 14.5127 0.964519 14.2276 0.7291 13.9036C0.331377 13.3561 0.160786 12.7225 0.0796224 11.9735C-0.000156655 11.2372 -3.05163e-05 10.3111 -3.05163e-05 9.14991V6.85019C-3.05163e-05 5.689 -0.000156655 4.76295 0.0796224 4.0266C0.160786 3.27762 0.331377 2.64398 0.7291 2.09654C0.964519 1.77252 1.2496 1.48744 1.57363 1.25202C2.12106 0.854296 2.75471 0.683705 3.50368 0.602541C4.24003 0.522762 5.16608 0.522888 6.32727 0.522888H9.67269ZM5.543 1.8872V14.1119C5.78633 14.1128 6.04706 14.117 6.32727 14.117H9.67269C10.8639 14.117 11.7032 14.1165 12.3492 14.0465C12.9824 13.9779 13.3497 13.8495 13.6267 13.6483C13.8354 13.4967 14.0195 13.3126 14.171 13.104C14.3722 12.8269 14.5007 12.4596 14.5693 11.8265C14.6393 11.1804 14.6398 10.3411 14.6398 9.14991V6.85019C14.6398 5.65901 14.6393 4.81972 14.5693 4.17365C14.5007 3.54053 14.3722 3.17323 14.171 2.89614C14.0195 2.68752 13.8354 2.50341 13.6267 2.35184C13.3497 2.15065 12.9824 2.02217 12.3492 1.95358C11.7032 1.88362 10.8639 1.88311 9.67269 1.88311H6.32727C6.04706 1.88311 5.78633 1.88625 5.543 1.8872ZM4.18277 1.91171C3.99122 1.92164 3.81477 1.93582 3.65073 1.95358C3.01761 2.02217 2.65031 2.15065 2.37322 2.35184C2.1646 2.50341 1.98049 2.68752 1.82892 2.89614C1.62773 3.17323 1.49925 3.54053 1.43066 4.17365C1.36071 4.81972 1.3602 5.65901 1.3602 6.85019V9.14991C1.3602 10.3411 1.36071 11.1804 1.43066 11.8265C1.49925 12.4596 1.62773 12.8269 1.82892 13.104C1.98049 13.3126 2.1646 13.4967 2.37322 13.6483C2.65031 13.8495 3.01761 13.9779 3.65073 14.0465C3.81475 14.0643 3.99124 14.0774 4.18277 14.0874V1.91171Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button _4f3769f" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 34px; width: 34px; height: 34px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8 0.599609C3.91309 0.599609 0.599609 3.91309 0.599609 8C0.599609 9.13376 0.855461 10.2098 1.3125 11.1719L1.5918 11.7588L2.76562 11.2012L2.48633 10.6143C2.11034 9.82278 1.90039 8.93675 1.90039 8C1.90039 4.63106 4.63106 1.90039 8 1.90039C11.3689 1.90039 14.0996 4.63106 14.0996 8C14.0996 11.3689 11.3689 14.0996 8 14.0996C7.31041 14.0996 6.80528 14.0514 6.35742 13.9277C5.91623 13.8059 5.49768 13.6021 4.99707 13.2529C4.26492 12.7422 3.21611 12.5616 2.35156 13.1074L2.33789 13.1162L2.32422 13.126L1.58789 13.6436L2.01953 14.9297L3.0459 14.207C3.36351 14.0065 3.83838 14.0294 4.25293 14.3184C4.84547 14.7317 5.39743 15.011 6.01172 15.1807C6.61947 15.3485 7.25549 15.4004 8 15.4004C12.0869 15.4004 15.4004 12.0869 15.4004 8C15.4004 3.91309 12.0869 0.599609 8 0.599609ZM7.34473 4.93945V7.34961H4.93945V8.65039H7.34473V11.0605H8.64551V8.65039H11.0605V7.34961H8.64551V4.93945H7.34473Z" fill="currentColor"></path></svg></div></div></div></div><div class="b8812f16 a2f3d50e _70b689f"><div class="_262baab"><div class="e066abb8"><svg width="143" height="23" viewBox="0 0 143 23" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M78.6785 18.6823H77.1078V16.2472H78.6785C79.6513 16.2472 80.6342 16.0047 81.2672 15.3308C81.9009 14.6569 82.14 13.6232 82.14 12.59C82.14 11.5569 81.9109 10.5231 81.2672 9.84981C80.6247 9.17594 79.6513 8.93343 78.6785 8.93343C77.7056 8.93343 76.7228 9.17594 76.0886 9.84981C75.4549 10.5237 75.2158 11.5569 75.2158 12.59V22.5909H72.4605V6.50781H75.2158V7.53204H75.7209C75.7757 7.4689 75.8304 7.41525 75.8857 7.36161C76.5752 6.73244 77.6308 6.50781 78.6684 6.50781C80.2944 6.50781 81.9193 6.91236 82.9849 8.03549C84.0499 9.15861 84.4265 10.8835 84.4265 12.6001C84.4265 14.3166 84.0404 16.0326 82.9849 17.1647C81.9288 18.2967 80.2944 18.6834 78.6785 18.6834V18.6823Z" fill="var(--dsw-alias-brand-primary)"></path><path d="M36.7486 6.94097H38.3188V9.37609H36.7486C35.7753 9.37609 34.7929 9.61859 34.1593 10.2925C33.5257 10.9663 33.2871 12.0001 33.2871 13.0332C33.2871 14.0664 33.5167 15.0996 34.1593 15.7734C34.8019 16.4473 35.7753 16.6898 36.7486 16.6898C37.722 16.6898 38.7049 16.4473 39.3385 15.7734C39.9722 15.0996 40.2108 14.0664 40.2108 13.0332V3.02344H42.9655V19.116H40.2108V18.0918H39.7057C39.6503 18.1544 39.5956 18.2086 39.5403 18.2622C38.8513 18.8908 37.7952 19.116 36.7576 19.116C35.1321 19.116 33.5067 18.712 32.4416 17.5889C31.3766 16.4658 31 14.7403 31 13.0243C31 11.3083 31.3856 9.59177 32.4416 8.45971C33.5067 7.33658 35.1321 6.94097 36.7486 6.94097Z" fill="var(--dsw-alias-brand-primary)"></path><path d="M56.7855 12.8155V13.795H49.4483V11.8454H54.3152C54.2051 11.1358 53.9481 10.4709 53.4887 9.9853C52.8277 9.2846 51.808 9.03316 50.7983 9.03316C49.7886 9.03316 48.7688 9.2846 48.1078 9.9853C47.4468 10.686 47.2076 11.7555 47.2076 12.816C47.2076 13.8766 47.4462 14.9544 48.1078 15.6462C48.7688 16.338 49.788 16.5989 50.7983 16.5989C51.8085 16.5989 52.8277 16.3475 53.4887 15.6462C53.5804 15.5473 53.6631 15.4395 53.7458 15.3316H56.4642C56.2256 16.1765 55.849 16.9403 55.2796 17.5332C54.1777 18.692 52.479 19.1145 50.7983 19.1145C49.1175 19.1145 47.4188 18.701 46.3169 17.5332C45.215 16.3653 44.8111 14.5862 44.8111 12.816C44.8111 11.0458 45.2061 9.25778 46.3169 8.0989C47.4283 6.94001 49.1175 6.51758 50.7983 6.51758C52.479 6.51758 54.1777 6.93107 55.2796 8.0989C56.3904 9.26672 56.7855 11.0458 56.7855 12.816V12.8155Z" fill="var(--dsw-alias-brand-primary)"></path><path d="M70.6151 12.8155V13.795H63.2779V11.8454H68.1448C68.0341 11.1358 67.7776 10.4709 67.3183 9.9853C66.6573 9.2846 65.6376 9.03316 64.6279 9.03316C63.6182 9.03316 62.5984 9.2846 61.9374 9.9853C61.2764 10.686 61.0372 11.7555 61.0372 12.816C61.0372 13.8766 61.2758 14.9544 61.9374 15.6462C62.5984 16.338 63.6182 16.5989 64.6279 16.5989C65.6376 16.5989 66.6573 16.3475 67.3183 15.6462C67.4105 15.5473 67.4927 15.4395 67.5748 15.3316H70.2938C70.0546 16.1765 69.678 16.9403 69.1086 17.5332C68.0067 18.692 66.3081 19.1145 64.6279 19.1145C62.9476 19.1145 61.2484 18.701 60.1465 17.5332C59.0446 16.3653 58.6406 14.5862 58.6406 12.816C58.6406 11.0458 59.0357 9.25778 60.1465 8.0989C61.2579 6.94001 62.9471 6.51758 64.6279 6.51758C66.3086 6.51758 68.0067 6.93107 69.1086 8.0989C70.22 9.26672 70.6151 11.0458 70.6151 12.816V12.8155Z" fill="var(--dsw-alias-brand-primary)"></path><path d="M92.2781 19.1156C93.9589 19.1156 95.657 18.8731 96.7589 18.1813C97.8608 17.4896 98.2653 16.438 98.2653 15.3959C98.2653 14.3538 97.8697 13.2932 96.7589 12.6104C95.657 11.9276 93.9583 11.6756 92.2781 11.6756C91.5612 11.6756 90.9002 11.5767 90.4319 11.3163C89.9637 11.0464 89.7893 10.6424 89.7893 10.2379C89.7893 9.83332 89.9547 9.42039 90.4319 9.15944C90.9002 8.88955 91.626 8.80015 92.3418 8.80015C93.0576 8.80015 93.7834 8.89905 94.2528 9.15944C94.721 9.42933 94.8954 9.83332 94.8954 10.2379H97.6959C97.6959 9.1952 97.3383 8.13522 96.3376 7.4524C95.3368 6.76958 93.803 6.51758 92.2787 6.51758C90.7543 6.51758 89.2211 6.76008 88.2198 7.4524C87.219 8.14416 86.8603 9.1952 86.8603 10.2379C86.8603 11.2805 87.2185 12.3405 88.2198 13.0233C89.2205 13.7061 90.7538 13.9582 92.2787 13.9582C93.0682 13.9582 93.941 14.0571 94.464 14.3174C94.9881 14.5784 95.1714 14.9913 95.1714 15.3959C95.1714 15.8004 94.9881 16.2133 94.464 16.4743C93.941 16.7347 93.142 16.8336 92.3524 16.8336C91.5629 16.8336 90.7543 16.7347 90.2397 16.4743C89.7256 16.2139 89.5323 15.8004 89.5323 15.3959H86.2998C86.2998 16.4385 86.6943 17.4985 87.8063 18.1813C88.9171 18.8641 90.5979 19.1156 92.2787 19.1156H92.2781Z" fill="var(--dsw-alias-brand-primary)"></path><path d="M112.094 12.8155V13.795H104.757V11.8454H109.624C109.514 11.1358 109.257 10.4709 108.798 9.9853C108.136 9.2846 107.117 9.03316 106.106 9.03316C105.095 9.03316 104.077 9.2846 103.416 9.9853C102.755 10.686 102.517 11.7555 102.517 12.816C102.517 13.8766 102.755 14.9544 103.416 15.6462C104.077 16.338 105.097 16.5989 106.106 16.5989C107.116 16.5989 108.136 16.3475 108.798 15.6462C108.889 15.5473 108.972 15.4395 109.054 15.3316H111.772C111.533 16.1765 111.157 16.9403 110.588 17.5332C109.486 18.692 107.787 19.1145 106.106 19.1145C104.425 19.1145 102.727 18.701 101.625 17.5332C100.524 16.3653 100.12 14.5862 100.12 12.816C100.12 11.0458 100.515 9.25778 101.625 8.0989C102.737 6.94001 104.427 6.51758 106.106 6.51758C107.786 6.51758 109.486 6.93107 110.588 8.0989C111.699 9.26672 112.093 11.0458 112.093 12.816L112.094 12.8155Z" fill="var(--dsw-alias-brand-primary)"></path><path d="M125.924 12.8155V13.795H118.586V11.8454H123.453C123.344 11.1358 123.086 10.4709 122.627 9.9853C121.966 9.2846 120.947 9.03316 119.936 9.03316C118.926 9.03316 117.907 9.2846 117.246 9.9853C116.585 10.686 116.346 11.7555 116.346 12.816C116.346 13.8766 116.585 14.9544 117.246 15.6462C117.907 16.338 118.927 16.5989 119.936 16.5989C120.946 16.5989 121.966 16.3475 122.627 15.6462C122.719 15.5473 122.801 15.4395 122.885 15.3316H125.602C125.363 16.1765 124.987 16.9403 124.418 17.5332C123.316 18.692 121.617 19.1145 119.936 19.1145C118.256 19.1145 116.558 18.701 115.456 17.5332C114.354 16.3653 113.949 14.5862 113.949 12.816C113.949 11.0458 114.344 9.25778 115.456 8.0989C116.567 6.94001 118.256 6.51758 119.936 6.51758C121.617 6.51758 123.315 6.93107 124.418 8.0989C125.529 9.26672 125.924 11.0458 125.924 12.816V12.8155Z" fill="var(--dsw-alias-brand-primary)"></path><path d="M130.524 3.02344H127.77V19.116H130.524V3.02344Z" fill="var(--dsw-alias-brand-primary)"></path><path d="M135.227 12.4384L139.744 19.1146H136.337L131.819 12.4384L136.337 7.07422H139.744L135.227 12.4384Z" fill="var(--dsw-alias-brand-primary)"></path><g clip-path="url(#clip0_4329_19769)"><path d="M26.5174 3.39471C26.235 3.2567 26.1137 3.52006 25.9487 3.65346C25.8923 3.69659 25.8446 3.75294 25.7969 3.80469C25.3846 4.24516 24.9027 4.53439 24.2737 4.49989C23.3536 4.44814 22.5682 4.73737 21.8735 5.44119C21.7258 4.57349 21.2353 4.0554 20.4889 3.72304C20.0985 3.55054 19.7034 3.37746 19.4297 3.00197C19.2388 2.73459 19.1865 2.43673 19.091 2.14289C19.0301 1.96579 18.9697 1.78466 18.7656 1.75418C18.5442 1.71968 18.4574 1.90541 18.3705 2.06067C18.0232 2.69549 17.8887 3.39471 17.9019 4.10313C17.9324 5.6965 18.6051 6.96556 19.9421 7.86834C20.0939 7.97184 20.133 8.07535 20.0852 8.22658C19.9938 8.53766 19.8857 8.83955 19.7903 9.15063C19.7293 9.34901 19.6385 9.39271 19.4257 9.30588C18.692 8.9994 18.0583 8.54571 17.4982 7.99772C16.5477 7.07827 15.6881 6.06336 14.6162 5.26869C14.3644 5.08296 14.1125 4.91045 13.8521 4.746C12.7584 3.68394 13.9952 2.81164 14.2816 2.70814C14.5812 2.60003 14.3857 2.22857 13.4179 2.23317C12.4502 2.2372 11.5646 2.56151 10.4359 2.99335C10.2708 3.05832 10.0972 3.10547 9.91951 3.14457C8.8954 2.95022 7.83162 2.90709 6.72069 3.03245C4.62877 3.26533 2.95777 4.25436 1.72954 5.94261C0.254043 7.97184 -0.0932679 10.2777 0.33167 12.6824C0.778458 15.2171 2.07225 17.3153 4.06008 18.9558C6.12152 20.6567 8.49577 21.4905 11.2047 21.3306C12.8498 21.2358 14.6812 21.0155 16.7473 19.2669C17.2682 19.5262 17.8151 19.6297 18.7219 19.7074C19.4205 19.7724 20.0933 19.6729 20.6143 19.5648C21.4302 19.3923 21.3739 18.6367 21.0789 18.4981C18.6874 17.3843 19.2124 17.8374 18.7351 17.4706C19.9501 16.033 21.8063 13.4776 22.379 9.99821C22.4353 9.61409 22.5072 9.073 22.4986 8.76192C22.494 8.57216 22.5377 8.49856 22.7545 8.47671C23.3536 8.40771 23.935 8.24383 24.4692 7.94999C26.0188 7.10357 26.6439 5.71318 26.7911 4.04678C26.8129 3.79204 26.7865 3.52869 26.5174 3.39471ZM13.0143 18.3946C10.6964 16.5724 9.5722 15.9726 9.10816 15.9985C8.67402 16.0244 8.75222 16.5212 8.84768 16.8449C8.94773 17.1646 9.07768 17.3849 9.25996 17.6655C9.38589 17.8512 9.47272 18.1272 9.13404 18.3348C8.38766 18.7965 7.08985 18.1796 7.0289 18.1491C5.51833 17.2595 4.25559 16.0853 3.36546 14.4793C2.50581 12.9337 2.0067 11.2753 1.92447 9.50542C1.90262 9.07818 2.02855 8.92695 2.45406 8.84932C3.01413 8.74582 3.59144 8.72397 4.15093 8.80619C6.51656 9.15178 8.53027 10.2092 10.2185 11.8848C11.1822 12.8388 11.9114 13.979 12.6623 15.0929C13.461 16.2757 14.3201 17.4027 15.4144 18.3268C15.8008 18.6505 16.109 18.8966 16.404 19.0783C15.5144 19.1778 14.0297 19.1991 13.0143 18.3958V18.3946ZM14.1252 11.2489C14.1252 11.0591 14.277 10.9079 14.4679 10.9079C14.511 10.9079 14.5501 10.9165 14.5852 10.9292C14.6329 10.9464 14.6766 10.9723 14.7111 11.0114C14.7721 11.0718 14.8066 11.158 14.8066 11.2489C14.8066 11.4386 14.6548 11.5899 14.4639 11.5899C14.273 11.5899 14.1252 11.4386 14.1252 11.2489ZM17.5759 13.0188C17.3545 13.1096 17.1331 13.1873 16.9203 13.1959C16.5903 13.2131 16.2303 13.0791 16.0348 12.9153C15.7312 12.6605 15.5139 12.5179 15.423 12.0734C15.3839 11.8837 15.4057 11.5899 15.4402 11.4214C15.5185 11.0585 15.4316 10.8257 15.1757 10.614C14.9676 10.4415 14.7025 10.3938 14.4115 10.3938C14.3029 10.3938 14.2034 10.3461 14.1292 10.3076C14.0079 10.2472 13.9078 10.096 14.0033 9.91023C14.0338 9.84985 14.1815 9.70322 14.216 9.67734C14.6111 9.45251 15.0665 9.52612 15.488 9.6946C15.8784 9.85445 16.174 10.1477 16.5989 10.5623C17.033 11.0631 17.1112 11.2011 17.3585 11.5772C17.554 11.871 17.7317 12.1729 17.8536 12.5185C17.9272 12.7341 17.8317 12.9107 17.5759 13.0188Z" fill="var(--dsw-alias-brand-primary)"></path></g><defs><clippath id="clip0_4329_19769"><rect width="26.634" height="19.6" fill="white" transform="translate(0.163086 1.75)"></rect></clippath></defs></svg></div><div class="ds-icon-button _7d1f5e2" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 34px; width: 16px; height: 16px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.67269 0.522888C10.8339 0.522888 11.7599 0.522762 12.4963 0.602541C13.2453 0.683705 13.8789 0.854296 14.4263 1.25202C14.7504 1.48744 15.0354 1.77252 15.2709 2.09654C15.6686 2.64398 15.8392 3.27762 15.9203 4.0266C16.0001 4.76295 16 5.689 16 6.85019V9.14991C16 10.3111 16.0001 11.2372 15.9203 11.9735C15.8392 12.7225 15.6686 13.3561 15.2709 13.9036C15.0354 14.2276 14.7504 14.5127 14.4263 14.7481C13.8789 15.1458 13.2453 15.3164 12.4963 15.3976C11.7599 15.4773 10.8339 15.4772 9.67269 15.4772H6.32727C5.16608 15.4772 4.24003 15.4773 3.50368 15.3976C2.75471 15.3164 2.12106 15.1458 1.57363 14.7481C1.2496 14.5127 0.964519 14.2276 0.7291 13.9036C0.331377 13.3561 0.160786 12.7225 0.0796224 11.9735C-0.000156655 11.2372 -3.05163e-05 10.3111 -3.05163e-05 9.14991V6.85019C-3.05163e-05 5.689 -0.000156655 4.76295 0.0796224 4.0266C0.160786 3.27762 0.331377 2.64398 0.7291 2.09654C0.964519 1.77252 1.2496 1.48744 1.57363 1.25202C2.12106 0.854296 2.75471 0.683705 3.50368 0.602541C4.24003 0.522762 5.16608 0.522888 6.32727 0.522888H9.67269ZM5.543 1.8872V14.1119C5.78633 14.1128 6.04706 14.117 6.32727 14.117H9.67269C10.8639 14.117 11.7032 14.1165 12.3492 14.0465C12.9824 13.9779 13.3497 13.8495 13.6267 13.6483C13.8354 13.4967 14.0195 13.3126 14.171 13.104C14.3722 12.8269 14.5007 12.4596 14.5693 11.8265C14.6393 11.1804 14.6398 10.3411 14.6398 9.14991V6.85019C14.6398 5.65901 14.6393 4.81972 14.5693 4.17365C14.5007 3.54053 14.3722 3.17323 14.171 2.89614C14.0195 2.68752 13.8354 2.50341 13.6267 2.35184C13.3497 2.15065 12.9824 2.02217 12.3492 1.95358C11.7032 1.88362 10.8639 1.88311 9.67269 1.88311H6.32727C6.04706 1.88311 5.78633 1.88625 5.543 1.8872ZM4.18277 1.91171C3.99122 1.92164 3.81477 1.93582 3.65073 1.95358C3.01761 2.02217 2.65031 2.15065 2.37322 2.35184C2.1646 2.50341 1.98049 2.68752 1.82892 2.89614C1.62773 3.17323 1.49925 3.54053 1.43066 4.17365C1.36071 4.81972 1.3602 5.65901 1.3602 6.85019V9.14991C1.3602 10.3411 1.36071 11.1804 1.43066 11.8265C1.49925 12.4596 1.62773 12.8269 1.82892 13.104C1.98049 13.3126 2.1646 13.4967 2.37322 13.6483C2.65031 13.8495 3.01761 13.9779 3.65073 14.0465C3.81475 14.0643 3.99124 14.0774 4.18277 14.0874V1.91171Z" fill="currentColor"></path></svg></div></div></div><div class="_5a8ac7a a084f19e"><div class="ds-icon _1c42ad7" style="font-size: 16px; width: 16px; height: 16px;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8 0.599609C3.91309 0.599609 0.599609 3.91309 0.599609 8C0.599609 9.13376 0.855461 10.2098 1.3125 11.1719L1.5918 11.7588L2.76562 11.2012L2.48633 10.6143C2.11034 9.82278 1.90039 8.93675 1.90039 8C1.90039 4.63106 4.63106 1.90039 8 1.90039C11.3689 1.90039 14.0996 4.63106 14.0996 8C14.0996 11.3689 11.3689 14.0996 8 14.0996C7.31041 14.0996 6.80528 14.0514 6.35742 13.9277C5.91623 13.8059 5.49768 13.6021 4.99707 13.2529C4.26492 12.7422 3.21611 12.5616 2.35156 13.1074L2.33789 13.1162L2.32422 13.126L1.58789 13.6436L2.01953 14.9297L3.0459 14.207C3.36351 14.0065 3.83838 14.0294 4.25293 14.3184C4.84547 14.7317 5.39743 15.011 6.01172 15.1807C6.61947 15.3485 7.25549 15.4004 8 15.4004C12.0869 15.4004 15.4004 12.0869 15.4004 8C15.4004 3.91309 12.0869 0.599609 8 0.599609ZM7.34473 4.93945V7.34961H4.93945V8.65039H7.34473V11.0605H8.64551V8.65039H11.0605V7.34961H8.64551V4.93945H7.34473Z" fill="currentColor"></path></svg></div><span>New chat</span></div><div class="_3586175 ds-scroll-area"><div class="ds-scroll-area__gutters" style="position: sticky; top: 0px; left: 0px; right: 0px; height: 0px; --container-height: 739px;"><div class="ds-scroll-area__horizontal-gutter" style="left: 8px; right: 8px; top: calc(var(--container-height) - 8px); height: 8px;"><div class="ds-scroll-area__horizontal-bar" style="display: none;"></div></div><div class="ds-scroll-area__vertical-gutter" style="right: -12px; top: 0px; bottom: calc(0px - var(--container-height) + 0px); width: 8px;"><div class="ds-scroll-area__vertical-bar" style="display: none;"></div></div></div><div class="_6d215eb ds-scroll-area"><div class="_77cdc67 _8a693f3"><div class="_3098d02"><div class="f3d18f6a">Yesterday</div><a class="_546d736 b64fb9ae" href="https://chat.deepseek.com/a/chat/s/81919a07-77e7-4946-bfad-83bd2304a65a" tabindex="0"><div class="c08e6e93">Реализация многопоточной записи и чтения в Qt</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a></div><div class="_3098d02"><div class="f3d18f6a">7 Days</div><a class="_546d736" href="https://chat.deepseek.com/a/chat/s/6e0a38bc-64ef-46a9-a143-c004c2a4f860" tabindex="0"><div class="c08e6e93">Анализ свойств графа по матрице смежности</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a><a class="_546d736" href="https://chat.deepseek.com/a/chat/s/6f13c364-577b-45aa-818a-c59ed1eecdfc" tabindex="0"><div class="c08e6e93">Divergence of Series with Logarithmic Term</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a><a class="_546d736" href="https://chat.deepseek.com/a/chat/s/0360a75f-1f9b-4b8a-8ebc-bcd6de28c597" tabindex="0"><div class="c08e6e93">Исследование сходимости ряда с асимптотическим анализом</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a></div><div class="_3098d02"><div class="f3d18f6a">30 Days</div><a class="_546d736" href="https://chat.deepseek.com/a/chat/s/af4508cf-4542-4b42-b82b-01d56416fad9" tabindex="0"><div class="c08e6e93">Инцидентность в теории графов: вершина-ребро</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a><a class="_546d736" href="https://chat.deepseek.com/a/chat/s/44f175ea-193f-44c7-b425-a75c5c1b19a3" tabindex="0"><div class="c08e6e93">Проверка транзитивности и замыкания отношения</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a><a class="_546d736" href="https://chat.deepseek.com/a/chat/s/12ab5cae-4627-48d0-9b9d-e8094c7bdff5" tabindex="0"><div class="c08e6e93">Выбор бесплатного VPN для защиты</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a><a class="_546d736" href="https://chat.deepseek.com/a/chat/s/10475fdb-8ce9-4ed5-8d35-cbe4d1ca1a25" tabindex="0"><div class="c08e6e93">Анализ последовательности и нахождение параметров</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a><a class="_546d736" href="https://chat.deepseek.com/a/chat/s/b22e2587-6f05-4807-bff7-f67562bf43ee" tabindex="0"><div class="c08e6e93">Дополнение множества: правильные ответы</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a><a class="_546d736" href="https://chat.deepseek.com/a/chat/s/d086ef4c-b4e8-4367-a805-83c33f7cf899" tabindex="0"><div class="c08e6e93">Проверка множеств на пустоту</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a><a class="_546d736" href="https://chat.deepseek.com/a/chat/s/ab53e57b-2592-43b6-a610-d1f5801920b1" tabindex="0"><div class="c08e6e93">Передача данных из QThread в основной поток</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a><a class="_546d736" href="https://chat.deepseek.com/a/chat/s/65da355b-c3b2-412c-9a8e-2e58541cd4b0" tabindex="0"><div class="c08e6e93">Оптимизация кода для повышения скорости</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a><a class="_546d736" href="https://chat.deepseek.com/a/chat/s/d310f7ca-2009-4728-ade8-fda5f2aebb09" tabindex="0"><div class="c08e6e93">Поток векторного поля через замкнутую поверхность</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a><a class="_546d736" href="https://chat.deepseek.com/a/chat/s/6ac747d9-5d72-4b2f-a539-af7fb077cef8" tabindex="0"><div class="c08e6e93">Построение диаграмм Эйлера-Венна по заданным условиям</div><div class="_254829d"><div class="ds-icon-button _2090548" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px; color: var(--dsw-alias-label-tertiary);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div></a></div></div><div class="de3d058c be66d622"></div></div><div class="_1d72f01"></div></div><div class="_2afd28d" tabindex="0"><div class="ede5bc47"><img class="fdf01f38" src="./dudasd_files/nLy106w81JWuPMG5DrFdfNxG" alt="" aria-hidden="true" style="display: block;"></div><div class="_9d8da05">Иван Милованов</div><div class="ds-icon _39cc453" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8.00006C4.5514 8.63519 4.03653 9.15006 3.4014 9.15006C2.76628 9.15006 2.2514 8.63519 2.2514 8.00006C2.2514 7.36493 2.76628 6.85006 3.4014 6.85006C4.03653 6.85006 4.5514 7.36493 4.5514 8.00006Z" fill="currentColor"></path><path d="M9.14754 8.00006C9.14754 8.63519 8.63267 9.15006 7.99754 9.15006C7.36242 9.15006 6.84754 8.63519 6.84754 8.00006C6.84754 7.36493 7.36242 6.85006 7.99754 6.85006C8.63267 6.85006 9.14754 7.36493 9.14754 8.00006Z" fill="currentColor"></path><path d="M13.7486 8.00006C13.7486 8.63519 13.2337 9.15006 12.5986 9.15006C11.9634 9.15006 11.4486 8.63519 11.4486 8.00006C11.4486 7.36493 11.9634 6.85006 12.5986 6.85006C13.2337 6.85006 13.7486 7.36493 13.7486 8.00006Z" fill="currentColor"></path></svg></div></div></div></div><div class="_4cbcd96 _7d10bb1"></div><div class="_7780f2e"><div class="_765a5cd"><div class="_2be88ba"><div class="f8d1e4c0"><div style="flex: 1 1 0%; min-width: 0px; display: flex; place-content: center; z-index: 12;"><div class="afa34042 e37a04e4 e0a1edb7" tabindex="0" style="outline: none;">Реализация многопоточной записи и чтения в Qt</div></div></div><div class="_0efe408"><div class="ds-icon-button" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 44px; width: 44px; height: 44px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 20px; width: 20px; height: 20px;"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.2028 4.90042V6.43663H2.7973V4.90042H17.2028Z" fill="currentColor"></path><path d="M10.9604 13.0635V14.5997H2.7973V13.0635H10.9604Z" fill="currentColor"></path></svg></div></div><div class="_348bebe"></div><div class="ds-icon-button" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 44px; width: 44px; height: 44px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 20px; width: 20px; height: 20px;"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 1.22949C5.15604 1.22949 1.22943 5.1561 1.22943 10.0001C1.22943 11.3438 1.53197 12.619 2.07365 13.7593L2.40679 14.4596L3.80656 13.7943L3.47436 13.0939L3.31631 12.7371C2.97057 11.8939 2.77968 10.97 2.77968 10.0001C2.77968 6.0125 6.01243 2.77974 10 2.77974C13.9876 2.77974 17.2203 6.0125 17.2203 10.0001C17.2203 13.9876 13.9876 17.2204 10 17.2204C9.18341 17.2204 8.58586 17.1622 8.05603 17.0159C7.53403 16.8718 7.03891 16.6306 6.44615 16.2172C5.5775 15.6113 4.3323 15.3976 3.3059 16.0459L3.28981 16.0563L3.27372 16.0676L2.5904 16.5484L3.10431 18.0826L4.14444 17.35C4.51837 17.1207 5.07302 17.1507 5.5584 17.4892C6.26064 17.979 6.91506 18.3092 7.64339 18.5104C8.36397 18.7093 9.11785 18.7706 10 18.7706C14.844 18.7706 18.7706 14.844 18.7706 10.0001C18.7706 5.1561 14.844 1.22949 10 1.22949ZM9.2192 6.36955V9.22493H6.36949V10.7752H9.2192V13.6306H10.7694V10.7752H13.6305V9.22493H10.7694V6.36955H9.2192Z" fill="currentColor"></path></svg></div></div></div><div class="ds-icon-button _57370c5 _5dedc1e" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 34px; width: 34px; height: 34px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.7484 11.1004C15.6274 11.8866 15.5288 12.5365 15.3882 13.0496C15.243 13.579 15.0339 14.0407 14.6455 14.4162C14.5638 14.4952 14.4775 14.5699 14.387 14.6387C13.9568 14.9656 13.4683 15.1012 12.923 15.1642C12.3944 15.2252 11.7374 15.2245 10.9419 15.2245H5.05809C4.2626 15.2245 3.6056 15.2252 3.07703 15.1642C2.53171 15.1012 2.04317 14.9656 1.61296 14.6387C1.52248 14.5699 1.43618 14.4952 1.35447 14.4162C0.966081 14.0407 0.756961 13.579 0.611839 13.0496C0.471162 12.5365 0.372616 11.8866 0.251648 11.1004L1.6458 10.8864C1.77181 11.7054 1.85791 12.2602 1.97209 12.6767C2.08174 13.0767 2.1976 13.2701 2.3344 13.4024C2.37603 13.4426 2.42074 13.4807 2.46683 13.5158C2.6184 13.6308 2.8272 13.7161 3.23912 13.7636C3.66812 13.8131 4.22949 13.8145 5.05809 13.8145H10.9419C11.7705 13.8145 12.3319 13.8131 12.7609 13.7636C13.1728 13.7161 13.3816 13.6308 13.5332 13.5158C13.5793 13.4807 13.624 13.4426 13.6656 13.4024C13.8024 13.2701 13.9183 13.0767 14.0279 12.6767C14.1421 12.2602 14.2282 11.7054 14.3542 10.8864L15.7484 11.1004ZM7.71503 0.558394C7.90371 0.52798 8.09629 0.52798 8.28498 0.558394C8.63706 0.615181 8.91293 0.790123 9.14944 0.985327C9.37579 1.17216 9.62518 1.42894 9.90478 1.7163L13.387 5.29491L12.8817 5.78753L12.3763 6.27908L8.89412 2.70047C8.82608 2.63054 8.76286 2.56716 8.70555 2.50873V10.5336H7.29445V2.50873C7.23714 2.56716 7.17392 2.63054 7.10588 2.70047L3.62368 6.27908L3.11835 5.78753L2.61302 5.29491L6.09522 1.7163C6.37482 1.42894 6.62422 1.17216 6.85057 0.985327C7.08707 0.790123 7.36294 0.615181 7.71503 0.558394Z" fill="currentColor"></path></svg></div></div></div><div class="_3919b83"><div class="_8f60047"><div class="ds-scroll-area__gutters" style="position: sticky; top: 0px; left: 0px; right: 0px; height: 0px; --container-height: 859px;"><div class="ds-scroll-area__horizontal-gutter" style="left: 8px; right: 8px; top: calc(var(--container-height) - 8px); height: 8px;"><div class="ds-scroll-area__horizontal-bar" style="display: none;"></div></div><div class="ds-scroll-area__vertical-gutter" style="right: 0px; top: 0px; bottom: calc(0px - var(--container-height) + 2px); width: 8px;"><div class="ds-scroll-area__vertical-bar" style="top: 0px; height: 24px;"></div></div></div><div class="_0f72b0b ds-scroll-area"><div class="dad65929"><div class="_9663006" data-um-id="1"><div class="d29f3d7d ds-message _63c77b1" style="--panel-width: 0px;"><div class="fbb737a4">Qt6.9 c++. Как можно реализовать запись в файл данных из одного потока и считывание этих данных в другом потоке, при этом считывание данных начинается с последнего элемента </div></div><div class="_11d6b3a"><div class="_425ea0b"><div class="ds-flex _78e0558" style="align-items: flex-end; gap: 0px;"><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button d4910adc" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px; margin-left: 10px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.94073 1.34948C10.7047 0.902375 11.6503 0.90248 12.4143 1.34948C12.706 1.52022 12.9687 1.79124 13.3104 2.1329C13.652 2.47454 13.9231 2.73727 14.0938 3.029C14.5408 3.79301 14.5409 4.73862 14.0938 5.50257C13.9231 5.79422 13.652 6.0571 13.3104 6.39867L6.65929 13.0498C6.28065 13.4284 6.00692 13.7108 5.6654 13.9097C5.32388 14.1085 4.94312 14.2074 4.42702 14.3498L3.24391 14.6762C2.77524 14.8054 2.34535 14.9263 2.00128 14.9685C1.65193 15.0112 1.17961 15.0014 0.810733 14.6326C0.44189 14.2637 0.432076 13.7914 0.474829 13.442C0.517004 13.098 0.63787 12.668 0.767151 12.1994L1.09349 11.0163C1.23585 10.5002 1.33478 10.1194 1.53356 9.77791C1.73246 9.43639 2.01487 9.16266 2.39352 8.78402L9.04463 2.1329C9.38622 1.79132 9.64908 1.52023 9.94073 1.34948ZM15.5427 14.8399H7.5522L8.96704 13.425H15.5427V14.8399ZM3.39379 9.78429C2.96497 10.2131 2.84241 10.3437 2.75706 10.4901C2.6718 10.6366 2.61858 10.8079 2.4573 11.3926L2.13096 12.5757C2.0018 13.0439 1.92191 13.3419 1.8886 13.5536C2.10038 13.5204 2.39869 13.4417 2.86761 13.3123L4.05072 12.986C4.63541 12.8247 4.80666 12.7715 4.9532 12.6862C5.09965 12.6009 5.23019 12.4783 5.65902 12.0495L10.721 6.9865L8.45574 4.72128L3.39379 9.78429ZM11.7 2.57085C11.3774 2.38205 10.9777 2.38205 10.6551 2.57085C10.5602 2.62653 10.4487 2.72937 10.0449 3.13317L9.45601 3.72101L11.7212 5.98623L12.3101 5.3984C12.7139 4.99464 12.8168 4.88314 12.8725 4.78825C13.0612 4.46567 13.0612 4.06592 12.8725 3.74333C12.8168 3.64834 12.7145 3.53758 12.3101 3.13317C11.9057 2.72869 11.795 2.62647 11.7 2.57085Z" fill="currentColor"></path></svg></div></div></div></div></div></div><div class="_4f9bf79 _43c05b5" style="--assistant-last-margin-bottom: 32px;"><div class="ds-message _63c77b1" style="--panel-width: 0px;"><div class="_74c0879" style="--collapsible-area-title-height: 38px; --group-title-sticky-top: 0px;"><div class="_245c867"><div class="_5ab5d64"><div class="ds-icon _970ac5e" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.00198 6.6446C8.75032 6.6446 9.35738 7.25175 9.35745 8.00007C9.35745 8.74844 8.75036 9.35554 8.00198 9.35554C7.25373 9.35539 6.64749 8.74835 6.64749 8.00007C6.64756 7.25184 7.25377 6.64474 8.00198 6.6446Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.97171 1.29987C11.5854 0.718977 13.271 0.642258 14.3145 1.68561C15.3578 2.72908 15.2811 4.41472 14.7002 6.02839C14.4708 6.66567 14.1505 7.32943 13.75 8.00007C14.1505 8.67068 14.4708 9.3345 14.7002 9.97175C15.2811 11.5854 15.3579 13.2711 14.3145 14.3145C13.2711 15.3579 11.5854 15.2812 9.97171 14.7003C9.33446 14.4708 8.67065 14.1505 8.00003 13.7501C7.32939 14.1505 6.66564 14.4708 6.02835 14.7003C4.41467 15.2812 2.72905 15.3578 1.68558 14.3145C0.642216 13.2711 0.718931 11.5854 1.29984 9.97175C1.52921 9.3346 1.84871 8.67055 2.24905 8.00007C1.84872 7.32959 1.52921 6.66551 1.29984 6.02839C0.718913 4.41465 0.642131 2.72906 1.68558 1.68561C2.72903 0.642173 4.41462 0.718948 6.02835 1.29987C6.66547 1.52925 7.32956 1.84876 8.00003 2.24909C8.67051 1.84875 9.33457 1.52925 9.97171 1.29987ZM12.9405 9.21296C12.4392 9.89306 11.8617 10.5681 11.2149 11.2149C10.5681 11.8617 9.89302 12.4392 9.21292 12.9405C9.62538 13.1579 10.0271 13.338 10.4121 13.4766C11.9147 14.0175 12.9173 13.8738 13.3955 13.3956C13.8738 12.9173 14.0175 11.9147 13.4766 10.4122C13.338 10.0272 13.1579 9.62541 12.9405 9.21296ZM3.05862 9.21296C2.84127 9.62529 2.66203 10.0273 2.52347 10.4122C1.98258 11.9147 2.12633 12.9173 2.60452 13.3956C3.08284 13.8737 4.08551 14.0175 5.58792 13.4766C5.9727 13.3381 6.37395 13.1578 6.78616 12.9405C6.1063 12.4393 5.43174 11.8615 4.78519 11.2149C4.13829 10.568 3.55999 9.8932 3.05862 9.21296ZM7.99905 3.79206C7.23185 4.31425 6.45312 4.95519 5.70413 5.70417C4.95515 6.45315 4.31421 7.2319 3.79202 7.99909C4.31437 8.76672 4.95477 9.54659 5.70413 10.296C6.45315 11.045 7.23277 11.6849 8.00003 12.2071C8.76731 11.6849 9.54689 11.045 10.2959 10.296C11.045 9.54692 11.6848 8.76735 12.2071 8.00007C11.6848 7.23281 11.0449 6.45318 10.2959 5.70417C9.54656 4.95481 8.76668 4.3144 7.99905 3.79206ZM5.58792 2.52351C4.08539 1.98261 3.08278 2.12632 2.60452 2.60456C2.12627 3.08281 1.98258 4.08542 2.52347 5.58796C2.66195 5.97259 2.84146 6.37415 3.05862 6.7862C3.55989 6.10617 4.13846 5.43196 4.78519 4.78522C5.43193 4.13849 6.10612 3.55993 6.78616 3.05866C6.37411 2.8415 5.97255 2.66198 5.58792 2.52351ZM13.3955 2.60456C12.9173 2.12637 11.9146 1.98263 10.4121 2.52351C10.0272 2.66207 9.62525 2.84131 9.21292 3.05866C9.89316 3.56002 10.568 4.13833 11.2149 4.78522C11.8614 5.43178 12.4393 6.10633 12.9405 6.7862C13.1577 6.37399 13.3381 5.97273 13.4766 5.58796C14.0174 4.08555 13.8737 3.08287 13.3955 2.60456Z" fill="currentColor"></path></svg></div><span class="_5255ff8 _4d41763">Thought for 155 seconds</span><div class="ds-icon" style="font-size: 14px; width: 14px; height: 14px;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.8487 5.5L11.4239 5.92383L8.6973 8.65137C8.4416 8.90706 8.21565 9.13382 8.01175 9.29785C7.79915 9.46883 7.55598 9.61756 7.25003 9.66602C7.08438 9.69222 6.91568 9.69222 6.75003 9.66602C6.44408 9.61756 6.20091 9.46883 5.98831 9.29785C5.78442 9.13382 5.55846 8.90706 5.30276 8.65137L2.5762 5.92383L2.1514 5.5L3.00003 4.65137L3.42386 5.07617L6.1514 7.80273C6.42598 8.07732 6.59879 8.24849 6.74026 8.3623C6.87294 8.46904 6.92275 8.47813 6.93753 8.48047C6.97898 8.48703 7.02108 8.48703 7.06253 8.48047C7.07731 8.47813 7.12712 8.46904 7.2598 8.3623C7.40127 8.24849 7.57408 8.07732 7.84866 7.80273L10.5762 5.07617L11 4.65137L11.8487 5.5Z" fill="currentColor"></path></svg></div></div><div class="c99b79f8" style="opacity: 0;"></div></div><div class="c2b72bb8"></div><div class="e1675d8b ds-think-content _767406f"><div class="ddd26891 _9b52f6c" style="width: 16px; height: 16px;"><div class="a510c7ce _0652043"></div></div><div class="_9ecc93a"></div><div class="ds-markdown" style="--ds-md-zoom: 1.143;"><p class="ds-markdown-paragraph"><span>Мы хотим реализовать запись в файл из одного потока и чтение из того же файла в другом потоке, причем чтение должно начинаться с последнего элемента (т.е. с конца файла). Однако, важно понимать, что если мы пишем и читаем одновременно, то нам нужно обеспечить синхронизацию, чтобы чтение не мешало записи и наоборот.</span></p><p class="ds-markdown-paragraph"><span>Один из способов - использовать механизм блокировок файла или использовать отдельные файлы для записи и чтения, но в условии сказано, что файл один. Также можно использовать отображение файла в память (memory mapping), но в данном случае мы будем использовать обычные файловые операции с обеспечением синхронизации.</span></p><p class="ds-markdown-paragraph"><span>Однако, если мы хотим, чтобы reader начинал чтение с последнего элемента, то, возможно, мы имеем в виду, что данные записываются последовательно, а reader должен читать с конца (например, как в лог-файле, где нас интересуют последние записи).</span></p><p class="ds-markdown-paragraph"><span>Вариант: записываем данные в файл, а reader всегда читает с конца, но тогда он может прочитать неполные данные, если запись происходит в момент чтения.</span></p><p class="ds-markdown-paragraph"><span>Другой вариант: использовать два файла (или два сегмента одного файла) и менять их местами, когда writer завершил запись. Но это сложнее.</span></p><p class="ds-markdown-paragraph"><span>Простой подход: использовать один файл, но записывать данные блоками, и reader будет читать последний записанный блок. Для этого можно использовать следующий алгоритм:</span></p><ol start="1"><li><p class="ds-markdown-paragraph"><span>Writer пишет данные в файл, при этом каждая запись имеет фиксированный размер (или мы храним размер каждой записи) и записывается в конец файла.</span></p></li><li><p class="ds-markdown-paragraph"><span>Reader открывает файл, перемещается в конец и пытается прочитать последнюю запись.</span></p></li></ol><p class="ds-markdown-paragraph"><span>Проблема: если writer в момент чтения пишет, то reader может прочитать неполные данные.</span></p><p class="ds-markdown-paragraph"><span>Решение: использовать блокировку файла или использовать временный файл-флаг, чтобы сигнализировать о завершении записи.</span></p><p class="ds-markdown-paragraph"><span>Более надежный способ: writer пишет данные во временный файл, а затем переименовывает его в основной. Тогда reader всегда читает из основного файла, который перезаписывается только тогда, когда запись завершена.</span></p><p class="ds-markdown-paragraph"><span>Но по условию у нас один файл. Поэтому рассмотрим вариант с блокировкой.</span></p><p class="ds-markdown-paragraph"><span>Шаги:</span></p><ol start="1"><li><p class="ds-markdown-paragraph"><span>Writer открывает файл для записи в конце (режим append) или для чтения и записи.</span></p></li><li><p class="ds-markdown-paragraph"><span>Writer должен заблокировать файл на время записи (эксклюзивная блокировка).</span></p></li><li><p class="ds-markdown-paragraph"><span>Reader открывает файл для чтения и пытается установить разделяемую блокировку (shared lock). Если writer пишет (установил эксклюзивную блокировку), то reader будет ждать, пока блокировка не снимется.</span></p></li><li><p class="ds-markdown-paragraph"><span>Reader перемещается в конец файла и читает последнюю запись.</span></p></li></ol><p class="ds-markdown-paragraph"><span>Однако, если файл большой, и мы не хотим читать весь файл, а только последнюю запись, то нам нужно знать, где начинается последняя запись.</span></p><p class="ds-markdown-paragraph"><span>Предположим, что мы записываем данные в бинарном формате и каждая запись имеет фиксированный размер. Тогда мы можем легко вычислить смещение последней записи.</span></p><p class="ds-markdown-paragraph"><span>Если записи переменной длины, то мы можем хранить размер каждой записи в начале записи (например, 4 байта на размер) и тогда reader может прочитать последнюю запись, проходя от конца файла назад, пока не найдет начало последней записи.</span></p><p class="ds-markdown-paragraph"><span>Но для простоты предположим, что записи фиксированного размера.</span></p><p class="ds-markdown-paragraph"><span>Пример с записями фиксированного размера:</span></p><ul><li><p class="ds-markdown-paragraph"><span>Writer открывает файл в режиме "ab" (добавление в бинарном режиме) и пишет данные блоками фиксированного размера.</span></p></li><li><p class="ds-markdown-paragraph"><span>Reader открывает файл в режиме "rb" и использует блокировку.</span></p></li></ul><p class="ds-markdown-paragraph"><span>Однако, в Windows и Linux блокировки файлов работают по-разному. Мы будем использовать QFile и его методы блокировки.</span></p><p class="ds-markdown-paragraph"><span>Примерный код:</span></p><p class="ds-markdown-paragraph"><span>Writer:</span><br><span>QFile file("data.bin");</span><br><span>if (!file.open(QIODevice::WriteOnly | QIODevice::Append)) {</span><br><span>// обработка ошибки</span><br><span>}</span></p><p class="ds-markdown-paragraph"><span>// Заблокировать файл для записи (эксклюзивная блокировка)</span><br><span>if (!file.lock(QFile::WriteLock)) {</span><br><span>// не удалось заблокировать</span><br><span>}</span></p><p class="ds-markdown-paragraph"><span>// записываем данные</span><br><span>QDataStream out(&amp;file);</span><br><span>out &lt;&lt; data;</span></p><p class="ds-markdown-paragraph"><span>// Разблокируем и закрываем файл</span><br><span>file.unlock();</span><br><span>file.close();</span></p><p class="ds-markdown-paragraph"><span>Reader:</span><br><span>QFile file("data.bin");</span><br><span>if (!file.open(QIODevice::ReadOnly)) {</span><br><span>// обработка ошибки</span><br><span>}</span></p><p class="ds-markdown-paragraph"><span>// Попытаться установить разделяемую блокировку (read lock)</span><br><span>if (!file.lock(QFile::ReadLock)) {</span><br><span>// не удалось заблокировать</span><br><span>}</span></p><p class="ds-markdown-paragraph"><span>// Перемещаемся к последней записи</span><br><span>qint64 recordSize = ...; // размер одной записи в байтах</span><br><span>qint64 fileSize = file.size();</span><br><span>if (fileSize &lt; recordSize) {</span><br><span>// файл пуст или запись неполная</span><br><span>} else {</span><br><span>file.seek(fileSize - recordSize);</span><br><span>QDataStream in(&amp;file);</span><br><span>in &gt;&gt; data;</span><br><span>}</span></p><p class="ds-markdown-paragraph"><span>file.unlock();</span><br><span>file.close();</span></p><p class="ds-markdown-paragraph"><span>Проблема: если записи переменного размера, то мы не можем использовать фиксированный recordSize.</span></p><p class="ds-markdown-paragraph"><span>Вариант для записей переменного размера:</span></p><p class="ds-markdown-paragraph"><span>Мы можем хранить размер записи в начале каждой записи. Тогда reader может сделать так:</span></p><p class="ds-markdown-paragraph"><span>file.seek(file.size() - sizeof(quint32)); // предполагаем, что размер хранится как quint32</span><br><span>quint32 lastRecordSize;</span><br><span>QDataStream in(&amp;file);</span><br><span>in &gt;&gt; lastRecordSize;</span></p><p class="ds-markdown-paragraph"><span>// Проверяем, что lastRecordSize не больше оставшегося размера файла и т.д.</span><br><span>file.seek(file.size() - lastRecordSize - sizeof(quint32));</span><br><span>// и затем читаем данные размера lastRecordSize.</span></p><p class="ds-markdown-paragraph"><span>Но это ненадежно, потому что мы предполагаем, что последние 4 байта - это размер последней записи. А если запись прервалась? Тогда размер может быть некорректным.</span></p><p class="ds-markdown-paragraph"><span>Поэтому лучше использовать другой подход: writer пишет данные в формате: [размер][данные], и в конце файла мы можем искать назад, пока не найдем корректный размер записи.</span></p><p class="ds-markdown-paragraph"><span>Однако, для простоты предположим, что мы пишем в бинарный файл и каждая запись начинается с размера (quint32). Тогда reader может:</span></p><ol start="1"><li><p class="ds-markdown-paragraph"><span>Перейти в конец файла.</span></p></li><li><p class="ds-markdown-paragraph"><span>Отступить назад на sizeof(quint32) и прочитать размер.</span></p></li><li><p class="ds-markdown-paragraph"><span>Если прочитанное значение не превышает оставшийся размер файла (т.е. оно должно быть равно (file.pos() - sizeof(quint32)) + sizeof(quint32) + lastRecordSize == file.size()), то запись корректна.</span></p></li></ol><p class="ds-markdown-paragraph"><span>Но что, если файл поврежден? Тогда мы можем попытаться найти предыдущую запись, отступив еще на sizeof(quint32) и т.д.</span></p><p class="ds-markdown-paragraph"><span>Однако, в многопоточном случае, если writer в момент чтения пишет, то reader может прочитать неполный размер записи. Поэтому блокировка обязательна.</span></p><p class="ds-markdown-paragraph"><span>Другой подход: использовать QFile::map для отображения файла в память и использовать кольцевой буфер или заголовок файла с указателями на начало и конец данных.</span></p><p class="ds-markdown-paragraph"><span>Но в рамках простоты и учитывая, что мы используем Qt, я предложу вариант с блокировкой и записью переменного размера с заголовком (размером) для каждой записи.</span></p><p class="ds-markdown-paragraph"><span>Пример для writer с записью переменного размера:</span></p><p class="ds-markdown-paragraph"><span>QFile file("data.bin");</span><br><span>if (!file.open(QIODevice::WriteOnly | QIODevice::Append)) {</span><br><span>return;</span><br><span>}</span><br><span>if (!file.lock(QFile::WriteLock)) {</span><br><span>return;</span><br><span>}</span></p><p class="ds-markdown-paragraph"><span>QDataStream out(&amp;file);</span><br><span>out.setVersion(QDataStream::Qt_6_0);</span></p><p class="ds-markdown-paragraph"><span>// Подготовка данных</span><br><span>QByteArray data = ...;</span></p><p class="ds-markdown-paragraph"><span>// Записываем размер данных (quint32) и затем данные</span><br><span>out &lt;&lt; quint32(data.size());</span><br><span>out.writeRawData(data.constData(), data.size());</span></p><p class="ds-markdown-paragraph"><span>file.unlock();</span><br><span>file.close();</span></p><p class="ds-markdown-paragraph"><span>Пример для reader:</span></p><p class="ds-markdown-paragraph"><span>QFile file("data.bin");</span><br><span>if (!file.open(QIODevice::ReadOnly)) {</span><br><span>return;</span><br><span>}</span><br><span>if (!file.lock(QFile::ReadLock)) {</span><br><span>return;</span><br><span>}</span></p><p class="ds-markdown-paragraph"><span>QDataStream in(&amp;file);</span><br><span>in.setVersion(QDataStream::Qt_6_0);</span></p><p class="ds-markdown-paragraph"><span>// Перемещаемся в конец файла</span><br><span>file.seek(file.size());</span></p><p class="ds-markdown-paragraph"><span>// Мы будем искать назад, пока не найдем корректный размер записи</span><br><span>quint32 lastRecordSize = 0;</span><br><span>qint64 pos = file.pos(); // текущая позиция (конец файла)</span></p><p class="ds-markdown-paragraph"><span>while (pos &gt; 0) {</span><br><span>// Отступаем назад на sizeof(quint32)</span><br><span>pos -= sizeof(quint32);</span><br><span>if (pos &lt; 0) {</span><br><span>break;</span><br><span>}</span><br><span>file.seek(pos);</span><br><span>in &gt;&gt; lastRecordSize;</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">text</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre>   // Проверяем, что lastRecordSize разумна и что от pos + sizeof(quint32) до конца файла ровно lastRecordSize байт
   if (pos + sizeof(quint32) + lastRecordSize == file.size()) {
       // Нашли корректную запись
       file.seek(pos + sizeof(quint32));
       QByteArray data(lastRecordSize, Qt::Uninitialized);
       in.readRawData(data.data(), lastRecordSize);
       // Обрабатываем data
       break;
   } else {
       // Продолжаем искать предыдущую запись
       pos -= lastRecordSize; // мы отступаем еще на lastRecordSize, но это неверно, потому что мы уже отступили на sizeof(quint32) и прочитали размер, который может быть некорректен.
       // Вместо этого, мы должны отступать по одному байту? Это неэффективно.
       // Лучше отступать на 1 байт назад от текущей позиции, но тогда мы можем попасть на середину предыдущей записи.
       // Альтернатива: хранить в начале файла общее количество записей или использовать фиксированный размер для размера записи (всегда 4 байта) и искать назад, пока не найдем совпадение.
       // Но в общем случае, если файл не поврежден, то последняя запись должна быть корректной, если writer завершил запись. А если нет, то мы можем не найти корректную запись.

       // В данном примере мы предполагаем, что writer всегда записывает полностью и файл не поврежден, поэтому мы можем просто выйти, если не нашли запись в конце.
       // Или мы можем искать до тех пор, пока не найдем любую запись, но это уже выходит за рамки.

       // Упростим: если последняя запись неполная, то мы не будем ее читать, а возьмем предыдущую.
       // Для этого мы отступаем еще на 1 байт и повторяем? Это неэффективно.

       // Вместо этого, мы можем использовать другой подход: читать с начала и игнорировать неполные записи, но нам нужно с конца.

       // Прервемся, чтобы не усложнять пример.
       break;
   }</pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>}</span></p><p class="ds-markdown-paragraph"><span>file.unlock();</span><br><span>file.close();</span></p><p class="ds-markdown-paragraph"><span>Этот метод для reader не очень эффективен, если файл большой, и мы хотим только последнюю запись, но он работает.</span></p><p class="ds-markdown-paragraph"><span>Однако, в реальном приложении, возможно, стоит использовать другой механизм, например, отдельный файл индекса или запись в два файла (текущий и архив).</span></p><p class="ds-markdown-paragraph"><span>Вывод: для простоты и если запись происходит не слишком часто, можно использовать блокировку и чтение с конца с проверкой целостности последней записи.</span></p><p class="ds-markdown-paragraph"><span>Если производительность важна, то可以考虑使用 memory-mapped файлы и кольцевой буфер.</span></p><p class="ds-markdown-paragraph"><span>Но в рамках задачи, учитывая, что мы используем Qt, и если файл не огромный, то предложенный вариант с блокировкой и чтением с конца (с проверкой размера) приемлем.</span></p><p class="ds-markdown-paragraph"><span>Примечание: в Qt6.9, QFile::lock() работает на всех платформах, но要注意，что в Windows блокировки обязательны, а в Linux они advisory (т.е. работают только если все процессы используют блокировки).</span></p><p class="ds-markdown-paragraph"><span>Если приложение многопроцессное, а не многопоточное, то блокировки все равно должны работать.</span></p><p class="ds-markdown-paragraph"><span>Если же мы пишем и читаем из одного и того же приложения, но в разных потоках, то блокировки будут работать.</span></p><p class="ds-markdown-paragraph"><span>Важно: при использовании QDataStream и rawData, мы должны быть уверены, что на разных платформах размер quint32 одинаков.</span></p><p class="ds-markdown-paragraph"><span>Также, если мы пишем и читаем в одном приложении, то можно использовать QDataStream без rawData, а использовать операторы &lt;&lt; и &gt;&gt; для QByteArray, но тогда QDataStream добавляет свой заголовок (еще 4 байта для размера). Поэтому для сырых данных мы используем writeRawData и readRawData.</span></p><p class="ds-markdown-paragraph"><span>Но если мы используем QDataStream для записи QByteArray с помощью оператора &lt;&lt;, то он записывает размер как quint32 и затем данные. Тогда при чтении мы можем использовать operator&gt;&gt; для QByteArray, и он прочитает размер и данные. Тогда наш reader может быть проще:</span></p><p class="ds-markdown-paragraph"><span>Writer:</span><br><span>out &lt;&lt; data; // data - QByteArray</span></p><p class="ds-markdown-paragraph"><span>Reader:</span><br><span>in &gt;&gt; data; // data - QByteArray</span></p><p class="ds-markdown-paragraph"><span>Но тогда мы должны быть уверены, что в конце файла находится целый QByteArray, записанный таким образом.</span></p><p class="ds-markdown-paragraph"><span>Однако, при использовании QDataStream для записи QByteArray, он записывает размер и данные, и при чтении он прочитает размер и затем данные. Поэтому мы можем использовать тот же метод: искать в конце файла корректный размер.</span></p><p class="ds-markdown-paragraph"><span>Но в этом случае, мы можем не использовать rawData, а просто читать QByteArray.</span></p><p class="ds-markdown-paragraph"><span>Пример для writer (с QByteArray и оператором &lt;&lt;):</span></p><p class="ds-markdown-paragraph"><span>QFile file("data.bin");</span><br><span>... // открытие и блокировка</span><br><span>QDataStream out(&amp;file);</span><br><span>out.setVersion(QDataStream::Qt_6_0);</span><br><span>out &lt;&lt; data;</span></p><p class="ds-markdown-paragraph"><span>// file.unlock() и close()</span></p><p class="ds-markdown-paragraph"><span>Reader:</span></p><p class="ds-markdown-paragraph"><span>QFile file("data.bin");</span><br><span>... // открытие и блокировка</span><br><span>QDataStream in(&amp;file);</span><br><span>in.setVersion(QDataStream::Qt_6_0);</span></p><p class="ds-markdown-paragraph"><span>// Перемещаемся в конец файла</span><br><span>file.seek(file.size());</span></p><p class="ds-markdown-paragraph"><span>// Теперь ищем назад, чтобы найти начало последней записи</span><br><span>// Запись QByteArray в QDataStream: [размер (quint32)][данные]</span><br><span>// Поэтому мы можем отступить на sizeof(quint32) и прочитать размер, а затем проверить.</span></p><p class="ds-markdown-paragraph"><span>qint64 fileSize = file.size();</span><br><span>quint32 lastRecordSize;</span><br><span>qint64 pos = fileSize - sizeof(quint32);</span><br><span>file.seek(pos);</span><br><span>in &gt;&gt; lastRecordSize;</span></p><p class="ds-markdown-paragraph"><span>if (pos + lastRecordSize == fileSize) {</span><br><span>// Это некорректно, потому что мы прочитали размер, а данные должны быть после размера, т.е. запись занимает sizeof(quint32) + lastRecordSize.</span><br><span>// Поэтому условие должно быть: pos + sizeof(quint32) + lastRecordSize == fileSize</span><br><span>// Но pos = fileSize - sizeof(quint32), поэтому: (fileSize - sizeof(quint32)) + sizeof(quint32) + lastRecordSize = fileSize + lastRecordSize, что не равно fileSize.</span><br><span>// Мы запутались.</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">text</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre>   Давайте пересчитаем:
     Запись: [размер][данные] -&gt; занимает sizeof(quint32) + lastRecordSize.
     Поэтому конец файла должен быть: начало_записи + sizeof(quint32) + lastRecordSize.
     Мы хотим прочитать последнюю запись, поэтому начало_записи = fileSize - (sizeof(quint32) + lastRecordSize).

   Как мы находим lastRecordSize? Мы читаем quint32 из позиции (fileSize - sizeof(quint32))? Но тогда мы читаем последние 4 байта как размер, и если это размер последней записи, то начало записи должно быть на fileSize - sizeof(quint32) - lastRecordSize? Но тогда условие корректности: fileSize - sizeof(quint32) - lastRecordSize + sizeof(quint32) + lastRecordSize = fileSize, что верно.

   Однако, в этом случае, мы читаем lastRecordSize из позиции (fileSize - sizeof(quint32)), и если lastRecordSize равно n, то данные должны находиться в диапазоне [fileSize - sizeof(quint32) - n, fileSize - sizeof(quint32))? Но это не так, потому что данные идут после размера.

   Правильная структура файла:
     [размер1][данные1][размер2][данные2]...
     Последняя запись: [размерN][данныеN]
     Размер данныхN = lastRecordSize, поэтому общий размер последней записи: sizeof(quint32) + lastRecordSize.

   Поэтому конец файла = начало_последней_записи + sizeof(quint32) + lastRecordSize.

   Мы хотим найти начало последней записи. Оно равно: fileSize - (sizeof(quint32) + lastRecordSize).

   Тогда мы можем прочитать lastRecordSize из позиции: fileSize - sizeof(quint32) - lastRecordSize? Но мы не знаем lastRecordSize до того, как прочитаем.

   Поэтому мы не можем напрямую прочитать lastRecordSize из конца, потому что мы не знаем, где находится начало размера.

   Альтернатива: хранить в начале файла смещения записей или использовать фиксированный размер записи.

   Или мы можем читать файл с начала, пока не дойдем до конца, и запомнить последнюю запись. Но это не эффективно для большого файла.

   Другой вариант: writer дописывает в конец файла также общее количество записей и смещения, но это усложняет.

   Для простоты, давайте предположим, что мы пишем в файл только одну запись за раз, и reader читает последнюю запись, но тогда мы можем перезаписывать файл каждый раз? Но по условию мы пишем в один файл из одного потока, а читаем в другом.

   Если мы хотим, чтобы reader читал всегда последнюю запись, то мы можем не дописывать, а перезаписывать файл? Но тогда мы потеряем предыдущие данные.

   Или мы можем использовать другой подход: writer пишет в файл, а reader читает весь файл и берет последнюю запись. Но это просто, если файл не большой.

   Если файл большой, то мы не хотим читать весь файл.

   Поэтому, если мы хотим читать только последнюю запись, то мы можем хранить в отдельном файле индекс последней записи или использовать специальный формат, где в начале файла хранится смещение последней записи.

   Но в рамках задачи, я предлагаю использовать следующий подход:

   - Writer пишет каждую запись в формате: [размер (quint32)][данные] и в конец файла.
   - Reader открывает файл, блокирует для чтения, и читает записи с начала, пока не достигнет конца, и запоминает последнюю запись. Это просто и надежно, если файл не слишком большой.

   Если файл большой, то мы можем кешировать позицию последней записи и в следующий раз начинать с нее, но это сложнее.

   Или мы можем использовать memory-mapped файлы и искать с конца, как я описал ранее, но это ненадежно без дополнительных проверок.

   Выбор зависит от требований к производительности и размеру файла.

   Поскольку в условии не указан размер файла, я предложу простое решение: читать весь файл с начала и брать последнюю запись.

   Пример для reader (чтение всего файла):

     QFile file("data.bin");
     ... // открытие и блокировка
     QDataStream in(&amp;file);
     in.setVersion(QDataStream::Qt_6_0);

     QByteArray data;
     QByteArray lastData;

     while (!in.atEnd()) {
         in &gt;&gt; data;
         if (!in.status() != QDataStream::Ok) {
             // Ошибка чтения, возможно, неполная запись
             break;
         }
         lastData = data;
     }

     // lastData содержит последнюю успешно прочитанную запись

   Это решение простое и надежное, но если файл очень большой, то оно может быть медленным.

   Если производительность важна, то можно запоминать позицию последней записи и хранить ее в отдельном файле, или использовать базу данных.

   В рамках задачи, я думаю, что это приемлемо.

   Итог: в зависимости от требований, можно выбрать один из описанных методов.

   Если вы хотите, чтобы я реализовал какой-то конкретный метод, уточните, пожалуйста.</pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div></div></div><div class="_8f7678d"></div></div><div class="ds-markdown" style="--ds-md-zoom: 1.143;"><p class="ds-markdown-paragraph"><span>Для реализации записи в файл из одного потока и чтения с последнего элемента в другом потоке в Qt 6.9 на C++ можно использовать следующие подходы:</span></p><h3><span>1. Использование QFile и QDataStream с разделяемым доступом</span></h3><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFile&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDataStream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QThread&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">FileWriter</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>WriteOnly <span class="token operator">|</span> QIODevice<span class="token double-colon punctuation">::</span>Append<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Cannot open file for writing"</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        QDataStream <span class="token function">out</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            QString data <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Message %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            out <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
            file<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Written:"</span> <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">FileReader</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">isInterruptionRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
            in<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Перемещаемся к последней записи</span>
            QString lastData<span class="token punctuation">;</span>
            QString currentData<span class="token punctuation">;</span>
            
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                in <span class="token operator">&gt;&gt;</span> currentData<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>currentData<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    lastData <span class="token operator">=</span> currentData<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lastData<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Last element:"</span> <span class="token operator">&lt;&lt;</span> lastData<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Использование</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    FileWriter writer<span class="token punctuation">;</span>
    FileReader reader<span class="token punctuation">;</span>

    writer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    writer<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function">requestInterruption</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>2. Использование QSaveFile для атомарной записи</span></h3><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QSaveFile&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDataStream&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">SafeFileWriter</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            QSaveFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Cannot open file for writing"</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            QDataStream <span class="token function">out</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
            out<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            QString data <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Message %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            out <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
            
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Write failed"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Written:"</span> <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>3. Использование позиционирования для прямого доступа к последней записи</span></h3><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">class</span> <span class="token class-name">EfficientFileReader</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">isInterruptionRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
            in<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Пропускаем все записи кроме последней</span>
            QString lastData<span class="token punctuation">;</span>
            QString currentData<span class="token punctuation">;</span>
            
            qint64 lastValidPos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                lastValidPos <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                in <span class="token operator">&gt;&gt;</span> currentData<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Читаем последнюю запись</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>lastValidPos <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>lastValidPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
                in <span class="token operator">&gt;&gt;</span> lastData<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lastData<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Last element:"</span> <span class="token operator">&lt;&lt;</span> lastData<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>4. Использование механизма сигналов для уведомления</span></h3><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">class</span> <span class="token class-name">NotifyingFileWriter</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
    Q_OBJECT
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>WriteOnly <span class="token operator">|</span> QIODevice<span class="token double-colon punctuation">::</span>Append<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        QDataStream <span class="token function">out</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            QString data <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Message %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            out <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
            file<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            emit <span class="token function">newDataWritten</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

signals<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">newDataWritten</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString<span class="token operator">&amp;</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>Ключевые моменты:</span></h3><ol start="1"><li><p class="ds-markdown-paragraph"><strong><span>Синхронизация</span></strong><span>: Используйте </span><code>QIODevice::Append</code><span> для безопасной записи</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Буферизация</span></strong><span>: Вызывайте </span><code>flush()</code><span> для немедленной записи на диск</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Обработка ошибок</span></strong><span>: Всегда проверяйте результат операций с файлом</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Производительность</span></strong><span>: Используйте позиционирование для эффективного чтения последней записи</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Безопасность</span></strong><span>: </span><code>QSaveFile</code><span> обеспечивает атомарность операций записи</span></p></li></ol><p class="ds-markdown-paragraph"><span>Выберите подход в зависимости от ваших требований к производительности и безопасности данных.</span></p></div></div><div class="ds-theme" style="--ds-rgb-hover: 245 245 245; --ds-rgb-primary: 77 107 254; --ds-button-hover-color: #2563EB; --ds-bordered-secondary-button-color: var(--dsr-text-1); --ds-input-prefix-color: var(--dsr-text-1);"></div><div class="ds-flex _0a3d93b" style="align-items: center; gap: 10px;"><div class="ds-flex _965abe9" style="align-items: center; gap: 10px;"><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.92142 0.349213C10.3745 0.349295 12.5564 1.50526 13.9558 3.299L15.1282 2.12765C15.3304 1.92552 15.6768 2.06949 15.6768 2.35544V5.53929C15.6766 5.71632 15.533 5.85982 15.356 5.86008H12.1711C11.8855 5.85976 11.7427 5.51471 11.9443 5.31255L12.9642 4.29062C11.8238 2.74311 9.98914 1.74112 7.92142 1.74104C4.46442 1.74104 1.66239 4.54307 1.66239 8.00006C1.66239 11.4571 4.46442 14.2591 7.92142 14.2591C11.3783 14.2589 14.1804 11.457 14.1804 8.00006H15.5723C15.5723 12.2252 12.1465 15.6508 7.92142 15.6509C3.6962 15.6509 0.270569 12.2253 0.270569 8.00006C0.270569 3.77485 3.6962 0.349213 7.92142 0.349213Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.27861 0.811633C8.81985 0.142255 9.79016 0.0422445 10.4537 0.557662L10.5823 0.669367L10.6065 0.693605L10.6097 0.695713L10.6392 0.72522C11.3549 1.44685 11.6336 2.49474 11.3716 3.47675L11.3705 3.48097L11.361 3.5168L11.36 3.51891L10.8889 5.2261C10.8796 5.26003 10.8706 5.29164 10.8626 5.32094C10.8934 5.32101 10.927 5.322 10.9627 5.322H11.9006C12.4263 5.322 12.783 5.31906 13.0651 5.36731C14.8182 5.66725 15.9851 7.34574 15.6564 9.09363C15.6035 9.37493 15.4769 9.70926 15.2939 10.2023L14.337 12.7799C14.1401 13.3105 13.9773 13.7518 13.8101 14.1025C13.6375 14.4646 13.4385 14.7794 13.1441 15.0425C12.9712 15.197 12.7801 15.3303 12.5751 15.4387C12.2259 15.6232 11.8608 15.7 11.4612 15.7359C11.0742 15.7705 10.6034 15.7696 10.0374 15.7696H4.87371C4.08047 15.7696 3.42922 15.7703 2.90728 15.7138C2.37206 15.6558 1.88985 15.5311 1.4667 15.2237C1.22409 15.0475 1.01072 14.834 0.834405 14.5914C0.52696 14.1683 0.401312 13.6861 0.343323 13.1509C0.286761 12.6288 0.28747 11.977 0.28747 11.1834V9.51411C0.28747 8.84785 0.281286 8.36721 0.399176 7.95656C0.671091 7.00941 1.41109 6.26838 2.35823 5.99645C2.76888 5.87855 3.24952 5.88579 3.91579 5.88579C4.11977 5.88579 4.14542 5.88325 4.16238 5.88053C4.23526 5.8687 4.30403 5.83669 4.35839 5.78674C4.37104 5.77511 4.38755 5.7561 4.51436 5.59494L8.25648 0.839033L8.25754 0.837979L8.27861 0.811633ZM1.69116 11.1834C1.69116 12.0083 1.69211 12.5712 1.73859 13.0002C1.78365 13.4158 1.86467 13.6222 1.96937 13.7663C2.05914 13.8898 2.16727 13.999 2.29079 14.0888C2.43495 14.1935 2.6421 14.2745 3.05797 14.3195C3.45891 14.363 3.97631 14.3656 4.71564 14.3659C4.30795 13.8053 4.06447 13.1172 4.06437 12.371V8.59412H5.46807V12.371C5.46832 13.4734 6.3616 14.367 7.46401 14.367H10.0374C10.6286 14.367 11.0269 14.3663 11.3368 14.3385C11.6339 14.3118 11.7956 14.2639 11.9196 14.1984C12.024 14.1431 12.1213 14.0747 12.2094 13.996C12.3139 13.9025 12.4151 13.7679 12.5434 13.4986C12.6774 13.2177 12.8162 12.8451 13.0219 12.2909L13.9787 9.71328C14.1848 9.15822 14.253 8.96737 14.278 8.83439C14.4617 7.85698 13.8092 6.91901 12.829 6.75098C12.6956 6.72816 12.4928 6.72464 11.9006 6.72464H10.9627C10.7737 6.72464 10.5693 6.72663 10.4 6.70672C10.2211 6.68568 9.96696 6.6303 9.74764 6.43167C9.64448 6.33817 9.5595 6.22616 9.49683 6.10183C9.36384 5.8379 9.37793 5.57905 9.40515 5.40104C9.43094 5.23267 9.48666 5.03623 9.53688 4.8541L10.0079 3.14585L10.0174 3.11108C10.1488 2.61344 10.0077 2.08344 9.64648 1.71687L9.60854 1.67893L9.55058 1.6431C9.48789 1.62049 9.41419 1.6382 9.36932 1.69368L9.35773 1.70633L9.35878 1.70738L5.61666 6.46224C5.51816 6.58741 5.42231 6.71336 5.30683 6.81948C5.05069 7.05477 4.73119 7.20945 4.3879 7.26525C4.23309 7.29038 4.07507 7.28843 3.91579 7.28843C3.1535 7.28843 2.9191 7.29576 2.74604 7.34534C2.26358 7.48385 1.88558 7.86087 1.74702 8.34331C1.69732 8.51642 1.69116 8.75116 1.69116 9.51411V11.1834Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.72451 15.1086C7.18929 15.7706 6.22975 15.8695 5.57357 15.3598L5.44643 15.2493L5.42247 15.2253L5.41934 15.2233L5.39016 15.1941C4.68239 14.4805 4.40679 13.4442 4.66589 12.4731L4.66693 12.4689L4.67631 12.4335L4.67735 12.4314L5.14318 10.7432C5.15243 10.7096 5.1613 10.6784 5.16923 10.6494C5.13878 10.6493 5.10558 10.6484 5.07023 10.6484H4.14274C3.62288 10.6484 3.27015 10.6513 2.9912 10.6035C1.25757 10.3069 0.103662 8.64709 0.42863 6.91861C0.480965 6.64044 0.606164 6.30981 0.787119 5.8223L1.73336 3.27328C1.92812 2.74859 2.08912 2.31215 2.25442 1.96542C2.42515 1.60731 2.62191 1.296 2.91304 1.03584C3.08408 0.883016 3.273 0.751185 3.47579 0.644009C3.82102 0.461569 4.18214 0.385575 4.57731 0.350131C4.95993 0.315849 5.42553 0.316783 5.98521 0.316783H11.0916C11.876 0.316783 12.52 0.316134 13.0362 0.372015C13.5655 0.429358 14.0423 0.552599 14.4608 0.856601C14.7007 1.03091 14.9117 1.24199 15.086 1.48187C15.3901 1.90033 15.5143 2.37716 15.5717 2.90645C15.6276 3.42275 15.6269 4.06727 15.6269 4.85209V6.5028C15.6269 7.16167 15.633 7.63697 15.5164 8.04306C15.2475 8.97969 14.5158 9.71248 13.5791 9.9814C13.173 10.098 12.6977 10.0908 12.0389 10.0908C11.8372 10.0908 11.8118 10.0933 11.795 10.096C11.723 10.1077 11.6549 10.1394 11.6012 10.1888C11.5887 10.2003 11.5724 10.2191 11.447 10.3784L7.74639 15.0815L7.74535 15.0826L7.72451 15.1086ZM14.2388 4.85209C14.2388 4.03635 14.2379 3.47971 14.1919 3.05547C14.1473 2.64449 14.0672 2.44037 13.9637 2.29785C13.8749 2.17569 13.768 2.06776 13.6458 1.97896C13.5033 1.87539 13.2984 1.7953 12.8872 1.75074C12.4907 1.70779 11.979 1.70518 11.2479 1.70489C11.6511 2.25924 11.8918 2.93974 11.8919 3.67762V7.41257H10.5038V3.67762C10.5036 2.58751 9.62023 1.70384 8.53007 1.70384H5.98521C5.40065 1.70384 5.00679 1.70449 4.70028 1.73198C4.40651 1.75836 4.24662 1.80577 4.12399 1.87058C4.02069 1.92518 3.92452 1.99283 3.8374 2.07067C3.73401 2.16312 3.634 2.29627 3.50705 2.56255C3.37462 2.84034 3.23734 3.2088 3.03393 3.75682L2.08768 6.30584C1.88395 6.85474 1.81646 7.04347 1.79172 7.17497C1.61005 8.14152 2.25533 9.06908 3.22464 9.23524C3.35654 9.25781 3.55717 9.26129 4.14274 9.26129H5.07023C5.25717 9.26129 5.4593 9.25932 5.62672 9.27901C5.80364 9.29982 6.05492 9.35458 6.27179 9.551C6.37381 9.64347 6.45784 9.75424 6.51982 9.87719C6.65133 10.1382 6.6374 10.3942 6.61048 10.5702C6.58498 10.7367 6.52988 10.931 6.48022 11.1111L6.01439 12.8003L6.00501 12.8347C5.87513 13.3268 6.01464 13.8509 6.37184 14.2134L6.40935 14.251L6.46667 14.2864C6.52866 14.3088 6.60155 14.2912 6.64591 14.2364L6.65738 14.2239L6.65633 14.2228L10.3569 9.52078C10.4543 9.397 10.5491 9.27245 10.6633 9.1675C10.9166 8.93483 11.2325 8.78186 11.572 8.72669C11.7251 8.70184 11.8814 8.70376 12.0389 8.70376C12.7927 8.70376 13.0245 8.69651 13.1956 8.64748C13.6727 8.51051 14.0465 8.13768 14.1836 7.6606C14.2327 7.48941 14.2388 7.25727 14.2388 6.5028V4.85209Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.7484 11.1004C15.6274 11.8866 15.5288 12.5365 15.3882 13.0496C15.243 13.579 15.0339 14.0407 14.6455 14.4162C14.5638 14.4952 14.4775 14.5699 14.387 14.6387C13.9568 14.9656 13.4683 15.1012 12.923 15.1642C12.3944 15.2252 11.7374 15.2245 10.9419 15.2245H5.05809C4.2626 15.2245 3.6056 15.2252 3.07703 15.1642C2.53171 15.1012 2.04317 14.9656 1.61296 14.6387C1.52248 14.5699 1.43618 14.4952 1.35447 14.4162C0.966081 14.0407 0.756961 13.579 0.611839 13.0496C0.471162 12.5365 0.372616 11.8866 0.251648 11.1004L1.6458 10.8864C1.77181 11.7054 1.85791 12.2602 1.97209 12.6767C2.08174 13.0767 2.1976 13.2701 2.3344 13.4024C2.37603 13.4426 2.42074 13.4807 2.46683 13.5158C2.6184 13.6308 2.8272 13.7161 3.23912 13.7636C3.66812 13.8131 4.22949 13.8145 5.05809 13.8145H10.9419C11.7705 13.8145 12.3319 13.8131 12.7609 13.7636C13.1728 13.7161 13.3816 13.6308 13.5332 13.5158C13.5793 13.4807 13.624 13.4426 13.6656 13.4024C13.8024 13.2701 13.9183 13.0767 14.0279 12.6767C14.1421 12.2602 14.2282 11.7054 14.3542 10.8864L15.7484 11.1004ZM7.71503 0.558394C7.90371 0.52798 8.09629 0.52798 8.28498 0.558394C8.63706 0.615181 8.91293 0.790123 9.14944 0.985327C9.37579 1.17216 9.62518 1.42894 9.90478 1.7163L13.387 5.29491L12.8817 5.78753L12.3763 6.27908L8.89412 2.70047C8.82608 2.63054 8.76286 2.56716 8.70555 2.50873V10.5336H7.29445V2.50873C7.23714 2.56716 7.17392 2.63054 7.10588 2.70047L3.62368 6.27908L3.11835 5.78753L2.61302 5.29491L6.09522 1.7163C6.37482 1.42894 6.62422 1.17216 6.85057 0.985327C7.08707 0.790123 7.36294 0.615181 7.71503 0.558394Z" fill="currentColor"></path></svg></div></div></div><div style="flex: 1 1 0%;"></div></div></div><div class="_9663006" data-um-id="3"><div class="d29f3d7d ds-message _63c77b1" style="--panel-width: 0px;"><div class="fbb737a4">давай пояса идею, в поток отвечающий за запись пришли данные, мы их обработали и отправили в массив, далее этот массив сохраняется в файл, в основном потоке по таймеру идет проверка файла на новые данные и если они есть мы их добавляем в массив основного потока</div></div><div class="_11d6b3a"><div class="_425ea0b"><div class="ds-flex _78e0558" style="align-items: flex-end; gap: 0px;"><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button d4910adc" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px; margin-left: 10px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.94073 1.34948C10.7047 0.902375 11.6503 0.90248 12.4143 1.34948C12.706 1.52022 12.9687 1.79124 13.3104 2.1329C13.652 2.47454 13.9231 2.73727 14.0938 3.029C14.5408 3.79301 14.5409 4.73862 14.0938 5.50257C13.9231 5.79422 13.652 6.0571 13.3104 6.39867L6.65929 13.0498C6.28065 13.4284 6.00692 13.7108 5.6654 13.9097C5.32388 14.1085 4.94312 14.2074 4.42702 14.3498L3.24391 14.6762C2.77524 14.8054 2.34535 14.9263 2.00128 14.9685C1.65193 15.0112 1.17961 15.0014 0.810733 14.6326C0.44189 14.2637 0.432076 13.7914 0.474829 13.442C0.517004 13.098 0.63787 12.668 0.767151 12.1994L1.09349 11.0163C1.23585 10.5002 1.33478 10.1194 1.53356 9.77791C1.73246 9.43639 2.01487 9.16266 2.39352 8.78402L9.04463 2.1329C9.38622 1.79132 9.64908 1.52023 9.94073 1.34948ZM15.5427 14.8399H7.5522L8.96704 13.425H15.5427V14.8399ZM3.39379 9.78429C2.96497 10.2131 2.84241 10.3437 2.75706 10.4901C2.6718 10.6366 2.61858 10.8079 2.4573 11.3926L2.13096 12.5757C2.0018 13.0439 1.92191 13.3419 1.8886 13.5536C2.10038 13.5204 2.39869 13.4417 2.86761 13.3123L4.05072 12.986C4.63541 12.8247 4.80666 12.7715 4.9532 12.6862C5.09965 12.6009 5.23019 12.4783 5.65902 12.0495L10.721 6.9865L8.45574 4.72128L3.39379 9.78429ZM11.7 2.57085C11.3774 2.38205 10.9777 2.38205 10.6551 2.57085C10.5602 2.62653 10.4487 2.72937 10.0449 3.13317L9.45601 3.72101L11.7212 5.98623L12.3101 5.3984C12.7139 4.99464 12.8168 4.88314 12.8725 4.78825C13.0612 4.46567 13.0612 4.06592 12.8725 3.74333C12.8168 3.64834 12.7145 3.53758 12.3101 3.13317C11.9057 2.72869 11.795 2.62647 11.7 2.57085Z" fill="currentColor"></path></svg></div></div></div></div></div></div><div class="_4f9bf79 _43c05b5" style="--assistant-last-margin-bottom: 32px;"><div class="ds-message _63c77b1" style="--panel-width: 0px;"><div class="_74c0879" style="--collapsible-area-title-height: 38px; --group-title-sticky-top: 0px;"><div class="_245c867"><div class="_5ab5d64"><div class="ds-icon _970ac5e dea47b2e" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.00198 6.6446C8.75032 6.6446 9.35738 7.25175 9.35745 8.00007C9.35745 8.74844 8.75036 9.35554 8.00198 9.35554C7.25373 9.35539 6.64749 8.74835 6.64749 8.00007C6.64756 7.25184 7.25377 6.64474 8.00198 6.6446Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.97171 1.29987C11.5854 0.718977 13.271 0.642258 14.3145 1.68561C15.3578 2.72908 15.2811 4.41472 14.7002 6.02839C14.4708 6.66567 14.1505 7.32943 13.75 8.00007C14.1505 8.67068 14.4708 9.3345 14.7002 9.97175C15.2811 11.5854 15.3579 13.2711 14.3145 14.3145C13.2711 15.3579 11.5854 15.2812 9.97171 14.7003C9.33446 14.4708 8.67065 14.1505 8.00003 13.7501C7.32939 14.1505 6.66564 14.4708 6.02835 14.7003C4.41467 15.2812 2.72905 15.3578 1.68558 14.3145C0.642216 13.2711 0.718931 11.5854 1.29984 9.97175C1.52921 9.3346 1.84871 8.67055 2.24905 8.00007C1.84872 7.32959 1.52921 6.66551 1.29984 6.02839C0.718913 4.41465 0.642131 2.72906 1.68558 1.68561C2.72903 0.642173 4.41462 0.718948 6.02835 1.29987C6.66547 1.52925 7.32956 1.84876 8.00003 2.24909C8.67051 1.84875 9.33457 1.52925 9.97171 1.29987ZM12.9405 9.21296C12.4392 9.89306 11.8617 10.5681 11.2149 11.2149C10.5681 11.8617 9.89302 12.4392 9.21292 12.9405C9.62538 13.1579 10.0271 13.338 10.4121 13.4766C11.9147 14.0175 12.9173 13.8738 13.3955 13.3956C13.8738 12.9173 14.0175 11.9147 13.4766 10.4122C13.338 10.0272 13.1579 9.62541 12.9405 9.21296ZM3.05862 9.21296C2.84127 9.62529 2.66203 10.0273 2.52347 10.4122C1.98258 11.9147 2.12633 12.9173 2.60452 13.3956C3.08284 13.8737 4.08551 14.0175 5.58792 13.4766C5.9727 13.3381 6.37395 13.1578 6.78616 12.9405C6.1063 12.4393 5.43174 11.8615 4.78519 11.2149C4.13829 10.568 3.55999 9.8932 3.05862 9.21296ZM7.99905 3.79206C7.23185 4.31425 6.45312 4.95519 5.70413 5.70417C4.95515 6.45315 4.31421 7.2319 3.79202 7.99909C4.31437 8.76672 4.95477 9.54659 5.70413 10.296C6.45315 11.045 7.23277 11.6849 8.00003 12.2071C8.76731 11.6849 9.54689 11.045 10.2959 10.296C11.045 9.54692 11.6848 8.76735 12.2071 8.00007C11.6848 7.23281 11.0449 6.45318 10.2959 5.70417C9.54656 4.95481 8.76668 4.3144 7.99905 3.79206ZM5.58792 2.52351C4.08539 1.98261 3.08278 2.12632 2.60452 2.60456C2.12627 3.08281 1.98258 4.08542 2.52347 5.58796C2.66195 5.97259 2.84146 6.37415 3.05862 6.7862C3.55989 6.10617 4.13846 5.43196 4.78519 4.78522C5.43193 4.13849 6.10612 3.55993 6.78616 3.05866C6.37411 2.8415 5.97255 2.66198 5.58792 2.52351ZM13.3955 2.60456C12.9173 2.12637 11.9146 1.98263 10.4121 2.52351C10.0272 2.66207 9.62525 2.84131 9.21292 3.05866C9.89316 3.56002 10.568 4.13833 11.2149 4.78522C11.8614 5.43178 12.4393 6.10633 12.9405 6.7862C13.1577 6.37399 13.3381 5.97273 13.4766 5.58796C14.0174 4.08555 13.8737 3.08287 13.3955 2.60456Z" fill="currentColor"></path></svg></div><span class="_5255ff8 _4d41763">Stopped</span><div class="ds-icon" style="font-size: 14px; width: 14px; height: 14px;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.8487 5.5L11.4239 5.92383L8.6973 8.65137C8.4416 8.90706 8.21565 9.13382 8.01175 9.29785C7.79915 9.46883 7.55598 9.61756 7.25003 9.66602C7.08438 9.69222 6.91568 9.69222 6.75003 9.66602C6.44408 9.61756 6.20091 9.46883 5.98831 9.29785C5.78442 9.13382 5.55846 8.90706 5.30276 8.65137L2.5762 5.92383L2.1514 5.5L3.00003 4.65137L3.42386 5.07617L6.1514 7.80273C6.42598 8.07732 6.59879 8.24849 6.74026 8.3623C6.87294 8.46904 6.92275 8.47813 6.93753 8.48047C6.97898 8.48703 7.02108 8.48703 7.06253 8.48047C7.07731 8.47813 7.12712 8.46904 7.2598 8.3623C7.40127 8.24849 7.57408 8.07732 7.84866 7.80273L10.5762 5.07617L11 4.65137L11.8487 5.5Z" fill="currentColor"></path></svg></div></div><div class="c99b79f8" style="opacity: 0;"></div></div><div class="c2b72bb8"></div><div class="e1675d8b ds-think-content _767406f"><div class="ddd26891 _9b52f6c" style="width: 16px; height: 16px;"><div class="a510c7ce _0652043"></div></div><div class="_9ecc93a"></div><div class="ds-markdown" style="--ds-md-zoom: 1.143;"><p class="ds-markdown-paragraph"><span>Мы будем использовать два потока: один для записи (worker thread) и основной поток для чтения.</span><br><span>В потоке записи мы будем получать данные, обрабатывать их, складывать в массив (буфер) и периодически сохранять этот массив в файл.</span><br><span>В основном потоке по таймеру мы будем проверять файл на наличие новых данных и добавлять их в массив основного потока.</span></p><p class="ds-markdown-paragraph"><span>Для синхронизации доступа к файлу будем использовать отдельный файл-буфер, а также можно использовать механизм сигналов и слотов для уведомления о новых данных, но по условию задачи проверка по таймеру.</span></p><p class="ds-markdown-paragraph"><span>План:</span></p><ol start="1"><li><p class="ds-markdown-paragraph"><span>Создадим класс для потока записи, который будет получать данные, обрабатывать и сохранять в файл.</span></p></li><li><p class="ds-markdown-paragraph"><span>В основном потоке создадим таймер, который будет периодически проверять файл и читать новые данные.</span></p></li></ol><p class="ds-markdown-paragraph"><span>Однако, чтобы избежать постоянного чтения всего файла, мы можем использовать позиционирование: запоминать позицию, до которой уже прочитали, и читать только новые данные.</span></p><p class="ds-markdown-paragraph"><span>Но по условию мы должны начинать чтение с последнего элемента. Однако, в задании не уточняется, нужно ли читать все данные с начала или только новые. Предположим, что нам нужно читать только новые данные, которые появились после предыдущей проверки.</span></p><p class="ds-markdown-paragraph"><span>Реализация:</span></p><ul><li><p class="ds-markdown-paragraph"><span>В потоке записи:</span></p><ul><li><p class="ds-markdown-paragraph"><span>Мы будем открывать файл в режиме добавления (QIODevice::Append) и записывать данные в конец.</span></p></li><li><p class="ds-markdown-paragraph"><span>Каждую запись будем делать в формате, который позволит потом однозначно прочитать (например, с использованием QDataStream).</span></p></li></ul></li><li><p class="ds-markdown-paragraph"><span>В основном потоке:</span></p><ul><li><p class="ds-markdown-paragraph"><span>Мы откроем файл для чтения и будем читать с той позиции, на которой остановились в прошлый раз.</span></p></li><li><p class="ds-markdown-paragraph"><span>Но так как мы хотим начинать с последнего элемента, то в первый раз мы можем прочитать весь файл и взять последний элемент, а затем уже следить за новыми данными.</span></p></li></ul></li></ul><p class="ds-markdown-paragraph"><span>Однако, условие говорит: "считывание данных начинается с последнего элемента". Это можно интерпретировать как чтение только последнего элемента, а не всех данных. Но если мы хотим получать все данные, но в порядке от последнего к первому, то это сложнее. Уточним, что мы будем читать только новые данные, которые добавляются в конец, и мы их читаем в том же порядке.</span></p><p class="ds-markdown-paragraph"><span>Давайте сделаем так:</span></p><ol start="1"><li><p class="ds-markdown-paragraph"><span>Поток записи записывает данные в файл в бинарном режиме с помощью QDataStream. Каждая запись - это один элемент (например, строка или число) в формате QDataStream.</span></p></li><li><p class="ds-markdown-paragraph"><span>В основном потоке мы будем помнить позицию в файле, с которой нужно начать чтение. Изначально это 0. Но по условию мы должны начать с последнего элемента. Однако, если мы хотим начинать с последнего элемента, то нам нужно прочитать весь файл, чтобы найти последний элемент. Но это неэффективно.</span></p></li></ol><p class="ds-markdown-paragraph"><span>Уточнение: по условию "считывание данных начинается с последнего элемента" - возможно, имеется в виду, что мы читаем данные в обратном порядке, начиная с последнего. Но тогда это противоречит требованию читать новые данные, которые добавляются в конец.</span></p><p class="ds-markdown-paragraph"><span>Давайте переинтерпретируем задачу: у нас есть два потока. Один пишет в файл, другой читает из файла, но читающая сторона должна начинать чтение с последнего (самого свежего) элемента и затем читать следующие за ним новые данные. То есть, мы хотим читать только те данные, которые были записаны после запуска читающего потока, и начинать с самого последнего на момент запуска.</span></p><p class="ds-markdown-paragraph"><span>Но тогда алгоритм чтения должен:</span></p><ul><li><p class="ds-markdown-paragraph"><span>При старте читающего потока определить, где находится конец файла, и запомнить эту позицию как стартовую. Затем читать только те данные, которые будут записаны после этой позиции.</span></p></li></ul><p class="ds-markdown-paragraph"><span>Однако, если мы хотим читать именно с последнего элемента, который был в файле на момент запуска, то мы должны прочитать весь файл и взять последний элемент, а затем ждать новые.</span></p><p class="ds-markdown-paragraph"><span>Но условие говорит "считывание данных начинается с последнего элемента", то есть мы не хотим читать весь файл с начала, а только начиная с последнего.</span></p><p class="ds-markdown-paragraph"><span>Это можно сделать, если мы в качестве начальной позиции для чтения установим конец файла, но тогда мы пропустим последний элемент, который был на момент запуска.</span></p><p class="ds-markdown-paragraph"><span>Поэтому уточним: мы хотим, чтобы читающий поток получал только новые данные, которые записываются после его запуска. А если мы хотим включить и последний элемент, который был на момент запуска, то нужно сначала прочитать последний элемент, а затем ждать новые.</span></p><p class="ds-markdown-paragraph"><span>Предположим, что нам нужно читать данные, начиная с последнего элемента, который был в файле на момент запуска читающего потока, и затем все новые.</span></p><p class="ds-markdown-paragraph"><span>Тогда:</span></p><ul><li><p class="ds-markdown-paragraph"><span>При запуске читающего потока мы открываем файл, читаем весь файл и запоминаем последний элемент, а также позицию, на которой закончили (конец файла). Затем мы используем эту позицию для чтения новых данных.</span></p></li></ul><p class="ds-markdown-paragraph"><span>Но если файл большой, то читать весь файл неэффективно. Поэтому мы можем использовать другой подход: записывать в файл не только данные, но и мета-информацию о размере записи, чтобы можно было быстро переместиться к последней записи.</span></p><p class="ds-markdown-paragraph"><span>Однако, для простоты будем считать, что файл не слишком большой, или что мы готовы читать весь файл при запуске.</span></p><p class="ds-markdown-paragraph"><span>Альтернатива: мы можем не хранить историю в файле, а только новые данные, тогда мы будем открывать файл в режиме только для чтения и ждать, пока в него не появятся новые данные.</span></p><p class="ds-markdown-paragraph"><span>Но по условию мы должны начинать с последнего элемента, значит, нам нужно прочитать последний элемент из существующих в файле.</span></p><p class="ds-markdown-paragraph"><span>Предлагаю такой план:</span></p><ul><li><p class="ds-markdown-paragraph"><span>В основном потоке (читающем) при старте таймера мы открываем файл и читаем все данные, которые есть, и берем последний элемент. Затем мы запоминаем размер файла (позицию конца) и в следующий раз читаем только данные, которые добавлены после этой позиции.</span></p></li><li><p class="ds-markdown-paragraph"><span>Но тогда при первом чтении мы прочитаем весь файл и получим все элементы, а нам нужен только последний. Это неэффективно, если файл большой.</span></p></li></ul><p class="ds-markdown-paragraph"><span>Поэтому давайте изменим задачу: мы будем считать, что нам не нужны старые данные, а только новые, которые приходят после запуска читающего потока. Тогда мы просто запоминаем позицию конца файла при запуске и читаем только то, что добавлено после.</span></p><p class="ds-markdown-paragraph"><span>Но условие требует начинать с последнего элемента. Поэтому, если мы хотим именно последний элемент (тот, который был записан до запуска читающего потока), то без чтения всего файла не обойтись.</span></p><p class="ds-markdown-paragraph"><span>Уточним условие: возможно, под "считывание данных начинается с последнего элемента" имеется в виду, что мы читаем данные в обратном порядке, начиная с последнего? Тогда это другая задача.</span></p><p class="ds-markdown-paragraph"><span>Давайте остановимся на такой интерпретации: у нас есть файл, в который пишутся данные в порядке добавления. Мы хотим в читающем потоке получать данные, начиная с последнего из существующих на момент запуска, и затем продолжать читать новые данные в порядке их поступления.</span></p><p class="ds-markdown-paragraph"><span>Тогда:</span></p><ul><li><p class="ds-markdown-paragraph"><span>При запуске читающего потока мы должны прочитать весь файл и взять последний элемент (и, возможно, выбросить все предыдущие). Затем мы запоминаем текущий размер файла и в дальнейшем читаем только добавленные данные.</span></p></li></ul><p class="ds-markdown-paragraph"><span>Шаги:</span></p><p class="ds-markdown-paragraph"><span>Поток записи:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">text</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre> - Открывает файл в режиме QIODevice::Append.
 - Пишет данные в файл с помощью QDataStream.</pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Поток чтения (в основном потоке по таймеру):</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">text</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre> - При первом чтении (если мы еще не запомнили размер файла) читаем весь файл и берем последний элемент, а также запоминаем размер файла.
 - При последующих чтениях мы открываем файл, перемещаемся на запомненную позицию и читаем все данные, которые есть до конца файла. Затем обновляем запомненную позицию.</pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Но есть проблема: файл может быть изменен в процессе чтения. Поэтому нужно быть осторожным.</span></p><p class="ds-markdown-paragraph"><span>Реализация:</span></p><p class="ds-markdown-paragraph"><span>В основном потоке:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre>QTimer timer<span class="token punctuation">;</span>
QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
qint64 lastPos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> firstRead <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token class-name">QObject</span><span class="token double-colon punctuation">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>timer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTimer<span class="token double-colon punctuation">::</span>timeout<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Cannot open file for reading"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    in<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>firstRead<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Читаем весь файл и берем последний элемент</span>
        QString lastData<span class="token punctuation">;</span>
        QString data<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            in <span class="token operator">&gt;&gt;</span> data<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                lastData <span class="token operator">=</span> data<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lastData<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Last element on start:"</span> <span class="token operator">&lt;&lt;</span> lastData<span class="token punctuation">;</span>
            <span class="token comment">// Добавляем lastData в массив основного потока</span>
        <span class="token punctuation">}</span>
        lastPos <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// запоминаем текущий конец файла</span>
        firstRead <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// Перемещаемся на ту позицию, где остановились</span>
        file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>lastPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
        QString data<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            in <span class="token operator">&gt;&gt;</span> data<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"New data:"</span> <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
                <span class="token comment">// Добавляем data в массив основного потока</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        lastPos <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// обновляем позицию</span>
    <span class="token punctuation">}</span>

    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

timer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// проверка каждые 100 мс</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Поток записи:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre>QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>Append<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// обработка ошибки</span>
<span class="token punctuation">}</span>
QDataStream <span class="token function">out</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// При получении данных для записи</span>
out <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
file<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// чтобы данные сразу записались на диск</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Однако, есть нюанс: при записи в режиме Append, мы всегда пишем в конец. Но при этом, если читающий поток откроет файл, пока мы пишем, он может прочитать неполные данные.</span></p><p class="ds-markdown-paragraph"><span>Поэтому нужно использовать механизм блокировок или использовать отдельный файл для каждой записи (например, QSaveFile) и переименовывать его, но это сложнее.</span></p><p class="ds-markdown-paragraph"><span>Альтернатива: использовать именованный pipe (FIFO) или разделяемую память, но условие требует файл.</span></p><p class="ds-markdown-paragraph"><span>Упростим: будем считать, что запись и чтение происходят достаточно редко, и что операционная система гарантирует, что запись в файл происходит атомарно, если размер записываемых данных не превышает размер блока файловой системы.</span></p><p class="ds-markdown-paragraph"><span>Но в нашем случае мы используем QDataStream, который записывает сначала размер данных, а потом сами данные. Поэтому чтение будет безопасным, если мы пишем и читаем через QDataStream.</span></p><p class="ds-markdown-paragraph"><span>Однако, если мы пишем в файл из нескольких потоков, то нужно синхронизировать запись. Но у нас один поток записи.</span></p><p class="ds-markdown-paragraph"><span>Итак, реализуем описанный выше план.</span></p><p class="ds-markdown-paragraph"><span>Пример кода:</span></p><p class="ds-markdown-paragraph"><span>main.cpp:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QCoreApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTimer&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFile&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDataStream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QThread&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">WriterThread</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
    Q_OBJECT
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>WriteOnly <span class="token operator">|</span> QIODevice<span class="token double-colon punctuation">::</span>Append<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Writer: Cannot open file for writing"</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        QDataStream <span class="token function">out</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            QString data <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Data %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            out <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
            file<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Writer: Written"</span> <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Writer: Finished"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    QCoreApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Запускаем поток записи</span>
    WriterThread writer<span class="token punctuation">;</span>
    writer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// В основном потоке запускаем таймер для чтения</span>
    QTimer timer<span class="token punctuation">;</span>
    QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    qint64 lastPos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> firstRead <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token class-name">QObject</span><span class="token double-colon punctuation">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>timer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTimer<span class="token double-colon punctuation">::</span>timeout<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Reader: Cannot open file for reading"</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        in<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>firstRead<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            QString lastData<span class="token punctuation">;</span>
            QString data<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                in <span class="token operator">&gt;&gt;</span> data<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    lastData <span class="token operator">=</span> data<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lastData<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Reader: Last element on start:"</span> <span class="token operator">&lt;&lt;</span> lastData<span class="token punctuation">;</span>
                <span class="token comment">// Добавляем lastData в массив основного потока</span>
            <span class="token punctuation">}</span>
            lastPos <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            firstRead <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>lastPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
            QString data<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                in <span class="token operator">&gt;&gt;</span> data<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Reader: New data:"</span> <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
                    <span class="token comment">// Добавляем data в массив основного потока</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            lastPos <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    timer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Проверяем каждые 100 мс</span>

    <span class="token comment">// Завершим приложение после завершения потока записи</span>
    QObject<span class="token double-colon punctuation">::</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div></div></div><div class="_8f7678d"></div></div></div><div class="ds-theme" style="--ds-rgb-hover: 245 245 245; --ds-rgb-primary: 77 107 254; --ds-button-hover-color: #2563EB; --ds-bordered-secondary-button-color: var(--dsr-text-1); --ds-input-prefix-color: var(--dsr-text-1);"></div><div class="ds-flex _0a3d93b" style="align-items: center; gap: 10px;"><div class="ds-flex _965abe9" style="align-items: center; gap: 10px;"><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.92142 0.349213C10.3745 0.349295 12.5564 1.50526 13.9558 3.299L15.1282 2.12765C15.3304 1.92552 15.6768 2.06949 15.6768 2.35544V5.53929C15.6766 5.71632 15.533 5.85982 15.356 5.86008H12.1711C11.8855 5.85976 11.7427 5.51471 11.9443 5.31255L12.9642 4.29062C11.8238 2.74311 9.98914 1.74112 7.92142 1.74104C4.46442 1.74104 1.66239 4.54307 1.66239 8.00006C1.66239 11.4571 4.46442 14.2591 7.92142 14.2591C11.3783 14.2589 14.1804 11.457 14.1804 8.00006H15.5723C15.5723 12.2252 12.1465 15.6508 7.92142 15.6509C3.6962 15.6509 0.270569 12.2253 0.270569 8.00006C0.270569 3.77485 3.6962 0.349213 7.92142 0.349213Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.27861 0.811633C8.81985 0.142255 9.79016 0.0422445 10.4537 0.557662L10.5823 0.669367L10.6065 0.693605L10.6097 0.695713L10.6392 0.72522C11.3549 1.44685 11.6336 2.49474 11.3716 3.47675L11.3705 3.48097L11.361 3.5168L11.36 3.51891L10.8889 5.2261C10.8796 5.26003 10.8706 5.29164 10.8626 5.32094C10.8934 5.32101 10.927 5.322 10.9627 5.322H11.9006C12.4263 5.322 12.783 5.31906 13.0651 5.36731C14.8182 5.66725 15.9851 7.34574 15.6564 9.09363C15.6035 9.37493 15.4769 9.70926 15.2939 10.2023L14.337 12.7799C14.1401 13.3105 13.9773 13.7518 13.8101 14.1025C13.6375 14.4646 13.4385 14.7794 13.1441 15.0425C12.9712 15.197 12.7801 15.3303 12.5751 15.4387C12.2259 15.6232 11.8608 15.7 11.4612 15.7359C11.0742 15.7705 10.6034 15.7696 10.0374 15.7696H4.87371C4.08047 15.7696 3.42922 15.7703 2.90728 15.7138C2.37206 15.6558 1.88985 15.5311 1.4667 15.2237C1.22409 15.0475 1.01072 14.834 0.834405 14.5914C0.52696 14.1683 0.401312 13.6861 0.343323 13.1509C0.286761 12.6288 0.28747 11.977 0.28747 11.1834V9.51411C0.28747 8.84785 0.281286 8.36721 0.399176 7.95656C0.671091 7.00941 1.41109 6.26838 2.35823 5.99645C2.76888 5.87855 3.24952 5.88579 3.91579 5.88579C4.11977 5.88579 4.14542 5.88325 4.16238 5.88053C4.23526 5.8687 4.30403 5.83669 4.35839 5.78674C4.37104 5.77511 4.38755 5.7561 4.51436 5.59494L8.25648 0.839033L8.25754 0.837979L8.27861 0.811633ZM1.69116 11.1834C1.69116 12.0083 1.69211 12.5712 1.73859 13.0002C1.78365 13.4158 1.86467 13.6222 1.96937 13.7663C2.05914 13.8898 2.16727 13.999 2.29079 14.0888C2.43495 14.1935 2.6421 14.2745 3.05797 14.3195C3.45891 14.363 3.97631 14.3656 4.71564 14.3659C4.30795 13.8053 4.06447 13.1172 4.06437 12.371V8.59412H5.46807V12.371C5.46832 13.4734 6.3616 14.367 7.46401 14.367H10.0374C10.6286 14.367 11.0269 14.3663 11.3368 14.3385C11.6339 14.3118 11.7956 14.2639 11.9196 14.1984C12.024 14.1431 12.1213 14.0747 12.2094 13.996C12.3139 13.9025 12.4151 13.7679 12.5434 13.4986C12.6774 13.2177 12.8162 12.8451 13.0219 12.2909L13.9787 9.71328C14.1848 9.15822 14.253 8.96737 14.278 8.83439C14.4617 7.85698 13.8092 6.91901 12.829 6.75098C12.6956 6.72816 12.4928 6.72464 11.9006 6.72464H10.9627C10.7737 6.72464 10.5693 6.72663 10.4 6.70672C10.2211 6.68568 9.96696 6.6303 9.74764 6.43167C9.64448 6.33817 9.5595 6.22616 9.49683 6.10183C9.36384 5.8379 9.37793 5.57905 9.40515 5.40104C9.43094 5.23267 9.48666 5.03623 9.53688 4.8541L10.0079 3.14585L10.0174 3.11108C10.1488 2.61344 10.0077 2.08344 9.64648 1.71687L9.60854 1.67893L9.55058 1.6431C9.48789 1.62049 9.41419 1.6382 9.36932 1.69368L9.35773 1.70633L9.35878 1.70738L5.61666 6.46224C5.51816 6.58741 5.42231 6.71336 5.30683 6.81948C5.05069 7.05477 4.73119 7.20945 4.3879 7.26525C4.23309 7.29038 4.07507 7.28843 3.91579 7.28843C3.1535 7.28843 2.9191 7.29576 2.74604 7.34534C2.26358 7.48385 1.88558 7.86087 1.74702 8.34331C1.69732 8.51642 1.69116 8.75116 1.69116 9.51411V11.1834Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.72451 15.1086C7.18929 15.7706 6.22975 15.8695 5.57357 15.3598L5.44643 15.2493L5.42247 15.2253L5.41934 15.2233L5.39016 15.1941C4.68239 14.4805 4.40679 13.4442 4.66589 12.4731L4.66693 12.4689L4.67631 12.4335L4.67735 12.4314L5.14318 10.7432C5.15243 10.7096 5.1613 10.6784 5.16923 10.6494C5.13878 10.6493 5.10558 10.6484 5.07023 10.6484H4.14274C3.62288 10.6484 3.27015 10.6513 2.9912 10.6035C1.25757 10.3069 0.103662 8.64709 0.42863 6.91861C0.480965 6.64044 0.606164 6.30981 0.787119 5.8223L1.73336 3.27328C1.92812 2.74859 2.08912 2.31215 2.25442 1.96542C2.42515 1.60731 2.62191 1.296 2.91304 1.03584C3.08408 0.883016 3.273 0.751185 3.47579 0.644009C3.82102 0.461569 4.18214 0.385575 4.57731 0.350131C4.95993 0.315849 5.42553 0.316783 5.98521 0.316783H11.0916C11.876 0.316783 12.52 0.316134 13.0362 0.372015C13.5655 0.429358 14.0423 0.552599 14.4608 0.856601C14.7007 1.03091 14.9117 1.24199 15.086 1.48187C15.3901 1.90033 15.5143 2.37716 15.5717 2.90645C15.6276 3.42275 15.6269 4.06727 15.6269 4.85209V6.5028C15.6269 7.16167 15.633 7.63697 15.5164 8.04306C15.2475 8.97969 14.5158 9.71248 13.5791 9.9814C13.173 10.098 12.6977 10.0908 12.0389 10.0908C11.8372 10.0908 11.8118 10.0933 11.795 10.096C11.723 10.1077 11.6549 10.1394 11.6012 10.1888C11.5887 10.2003 11.5724 10.2191 11.447 10.3784L7.74639 15.0815L7.74535 15.0826L7.72451 15.1086ZM14.2388 4.85209C14.2388 4.03635 14.2379 3.47971 14.1919 3.05547C14.1473 2.64449 14.0672 2.44037 13.9637 2.29785C13.8749 2.17569 13.768 2.06776 13.6458 1.97896C13.5033 1.87539 13.2984 1.7953 12.8872 1.75074C12.4907 1.70779 11.979 1.70518 11.2479 1.70489C11.6511 2.25924 11.8918 2.93974 11.8919 3.67762V7.41257H10.5038V3.67762C10.5036 2.58751 9.62023 1.70384 8.53007 1.70384H5.98521C5.40065 1.70384 5.00679 1.70449 4.70028 1.73198C4.40651 1.75836 4.24662 1.80577 4.12399 1.87058C4.02069 1.92518 3.92452 1.99283 3.8374 2.07067C3.73401 2.16312 3.634 2.29627 3.50705 2.56255C3.37462 2.84034 3.23734 3.2088 3.03393 3.75682L2.08768 6.30584C1.88395 6.85474 1.81646 7.04347 1.79172 7.17497C1.61005 8.14152 2.25533 9.06908 3.22464 9.23524C3.35654 9.25781 3.55717 9.26129 4.14274 9.26129H5.07023C5.25717 9.26129 5.4593 9.25932 5.62672 9.27901C5.80364 9.29982 6.05492 9.35458 6.27179 9.551C6.37381 9.64347 6.45784 9.75424 6.51982 9.87719C6.65133 10.1382 6.6374 10.3942 6.61048 10.5702C6.58498 10.7367 6.52988 10.931 6.48022 11.1111L6.01439 12.8003L6.00501 12.8347C5.87513 13.3268 6.01464 13.8509 6.37184 14.2134L6.40935 14.251L6.46667 14.2864C6.52866 14.3088 6.60155 14.2912 6.64591 14.2364L6.65738 14.2239L6.65633 14.2228L10.3569 9.52078C10.4543 9.397 10.5491 9.27245 10.6633 9.1675C10.9166 8.93483 11.2325 8.78186 11.572 8.72669C11.7251 8.70184 11.8814 8.70376 12.0389 8.70376C12.7927 8.70376 13.0245 8.69651 13.1956 8.64748C13.6727 8.51051 14.0465 8.13768 14.1836 7.6606C14.2327 7.48941 14.2388 7.25727 14.2388 6.5028V4.85209Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.7484 11.1004C15.6274 11.8866 15.5288 12.5365 15.3882 13.0496C15.243 13.579 15.0339 14.0407 14.6455 14.4162C14.5638 14.4952 14.4775 14.5699 14.387 14.6387C13.9568 14.9656 13.4683 15.1012 12.923 15.1642C12.3944 15.2252 11.7374 15.2245 10.9419 15.2245H5.05809C4.2626 15.2245 3.6056 15.2252 3.07703 15.1642C2.53171 15.1012 2.04317 14.9656 1.61296 14.6387C1.52248 14.5699 1.43618 14.4952 1.35447 14.4162C0.966081 14.0407 0.756961 13.579 0.611839 13.0496C0.471162 12.5365 0.372616 11.8866 0.251648 11.1004L1.6458 10.8864C1.77181 11.7054 1.85791 12.2602 1.97209 12.6767C2.08174 13.0767 2.1976 13.2701 2.3344 13.4024C2.37603 13.4426 2.42074 13.4807 2.46683 13.5158C2.6184 13.6308 2.8272 13.7161 3.23912 13.7636C3.66812 13.8131 4.22949 13.8145 5.05809 13.8145H10.9419C11.7705 13.8145 12.3319 13.8131 12.7609 13.7636C13.1728 13.7161 13.3816 13.6308 13.5332 13.5158C13.5793 13.4807 13.624 13.4426 13.6656 13.4024C13.8024 13.2701 13.9183 13.0767 14.0279 12.6767C14.1421 12.2602 14.2282 11.7054 14.3542 10.8864L15.7484 11.1004ZM7.71503 0.558394C7.90371 0.52798 8.09629 0.52798 8.28498 0.558394C8.63706 0.615181 8.91293 0.790123 9.14944 0.985327C9.37579 1.17216 9.62518 1.42894 9.90478 1.7163L13.387 5.29491L12.8817 5.78753L12.3763 6.27908L8.89412 2.70047C8.82608 2.63054 8.76286 2.56716 8.70555 2.50873V10.5336H7.29445V2.50873C7.23714 2.56716 7.17392 2.63054 7.10588 2.70047L3.62368 6.27908L3.11835 5.78753L2.61302 5.29491L6.09522 1.7163C6.37482 1.42894 6.62422 1.17216 6.85057 0.985327C7.08707 0.790123 7.36294 0.615181 7.71503 0.558394Z" fill="currentColor"></path></svg></div></div></div><div style="flex: 1 1 0%;"></div></div></div><div class="_9663006" data-um-id="5"><div class="d29f3d7d ds-message _63c77b1" style="--panel-width: 0px;"><div class="fbb737a4">под последним элементом я имел ввиду с последнего чтения, то есть уже прочитанные данные в основной массив заносить не нужно </div></div><div class="_11d6b3a"><div class="_425ea0b"><div class="ds-flex _78e0558" style="align-items: flex-end; gap: 0px;"><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button d4910adc" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px; margin-left: 10px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.94073 1.34948C10.7047 0.902375 11.6503 0.90248 12.4143 1.34948C12.706 1.52022 12.9687 1.79124 13.3104 2.1329C13.652 2.47454 13.9231 2.73727 14.0938 3.029C14.5408 3.79301 14.5409 4.73862 14.0938 5.50257C13.9231 5.79422 13.652 6.0571 13.3104 6.39867L6.65929 13.0498C6.28065 13.4284 6.00692 13.7108 5.6654 13.9097C5.32388 14.1085 4.94312 14.2074 4.42702 14.3498L3.24391 14.6762C2.77524 14.8054 2.34535 14.9263 2.00128 14.9685C1.65193 15.0112 1.17961 15.0014 0.810733 14.6326C0.44189 14.2637 0.432076 13.7914 0.474829 13.442C0.517004 13.098 0.63787 12.668 0.767151 12.1994L1.09349 11.0163C1.23585 10.5002 1.33478 10.1194 1.53356 9.77791C1.73246 9.43639 2.01487 9.16266 2.39352 8.78402L9.04463 2.1329C9.38622 1.79132 9.64908 1.52023 9.94073 1.34948ZM15.5427 14.8399H7.5522L8.96704 13.425H15.5427V14.8399ZM3.39379 9.78429C2.96497 10.2131 2.84241 10.3437 2.75706 10.4901C2.6718 10.6366 2.61858 10.8079 2.4573 11.3926L2.13096 12.5757C2.0018 13.0439 1.92191 13.3419 1.8886 13.5536C2.10038 13.5204 2.39869 13.4417 2.86761 13.3123L4.05072 12.986C4.63541 12.8247 4.80666 12.7715 4.9532 12.6862C5.09965 12.6009 5.23019 12.4783 5.65902 12.0495L10.721 6.9865L8.45574 4.72128L3.39379 9.78429ZM11.7 2.57085C11.3774 2.38205 10.9777 2.38205 10.6551 2.57085C10.5602 2.62653 10.4487 2.72937 10.0449 3.13317L9.45601 3.72101L11.7212 5.98623L12.3101 5.3984C12.7139 4.99464 12.8168 4.88314 12.8725 4.78825C13.0612 4.46567 13.0612 4.06592 12.8725 3.74333C12.8168 3.64834 12.7145 3.53758 12.3101 3.13317C11.9057 2.72869 11.795 2.62647 11.7 2.57085Z" fill="currentColor"></path></svg></div></div></div></div></div></div><div class="_4f9bf79 _43c05b5" style="--assistant-last-margin-bottom: 32px;"><div class="ds-message _63c77b1" style="--panel-width: 0px;"><div class="_74c0879" style="--collapsible-area-title-height: 38px; --group-title-sticky-top: 0px;"><div class="_245c867"><div class="_5ab5d64"><div class="ds-icon _970ac5e" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.00198 6.6446C8.75032 6.6446 9.35738 7.25175 9.35745 8.00007C9.35745 8.74844 8.75036 9.35554 8.00198 9.35554C7.25373 9.35539 6.64749 8.74835 6.64749 8.00007C6.64756 7.25184 7.25377 6.64474 8.00198 6.6446Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.97171 1.29987C11.5854 0.718977 13.271 0.642258 14.3145 1.68561C15.3578 2.72908 15.2811 4.41472 14.7002 6.02839C14.4708 6.66567 14.1505 7.32943 13.75 8.00007C14.1505 8.67068 14.4708 9.3345 14.7002 9.97175C15.2811 11.5854 15.3579 13.2711 14.3145 14.3145C13.2711 15.3579 11.5854 15.2812 9.97171 14.7003C9.33446 14.4708 8.67065 14.1505 8.00003 13.7501C7.32939 14.1505 6.66564 14.4708 6.02835 14.7003C4.41467 15.2812 2.72905 15.3578 1.68558 14.3145C0.642216 13.2711 0.718931 11.5854 1.29984 9.97175C1.52921 9.3346 1.84871 8.67055 2.24905 8.00007C1.84872 7.32959 1.52921 6.66551 1.29984 6.02839C0.718913 4.41465 0.642131 2.72906 1.68558 1.68561C2.72903 0.642173 4.41462 0.718948 6.02835 1.29987C6.66547 1.52925 7.32956 1.84876 8.00003 2.24909C8.67051 1.84875 9.33457 1.52925 9.97171 1.29987ZM12.9405 9.21296C12.4392 9.89306 11.8617 10.5681 11.2149 11.2149C10.5681 11.8617 9.89302 12.4392 9.21292 12.9405C9.62538 13.1579 10.0271 13.338 10.4121 13.4766C11.9147 14.0175 12.9173 13.8738 13.3955 13.3956C13.8738 12.9173 14.0175 11.9147 13.4766 10.4122C13.338 10.0272 13.1579 9.62541 12.9405 9.21296ZM3.05862 9.21296C2.84127 9.62529 2.66203 10.0273 2.52347 10.4122C1.98258 11.9147 2.12633 12.9173 2.60452 13.3956C3.08284 13.8737 4.08551 14.0175 5.58792 13.4766C5.9727 13.3381 6.37395 13.1578 6.78616 12.9405C6.1063 12.4393 5.43174 11.8615 4.78519 11.2149C4.13829 10.568 3.55999 9.8932 3.05862 9.21296ZM7.99905 3.79206C7.23185 4.31425 6.45312 4.95519 5.70413 5.70417C4.95515 6.45315 4.31421 7.2319 3.79202 7.99909C4.31437 8.76672 4.95477 9.54659 5.70413 10.296C6.45315 11.045 7.23277 11.6849 8.00003 12.2071C8.76731 11.6849 9.54689 11.045 10.2959 10.296C11.045 9.54692 11.6848 8.76735 12.2071 8.00007C11.6848 7.23281 11.0449 6.45318 10.2959 5.70417C9.54656 4.95481 8.76668 4.3144 7.99905 3.79206ZM5.58792 2.52351C4.08539 1.98261 3.08278 2.12632 2.60452 2.60456C2.12627 3.08281 1.98258 4.08542 2.52347 5.58796C2.66195 5.97259 2.84146 6.37415 3.05862 6.7862C3.55989 6.10617 4.13846 5.43196 4.78519 4.78522C5.43193 4.13849 6.10612 3.55993 6.78616 3.05866C6.37411 2.8415 5.97255 2.66198 5.58792 2.52351ZM13.3955 2.60456C12.9173 2.12637 11.9146 1.98263 10.4121 2.52351C10.0272 2.66207 9.62525 2.84131 9.21292 3.05866C9.89316 3.56002 10.568 4.13833 11.2149 4.78522C11.8614 5.43178 12.4393 6.10633 12.9405 6.7862C13.1577 6.37399 13.3381 5.97273 13.4766 5.58796C14.0174 4.08555 13.8737 3.08287 13.3955 2.60456Z" fill="currentColor"></path></svg></div><span class="_5255ff8 _4d41763">Thought for 50 seconds</span><div class="ds-icon" style="font-size: 14px; width: 14px; height: 14px;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.8487 5.5L11.4239 5.92383L8.6973 8.65137C8.4416 8.90706 8.21565 9.13382 8.01175 9.29785C7.79915 9.46883 7.55598 9.61756 7.25003 9.66602C7.08438 9.69222 6.91568 9.69222 6.75003 9.66602C6.44408 9.61756 6.20091 9.46883 5.98831 9.29785C5.78442 9.13382 5.55846 8.90706 5.30276 8.65137L2.5762 5.92383L2.1514 5.5L3.00003 4.65137L3.42386 5.07617L6.1514 7.80273C6.42598 8.07732 6.59879 8.24849 6.74026 8.3623C6.87294 8.46904 6.92275 8.47813 6.93753 8.48047C6.97898 8.48703 7.02108 8.48703 7.06253 8.48047C7.07731 8.47813 7.12712 8.46904 7.2598 8.3623C7.40127 8.24849 7.57408 8.07732 7.84866 7.80273L10.5762 5.07617L11 4.65137L11.8487 5.5Z" fill="currentColor"></path></svg></div></div><div class="c99b79f8" style="opacity: 0;"></div></div><div class="c2b72bb8"></div><div class="e1675d8b ds-think-content _767406f"><div class="ddd26891 _9b52f6c" style="width: 16px; height: 16px;"><div class="a510c7ce _0652043"></div></div><div class="_9ecc93a"></div><div class="ds-markdown" style="--ds-md-zoom: 1.143;"><p class="ds-markdown-paragraph"><span>Мы хотим записывать данные в файл из одного потока, а в другом потоке считывать только новые данные, которые еще не были прочитаны.</span><br><span>Для этого можно запоминать позицию в файле, до которой было прочитано, и при следующем чтении начинать с этой позиции.</span></p><p class="ds-markdown-paragraph"><span>План:</span></p><ol start="1"><li><p class="ds-markdown-paragraph"><span>Поток записи добавляет данные в файл (открывает в режиме Append).</span></p></li><li><p class="ds-markdown-paragraph"><span>Поток чтения запоминает позицию, до которой он прочитал, и при следующем чтении начинает с этой позиции.</span></p></li></ol><p class="ds-markdown-paragraph"><span>Однако, есть нюансы:</span></p><ul><li><p class="ds-markdown-paragraph"><span>При чтении мы не знаем, когда данные добавятся, поэтому нужно периодически проверять файл или использовать механизм уведомлений.</span></p></li><li><p class="ds-markdown-paragraph"><span>Мы можем использовать QFile::size() для определения, не появились ли новые данные.</span></p></li></ul><p class="ds-markdown-paragraph"><span>Реализация:</span></p><p class="ds-markdown-paragraph"><span>В потоке чтения мы будем открывать файл, считывать данные с последней известной позиции и обновлять позицию.</span></p><p class="ds-markdown-paragraph"><span>Пример:</span></p><p class="ds-markdown-paragraph"><span>Класс для чтения файла с отслеживанием позиции:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">class</span> <span class="token class-name">FileReader</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span>
<span class="token punctuation">{</span>
    Q_OBJECT

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">FileReader</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>filename<span class="token punctuation">,</span> QObject <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token function">QThread</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_filename</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_lastPos</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span>m_filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isInterruptionRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">isOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Failed to open file for reading"</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// Перемещаемся на последнюю известную позицию</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>m_lastPos<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Failed to seek to position"</span> <span class="token operator">&lt;&lt;</span> m_lastPos<span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Если мы в конце файла, ждем и проверяем снова</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Ждем 100 мс</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Читаем данные до конца файла</span>
            QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
            in<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isInterruptionRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                QString data<span class="token punctuation">;</span>
                in <span class="token operator">&gt;&gt;</span> data<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    emit <span class="token function">newData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    m_lastPos <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Обновляем позицию</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

signals<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">newData</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    QString m_filename<span class="token punctuation">;</span>
    qint64 m_lastPos<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Класс для записи в файл (примерно как ранее):</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">class</span> <span class="token class-name">FileWriter</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span>
<span class="token punctuation">{</span>
    Q_OBJECT

<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>WriteOnly <span class="token operator">|</span> QIODevice<span class="token double-colon punctuation">::</span>Append<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Cannot open file for writing"</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        QDataStream <span class="token function">out</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            QString data <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Message %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            out <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
            file<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Written:"</span> <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Однако, в этом примере есть проблема: если файл не существует, то читатель будет ждать, пока писатель его создаст и начнет писать.</span></p><p class="ds-markdown-paragraph"><span>Также, если писатель перезаписывает файл (например, каждый раз открывая заново в режиме WriteOnly, а не Append), то читатель может потерять позицию.</span></p><p class="ds-markdown-paragraph"><span>В нашем случае писатель использует Append, поэтому данные дописываются в конец.</span></p><p class="ds-markdown-paragraph"><span>Но важно: читатель должен быть устойчив к ситуации, когда файл удаляется или перезаписывается. В данном примере, если файл переоткрывается, то мы сбрасываем позицию? Нет, мы используем m_lastPos, но если файл был пересоздан, то позиция может стать невалидной.</span></p><p class="ds-markdown-paragraph"><span>Чтобы обработать это, можно проверять, что файл не уменьшился в размере. Если m_lastPos больше текущего размера файла, то сбросить m_lastPos в 0.</span></p><p class="ds-markdown-paragraph"><span>Улучшенная версия читателя:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
    QFile <span class="token function">file</span><span class="token punctuation">(</span>m_filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isInterruptionRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">isOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Failed to open file for reading"</span><span class="token punctuation">;</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Ждем секунду перед повторной попыткой</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// Проверяем, не стал ли файл меньше, чем наша последняя позиция</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> m_lastPos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                m_lastPos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>m_lastPos<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Failed to seek to position"</span> <span class="token operator">&lt;&lt;</span> m_lastPos<span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Если мы в конце файла, ждем и проверяем снова</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Ждем 100 мс</span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Читаем данные до конца файла</span>
        QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        in<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isInterruptionRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            QString data<span class="token punctuation">;</span>
            in <span class="token operator">&gt;&gt;</span> data<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                emit <span class="token function">newData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                m_lastPos <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Обновляем позицию</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Также можно рассмотреть использование QFileSystemWatcher для отслеживания изменений файла, но в многопоточном приложении с общим файлом это может быть не нужно.</span></p><p class="ds-markdown-paragraph"><span>Дополнительно: если запись происходит не часто, а читатель должен быстро реагировать, то можно использовать условие ожидания с таймаутом.</span></p><p class="ds-markdown-paragraph"><span>Важно: в данном решении предполагается, что файл только дополняется и не модифицируется старые данные. Если файл может быть урезан или перезаписан, то нужно обрабатывать эти случаи.</span></p><p class="ds-markdown-paragraph"><span>В основном потоке (или в том, где используется читатель) не забудьте правильно управлять потоками (запуск, остановка).</span></p><p class="ds-markdown-paragraph"><span>Пример использования:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    QCoreApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>

    FileWriter writer<span class="token punctuation">;</span>
    FileReader <span class="token function">reader</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">QObject</span><span class="token double-colon punctuation">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>reader<span class="token punctuation">,</span> <span class="token operator">&amp;</span>FileReader<span class="token double-colon punctuation">::</span>newData<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Received:"</span> <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    writer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    writer<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function">requestInterruption</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Примечание: в реальном приложении, возможно, нужно предусмотреть более надежную синхронизацию, если несколько писателей или читателей.</span></p></div></div><div class="_8f7678d"></div></div><div class="ds-markdown" style="--ds-md-zoom: 1.143;"><p class="ds-markdown-paragraph"><span>Понял! Вам нужно реализовать чтение только новых данных, которые появились в файле после последнего чтения. Вот несколько способов реализации:</span></p><h3><span>1. Простой подход с запоминанием позиции</span></h3><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFile&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDataStream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QThread&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">FileWriter</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>WriteOnly <span class="token operator">|</span> QIODevice<span class="token double-colon punctuation">::</span>Append<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Cannot open file for writing"</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        QDataStream <span class="token function">out</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            QString data <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Message %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            out <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
            file<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Written:"</span> <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">FileReader</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    qint64 lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">isInterruptionRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Перемещаемся к позиции после последнего прочитанного элемента</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>lastReadPosition<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Seek failed"</span><span class="token punctuation">;</span>
                file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
            in<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Читаем только новые данные</span>
            QString data<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                in <span class="token operator">&gt;&gt;</span> data<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"New data:"</span> <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
                    <span class="token comment">// Здесь можно добавить данные в основной массив</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Запоминаем новую позицию</span>
            lastReadPosition <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>2. Более надежный подход с проверкой целостности данных</span></h3><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">class</span> <span class="token class-name">RobustFileReader</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    qint64 lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> waitingForMoreData <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">isInterruptionRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> lastReadPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// Файл не увеличился или был перезаписан</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> lastReadPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Начинаем сначала</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">continue</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>lastReadPosition<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
            in<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

            QString data<span class="token punctuation">;</span>
            qint64 currentPosition <span class="token operator">=</span> lastReadPosition<span class="token punctuation">;</span>
            <span class="token keyword">bool</span> dataRead <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                currentPosition <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                in <span class="token operator">&gt;&gt;</span> data<span class="token punctuation">;</span>
                
                <span class="token keyword">if</span> <span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> QDataStream<span class="token double-colon punctuation">::</span>Ok <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>data<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"New data:"</span> <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
                    <span class="token comment">// Добавляем в основной массив</span>
                    dataRead <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                    lastReadPosition <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token comment">// Неполные данные - ждем следующей итерации</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span>dataRead <span class="token operator">?</span> <span class="token number">10</span> <span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Чаще проверяем при активной записи</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>3. Подход с использованием QFileSystemWatcher для мгновенной реакции</span></h3><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFileSystemWatcher&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">ReactiveFileReader</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QObject</span></span> <span class="token punctuation">{</span>
    Q_OBJECT
<span class="token keyword">private</span><span class="token operator">:</span>
    qint64 lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    QFileSystemWatcher fileWatcher<span class="token punctuation">;</span>
    QFile file<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">ReactiveFileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        file<span class="token punctuation">.</span><span class="token function">setFileName</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fileWatcher<span class="token punctuation">.</span><span class="token function">addFile</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>fileWatcher<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QFileSystemWatcher<span class="token double-colon punctuation">::</span>fileChanged<span class="token punctuation">,</span> 
                <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ReactiveFileReader<span class="token double-colon punctuation">::</span>onFileChanged<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">onFileChanged</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> lastReadPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>lastReadPosition<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>lastReadPosition<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        in<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

        QString data<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            in <span class="token operator">&gt;&gt;</span> data<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"New data:"</span> <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
                <span class="token comment">// Добавляем в основной массив</span>
                lastReadPosition <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Использование</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    QCoreApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    FileWriter writer<span class="token punctuation">;</span>
    ReactiveFileReader reader<span class="token punctuation">;</span>
    
    writer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>4. Класс-обертка для удобного управления</span></h3><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">class</span> <span class="token class-name">IncrementalFileReader</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    qint64 lastPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    QString filename<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">IncrementalFileReader</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>filename<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">filename</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    QList<span class="token operator">&lt;</span>QString<span class="token operator">&gt;</span> <span class="token function">readNewData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        QList<span class="token operator">&lt;</span>QString<span class="token operator">&gt;</span> newData<span class="token punctuation">;</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> newData<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> lastPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            lastPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Файл был перезаписан</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>lastPosition<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> newData<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        in<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        QString data<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            in <span class="token operator">&gt;&gt;</span> data<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                newData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
        lastPosition <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">return</span> newData<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">void</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        lastPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Использование в потоке</span>
<span class="token keyword">class</span> <span class="token class-name">ReaderThread</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    IncrementalFileReader reader<span class="token punctuation">;</span>
    
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">ReaderThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">reader</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isInterruptionRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            QList<span class="token operator">&lt;</span>QString<span class="token operator">&gt;</span> newData <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readNewData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>data <span class="token operator">:</span> newData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"New data:"</span> <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span>
                <span class="token comment">// Добавляем в основной массив</span>
            <span class="token punctuation">}</span>
            
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>Ключевые особенности:</span></h3><ol start="1"><li><p class="ds-markdown-paragraph"><strong><span>Запоминание позиции</span></strong><span>: Сохраняем позицию последнего прочитанного байта</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Инкрементальное чтение</span></strong><span>: Читаем только данные после последней позиции</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Обработка ошибок</span></strong><span>: Корректно обрабатываем случаи, когда файл перезаписывается</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Эффективность</span></strong><span>: Не перечитываем уже обработанные данные</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Гибкость</span></strong><span>: Можно легко адаптировать для разных типов данных</span></p></li></ol><p class="ds-markdown-paragraph"><span>Выберите подход в зависимости от требований к производительности и оперативности реакции на новые данные.</span></p></div></div><div class="ds-theme" style="--ds-rgb-hover: 245 245 245; --ds-rgb-primary: 77 107 254; --ds-button-hover-color: #2563EB; --ds-bordered-secondary-button-color: var(--dsr-text-1); --ds-input-prefix-color: var(--dsr-text-1);"></div><div class="ds-flex _0a3d93b" style="align-items: center; gap: 10px;"><div class="ds-flex _965abe9" style="align-items: center; gap: 10px;"><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.92142 0.349213C10.3745 0.349295 12.5564 1.50526 13.9558 3.299L15.1282 2.12765C15.3304 1.92552 15.6768 2.06949 15.6768 2.35544V5.53929C15.6766 5.71632 15.533 5.85982 15.356 5.86008H12.1711C11.8855 5.85976 11.7427 5.51471 11.9443 5.31255L12.9642 4.29062C11.8238 2.74311 9.98914 1.74112 7.92142 1.74104C4.46442 1.74104 1.66239 4.54307 1.66239 8.00006C1.66239 11.4571 4.46442 14.2591 7.92142 14.2591C11.3783 14.2589 14.1804 11.457 14.1804 8.00006H15.5723C15.5723 12.2252 12.1465 15.6508 7.92142 15.6509C3.6962 15.6509 0.270569 12.2253 0.270569 8.00006C0.270569 3.77485 3.6962 0.349213 7.92142 0.349213Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.27861 0.811633C8.81985 0.142255 9.79016 0.0422445 10.4537 0.557662L10.5823 0.669367L10.6065 0.693605L10.6097 0.695713L10.6392 0.72522C11.3549 1.44685 11.6336 2.49474 11.3716 3.47675L11.3705 3.48097L11.361 3.5168L11.36 3.51891L10.8889 5.2261C10.8796 5.26003 10.8706 5.29164 10.8626 5.32094C10.8934 5.32101 10.927 5.322 10.9627 5.322H11.9006C12.4263 5.322 12.783 5.31906 13.0651 5.36731C14.8182 5.66725 15.9851 7.34574 15.6564 9.09363C15.6035 9.37493 15.4769 9.70926 15.2939 10.2023L14.337 12.7799C14.1401 13.3105 13.9773 13.7518 13.8101 14.1025C13.6375 14.4646 13.4385 14.7794 13.1441 15.0425C12.9712 15.197 12.7801 15.3303 12.5751 15.4387C12.2259 15.6232 11.8608 15.7 11.4612 15.7359C11.0742 15.7705 10.6034 15.7696 10.0374 15.7696H4.87371C4.08047 15.7696 3.42922 15.7703 2.90728 15.7138C2.37206 15.6558 1.88985 15.5311 1.4667 15.2237C1.22409 15.0475 1.01072 14.834 0.834405 14.5914C0.52696 14.1683 0.401312 13.6861 0.343323 13.1509C0.286761 12.6288 0.28747 11.977 0.28747 11.1834V9.51411C0.28747 8.84785 0.281286 8.36721 0.399176 7.95656C0.671091 7.00941 1.41109 6.26838 2.35823 5.99645C2.76888 5.87855 3.24952 5.88579 3.91579 5.88579C4.11977 5.88579 4.14542 5.88325 4.16238 5.88053C4.23526 5.8687 4.30403 5.83669 4.35839 5.78674C4.37104 5.77511 4.38755 5.7561 4.51436 5.59494L8.25648 0.839033L8.25754 0.837979L8.27861 0.811633ZM1.69116 11.1834C1.69116 12.0083 1.69211 12.5712 1.73859 13.0002C1.78365 13.4158 1.86467 13.6222 1.96937 13.7663C2.05914 13.8898 2.16727 13.999 2.29079 14.0888C2.43495 14.1935 2.6421 14.2745 3.05797 14.3195C3.45891 14.363 3.97631 14.3656 4.71564 14.3659C4.30795 13.8053 4.06447 13.1172 4.06437 12.371V8.59412H5.46807V12.371C5.46832 13.4734 6.3616 14.367 7.46401 14.367H10.0374C10.6286 14.367 11.0269 14.3663 11.3368 14.3385C11.6339 14.3118 11.7956 14.2639 11.9196 14.1984C12.024 14.1431 12.1213 14.0747 12.2094 13.996C12.3139 13.9025 12.4151 13.7679 12.5434 13.4986C12.6774 13.2177 12.8162 12.8451 13.0219 12.2909L13.9787 9.71328C14.1848 9.15822 14.253 8.96737 14.278 8.83439C14.4617 7.85698 13.8092 6.91901 12.829 6.75098C12.6956 6.72816 12.4928 6.72464 11.9006 6.72464H10.9627C10.7737 6.72464 10.5693 6.72663 10.4 6.70672C10.2211 6.68568 9.96696 6.6303 9.74764 6.43167C9.64448 6.33817 9.5595 6.22616 9.49683 6.10183C9.36384 5.8379 9.37793 5.57905 9.40515 5.40104C9.43094 5.23267 9.48666 5.03623 9.53688 4.8541L10.0079 3.14585L10.0174 3.11108C10.1488 2.61344 10.0077 2.08344 9.64648 1.71687L9.60854 1.67893L9.55058 1.6431C9.48789 1.62049 9.41419 1.6382 9.36932 1.69368L9.35773 1.70633L9.35878 1.70738L5.61666 6.46224C5.51816 6.58741 5.42231 6.71336 5.30683 6.81948C5.05069 7.05477 4.73119 7.20945 4.3879 7.26525C4.23309 7.29038 4.07507 7.28843 3.91579 7.28843C3.1535 7.28843 2.9191 7.29576 2.74604 7.34534C2.26358 7.48385 1.88558 7.86087 1.74702 8.34331C1.69732 8.51642 1.69116 8.75116 1.69116 9.51411V11.1834Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.72451 15.1086C7.18929 15.7706 6.22975 15.8695 5.57357 15.3598L5.44643 15.2493L5.42247 15.2253L5.41934 15.2233L5.39016 15.1941C4.68239 14.4805 4.40679 13.4442 4.66589 12.4731L4.66693 12.4689L4.67631 12.4335L4.67735 12.4314L5.14318 10.7432C5.15243 10.7096 5.1613 10.6784 5.16923 10.6494C5.13878 10.6493 5.10558 10.6484 5.07023 10.6484H4.14274C3.62288 10.6484 3.27015 10.6513 2.9912 10.6035C1.25757 10.3069 0.103662 8.64709 0.42863 6.91861C0.480965 6.64044 0.606164 6.30981 0.787119 5.8223L1.73336 3.27328C1.92812 2.74859 2.08912 2.31215 2.25442 1.96542C2.42515 1.60731 2.62191 1.296 2.91304 1.03584C3.08408 0.883016 3.273 0.751185 3.47579 0.644009C3.82102 0.461569 4.18214 0.385575 4.57731 0.350131C4.95993 0.315849 5.42553 0.316783 5.98521 0.316783H11.0916C11.876 0.316783 12.52 0.316134 13.0362 0.372015C13.5655 0.429358 14.0423 0.552599 14.4608 0.856601C14.7007 1.03091 14.9117 1.24199 15.086 1.48187C15.3901 1.90033 15.5143 2.37716 15.5717 2.90645C15.6276 3.42275 15.6269 4.06727 15.6269 4.85209V6.5028C15.6269 7.16167 15.633 7.63697 15.5164 8.04306C15.2475 8.97969 14.5158 9.71248 13.5791 9.9814C13.173 10.098 12.6977 10.0908 12.0389 10.0908C11.8372 10.0908 11.8118 10.0933 11.795 10.096C11.723 10.1077 11.6549 10.1394 11.6012 10.1888C11.5887 10.2003 11.5724 10.2191 11.447 10.3784L7.74639 15.0815L7.74535 15.0826L7.72451 15.1086ZM14.2388 4.85209C14.2388 4.03635 14.2379 3.47971 14.1919 3.05547C14.1473 2.64449 14.0672 2.44037 13.9637 2.29785C13.8749 2.17569 13.768 2.06776 13.6458 1.97896C13.5033 1.87539 13.2984 1.7953 12.8872 1.75074C12.4907 1.70779 11.979 1.70518 11.2479 1.70489C11.6511 2.25924 11.8918 2.93974 11.8919 3.67762V7.41257H10.5038V3.67762C10.5036 2.58751 9.62023 1.70384 8.53007 1.70384H5.98521C5.40065 1.70384 5.00679 1.70449 4.70028 1.73198C4.40651 1.75836 4.24662 1.80577 4.12399 1.87058C4.02069 1.92518 3.92452 1.99283 3.8374 2.07067C3.73401 2.16312 3.634 2.29627 3.50705 2.56255C3.37462 2.84034 3.23734 3.2088 3.03393 3.75682L2.08768 6.30584C1.88395 6.85474 1.81646 7.04347 1.79172 7.17497C1.61005 8.14152 2.25533 9.06908 3.22464 9.23524C3.35654 9.25781 3.55717 9.26129 4.14274 9.26129H5.07023C5.25717 9.26129 5.4593 9.25932 5.62672 9.27901C5.80364 9.29982 6.05492 9.35458 6.27179 9.551C6.37381 9.64347 6.45784 9.75424 6.51982 9.87719C6.65133 10.1382 6.6374 10.3942 6.61048 10.5702C6.58498 10.7367 6.52988 10.931 6.48022 11.1111L6.01439 12.8003L6.00501 12.8347C5.87513 13.3268 6.01464 13.8509 6.37184 14.2134L6.40935 14.251L6.46667 14.2864C6.52866 14.3088 6.60155 14.2912 6.64591 14.2364L6.65738 14.2239L6.65633 14.2228L10.3569 9.52078C10.4543 9.397 10.5491 9.27245 10.6633 9.1675C10.9166 8.93483 11.2325 8.78186 11.572 8.72669C11.7251 8.70184 11.8814 8.70376 12.0389 8.70376C12.7927 8.70376 13.0245 8.69651 13.1956 8.64748C13.6727 8.51051 14.0465 8.13768 14.1836 7.6606C14.2327 7.48941 14.2388 7.25727 14.2388 6.5028V4.85209Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.7484 11.1004C15.6274 11.8866 15.5288 12.5365 15.3882 13.0496C15.243 13.579 15.0339 14.0407 14.6455 14.4162C14.5638 14.4952 14.4775 14.5699 14.387 14.6387C13.9568 14.9656 13.4683 15.1012 12.923 15.1642C12.3944 15.2252 11.7374 15.2245 10.9419 15.2245H5.05809C4.2626 15.2245 3.6056 15.2252 3.07703 15.1642C2.53171 15.1012 2.04317 14.9656 1.61296 14.6387C1.52248 14.5699 1.43618 14.4952 1.35447 14.4162C0.966081 14.0407 0.756961 13.579 0.611839 13.0496C0.471162 12.5365 0.372616 11.8866 0.251648 11.1004L1.6458 10.8864C1.77181 11.7054 1.85791 12.2602 1.97209 12.6767C2.08174 13.0767 2.1976 13.2701 2.3344 13.4024C2.37603 13.4426 2.42074 13.4807 2.46683 13.5158C2.6184 13.6308 2.8272 13.7161 3.23912 13.7636C3.66812 13.8131 4.22949 13.8145 5.05809 13.8145H10.9419C11.7705 13.8145 12.3319 13.8131 12.7609 13.7636C13.1728 13.7161 13.3816 13.6308 13.5332 13.5158C13.5793 13.4807 13.624 13.4426 13.6656 13.4024C13.8024 13.2701 13.9183 13.0767 14.0279 12.6767C14.1421 12.2602 14.2282 11.7054 14.3542 10.8864L15.7484 11.1004ZM7.71503 0.558394C7.90371 0.52798 8.09629 0.52798 8.28498 0.558394C8.63706 0.615181 8.91293 0.790123 9.14944 0.985327C9.37579 1.17216 9.62518 1.42894 9.90478 1.7163L13.387 5.29491L12.8817 5.78753L12.3763 6.27908L8.89412 2.70047C8.82608 2.63054 8.76286 2.56716 8.70555 2.50873V10.5336H7.29445V2.50873C7.23714 2.56716 7.17392 2.63054 7.10588 2.70047L3.62368 6.27908L3.11835 5.78753L2.61302 5.29491L6.09522 1.7163C6.37482 1.42894 6.62422 1.17216 6.85057 0.985327C7.08707 0.790123 7.36294 0.615181 7.71503 0.558394Z" fill="currentColor"></path></svg></div></div></div><div style="flex: 1 1 0%;"></div></div></div><div class="_9663006" data-um-id="7"><div class="d29f3d7d ds-message _63c77b1" style="--panel-width: 0px;"><div class="fbb737a4">давай теперь эти классы применим к следующей задаче, пусть эти массивы будут координатами графиков массив размерностью 32 элемента, координата x это количество массивов которые прочитал основной поток, а y это элемент массива, всего будет 32 графика, так вот при поступлении данных мы должны перерисовывать эти графики</div></div><div class="_11d6b3a"><div class="_425ea0b"><div class="ds-flex _78e0558" style="align-items: flex-end; gap: 0px;"><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button d4910adc" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px; margin-left: 10px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.94073 1.34948C10.7047 0.902375 11.6503 0.90248 12.4143 1.34948C12.706 1.52022 12.9687 1.79124 13.3104 2.1329C13.652 2.47454 13.9231 2.73727 14.0938 3.029C14.5408 3.79301 14.5409 4.73862 14.0938 5.50257C13.9231 5.79422 13.652 6.0571 13.3104 6.39867L6.65929 13.0498C6.28065 13.4284 6.00692 13.7108 5.6654 13.9097C5.32388 14.1085 4.94312 14.2074 4.42702 14.3498L3.24391 14.6762C2.77524 14.8054 2.34535 14.9263 2.00128 14.9685C1.65193 15.0112 1.17961 15.0014 0.810733 14.6326C0.44189 14.2637 0.432076 13.7914 0.474829 13.442C0.517004 13.098 0.63787 12.668 0.767151 12.1994L1.09349 11.0163C1.23585 10.5002 1.33478 10.1194 1.53356 9.77791C1.73246 9.43639 2.01487 9.16266 2.39352 8.78402L9.04463 2.1329C9.38622 1.79132 9.64908 1.52023 9.94073 1.34948ZM15.5427 14.8399H7.5522L8.96704 13.425H15.5427V14.8399ZM3.39379 9.78429C2.96497 10.2131 2.84241 10.3437 2.75706 10.4901C2.6718 10.6366 2.61858 10.8079 2.4573 11.3926L2.13096 12.5757C2.0018 13.0439 1.92191 13.3419 1.8886 13.5536C2.10038 13.5204 2.39869 13.4417 2.86761 13.3123L4.05072 12.986C4.63541 12.8247 4.80666 12.7715 4.9532 12.6862C5.09965 12.6009 5.23019 12.4783 5.65902 12.0495L10.721 6.9865L8.45574 4.72128L3.39379 9.78429ZM11.7 2.57085C11.3774 2.38205 10.9777 2.38205 10.6551 2.57085C10.5602 2.62653 10.4487 2.72937 10.0449 3.13317L9.45601 3.72101L11.7212 5.98623L12.3101 5.3984C12.7139 4.99464 12.8168 4.88314 12.8725 4.78825C13.0612 4.46567 13.0612 4.06592 12.8725 3.74333C12.8168 3.64834 12.7145 3.53758 12.3101 3.13317C11.9057 2.72869 11.795 2.62647 11.7 2.57085Z" fill="currentColor"></path></svg></div></div></div></div></div></div><div class="_4f9bf79 _43c05b5" style="--assistant-last-margin-bottom: 32px;"><div class="ds-message _63c77b1" style="--panel-width: 0px;"><div class="_74c0879" style="--collapsible-area-title-height: 38px; --group-title-sticky-top: 0px;"><div class="_245c867"><div class="_5ab5d64"><div class="ds-icon _970ac5e" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.00198 6.6446C8.75032 6.6446 9.35738 7.25175 9.35745 8.00007C9.35745 8.74844 8.75036 9.35554 8.00198 9.35554C7.25373 9.35539 6.64749 8.74835 6.64749 8.00007C6.64756 7.25184 7.25377 6.64474 8.00198 6.6446Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.97171 1.29987C11.5854 0.718977 13.271 0.642258 14.3145 1.68561C15.3578 2.72908 15.2811 4.41472 14.7002 6.02839C14.4708 6.66567 14.1505 7.32943 13.75 8.00007C14.1505 8.67068 14.4708 9.3345 14.7002 9.97175C15.2811 11.5854 15.3579 13.2711 14.3145 14.3145C13.2711 15.3579 11.5854 15.2812 9.97171 14.7003C9.33446 14.4708 8.67065 14.1505 8.00003 13.7501C7.32939 14.1505 6.66564 14.4708 6.02835 14.7003C4.41467 15.2812 2.72905 15.3578 1.68558 14.3145C0.642216 13.2711 0.718931 11.5854 1.29984 9.97175C1.52921 9.3346 1.84871 8.67055 2.24905 8.00007C1.84872 7.32959 1.52921 6.66551 1.29984 6.02839C0.718913 4.41465 0.642131 2.72906 1.68558 1.68561C2.72903 0.642173 4.41462 0.718948 6.02835 1.29987C6.66547 1.52925 7.32956 1.84876 8.00003 2.24909C8.67051 1.84875 9.33457 1.52925 9.97171 1.29987ZM12.9405 9.21296C12.4392 9.89306 11.8617 10.5681 11.2149 11.2149C10.5681 11.8617 9.89302 12.4392 9.21292 12.9405C9.62538 13.1579 10.0271 13.338 10.4121 13.4766C11.9147 14.0175 12.9173 13.8738 13.3955 13.3956C13.8738 12.9173 14.0175 11.9147 13.4766 10.4122C13.338 10.0272 13.1579 9.62541 12.9405 9.21296ZM3.05862 9.21296C2.84127 9.62529 2.66203 10.0273 2.52347 10.4122C1.98258 11.9147 2.12633 12.9173 2.60452 13.3956C3.08284 13.8737 4.08551 14.0175 5.58792 13.4766C5.9727 13.3381 6.37395 13.1578 6.78616 12.9405C6.1063 12.4393 5.43174 11.8615 4.78519 11.2149C4.13829 10.568 3.55999 9.8932 3.05862 9.21296ZM7.99905 3.79206C7.23185 4.31425 6.45312 4.95519 5.70413 5.70417C4.95515 6.45315 4.31421 7.2319 3.79202 7.99909C4.31437 8.76672 4.95477 9.54659 5.70413 10.296C6.45315 11.045 7.23277 11.6849 8.00003 12.2071C8.76731 11.6849 9.54689 11.045 10.2959 10.296C11.045 9.54692 11.6848 8.76735 12.2071 8.00007C11.6848 7.23281 11.0449 6.45318 10.2959 5.70417C9.54656 4.95481 8.76668 4.3144 7.99905 3.79206ZM5.58792 2.52351C4.08539 1.98261 3.08278 2.12632 2.60452 2.60456C2.12627 3.08281 1.98258 4.08542 2.52347 5.58796C2.66195 5.97259 2.84146 6.37415 3.05862 6.7862C3.55989 6.10617 4.13846 5.43196 4.78519 4.78522C5.43193 4.13849 6.10612 3.55993 6.78616 3.05866C6.37411 2.8415 5.97255 2.66198 5.58792 2.52351ZM13.3955 2.60456C12.9173 2.12637 11.9146 1.98263 10.4121 2.52351C10.0272 2.66207 9.62525 2.84131 9.21292 3.05866C9.89316 3.56002 10.568 4.13833 11.2149 4.78522C11.8614 5.43178 12.4393 6.10633 12.9405 6.7862C13.1577 6.37399 13.3381 5.97273 13.4766 5.58796C14.0174 4.08555 13.8737 3.08287 13.3955 2.60456Z" fill="currentColor"></path></svg></div><span class="_5255ff8 _4d41763">Thought for 11 seconds</span><div class="ds-icon" style="font-size: 14px; width: 14px; height: 14px;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.8487 5.5L11.4239 5.92383L8.6973 8.65137C8.4416 8.90706 8.21565 9.13382 8.01175 9.29785C7.79915 9.46883 7.55598 9.61756 7.25003 9.66602C7.08438 9.69222 6.91568 9.69222 6.75003 9.66602C6.44408 9.61756 6.20091 9.46883 5.98831 9.29785C5.78442 9.13382 5.55846 8.90706 5.30276 8.65137L2.5762 5.92383L2.1514 5.5L3.00003 4.65137L3.42386 5.07617L6.1514 7.80273C6.42598 8.07732 6.59879 8.24849 6.74026 8.3623C6.87294 8.46904 6.92275 8.47813 6.93753 8.48047C6.97898 8.48703 7.02108 8.48703 7.06253 8.48047C7.07731 8.47813 7.12712 8.46904 7.2598 8.3623C7.40127 8.24849 7.57408 8.07732 7.84866 7.80273L10.5762 5.07617L11 4.65137L11.8487 5.5Z" fill="currentColor"></path></svg></div></div><div class="c99b79f8" style="opacity: 0;"></div></div><div class="c2b72bb8"></div><div class="e1675d8b ds-think-content _767406f"><div class="ddd26891 _9b52f6c" style="width: 16px; height: 16px;"><div class="a510c7ce _0652043"></div></div><div class="_9ecc93a"></div><div class="ds-markdown" style="--ds-md-zoom: 1.143;"><p class="ds-markdown-paragraph"><span>Мы будем использовать предыдущие наработки, но адаптируем их для работы с массивами из 32 элементов (предположим, что это данные с 32 каналов).</span><br><span>Предположим, что записывающий поток записывает в файл массивы из 32 чисел (например, qint32 или float).</span><br><span>Каждая запись - это один массив из 32 элементов.</span><br><span>Читающий поток будет читать только новые массивы и обновлять графики.</span></p><p class="ds-markdown-paragraph"><span>Структура файла: подряд идут массивы из 32 чисел. Каждое число - это, например, qint32.</span></p><p class="ds-markdown-paragraph"><span>Для простоты будем использовать QDataStream для записи и чтения.</span></p><p class="ds-markdown-paragraph"><span>Важно: мы хотим отображать 32 графика, где x - это индекс массива (т.е. номер считывания, начиная с 0), а y - значение элемента массива.</span></p><p class="ds-markdown-paragraph"><span>В читающем потоке мы будем накапливать данные для 32 графиков. Каждый график - это вектор значений для одного из 32 каналов.</span></p><p class="ds-markdown-paragraph"><span>Пусть записывающий поток записывает данные в файл, а читающий поток читает новые данные и добавляет их в буферы для каждого графика.</span></p><p class="ds-markdown-paragraph"><span>Мы будем использовать подход с запоминанием позиции.</span></p><p class="ds-markdown-paragraph"><span>Для отрисовки графиков будем использовать QCustomPlot или QChart, но в данном примере сосредоточимся на получении данных.</span></p><p class="ds-markdown-paragraph"><span>Пример класса для записи:</span></p></div></div><div class="_8f7678d"></div></div><div class="ds-markdown" style="--ds-md-zoom: 1.143;"><p class="ds-markdown-paragraph"><span>Отличная задача! Давайте создадим систему для записи и чтения массивов из 32 элементов (координаты Y для графиков) с последующей визуализацией. Вот полная реализация:</span></p><h3><span>1. Классы для работы с файлами (адаптированные под массивы)</span></h3><p class="ds-markdown-paragraph"><strong><span>filehandler.h</span></strong></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">FILEHANDLER_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FILEHANDLER_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFile&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDataStream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QThread&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">DataWriter</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
    Q_OBJECT
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">explicit</span> <span class="token function">DataWriter</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString<span class="token operator">&amp;</span> filename<span class="token punctuation">,</span> QObject<span class="token operator">*</span> parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token function">QThread</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">filename</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token keyword">void</span> <span class="token function">stopWriting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        keepWriting <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

signals<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">newDataWritten</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> packetCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>WriteOnly <span class="token operator">|</span> QIODevice<span class="token double-colon punctuation">::</span>Append<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Cannot open file for writing"</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        QDataStream <span class="token function">out</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> packetCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        keepWriting <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span>keepWriting <span class="token operator">&amp;&amp;</span> packetCounter <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ограничим для демонстрации</span>
            QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span> <span class="token function">data</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">// Генерируем тестовые данные - 32 синусоиды с разными фазами</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">qSin</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> M_PI <span class="token operator">*</span> packetCounter <span class="token operator">/</span> <span class="token number">50.0</span> <span class="token operator">+</span> i <span class="token operator">*</span> M_PI <span class="token operator">/</span> <span class="token number">16.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            out <span class="token operator">&lt;&lt;</span> data <span class="token operator">&lt;&lt;</span> packetCounter<span class="token punctuation">;</span>
            file<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            emit <span class="token function">newDataWritten</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> packetCounter<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            packetCounter<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 20 Hz</span>
        <span class="token punctuation">}</span>

        file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Writing finished"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    QString filename<span class="token punctuation">;</span>
    <span class="token keyword">bool</span> keepWriting <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">DataReader</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
    Q_OBJECT
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">explicit</span> <span class="token function">DataReader</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString<span class="token operator">&amp;</span> filename<span class="token punctuation">,</span> QObject<span class="token operator">*</span> parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token function">QThread</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">filename</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token keyword">void</span> <span class="token function">stopReading</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        keepReading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

signals<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">newDataRead</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> allChannels<span class="token punctuation">,</span> <span class="token keyword">int</span> packetCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">while</span> <span class="token punctuation">(</span>keepReading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Если файл перезаписан или это первое чтение</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> lastReadPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> lastReadPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    emit <span class="token function">resetRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Сигнал для сброса графиков</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">continue</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>lastReadPosition<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
            in<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

            QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span> data<span class="token punctuation">;</span>
            <span class="token keyword">int</span> packetCount<span class="token punctuation">;</span>
            <span class="token keyword">bool</span> newData <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

            <span class="token comment">// Инициализируем массивы для всех каналов</span>
            QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span> <span class="token function">allChannels</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                allChannels<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">QVector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                in <span class="token operator">&gt;&gt;</span> data <span class="token operator">&gt;&gt;</span> packetCount<span class="token punctuation">;</span>
                
                <span class="token keyword">if</span> <span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> QDataStream<span class="token double-colon punctuation">::</span>Ok <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">32</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// Добавляем точку для каждого канала</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        allChannels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    newData <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                    lastReadPosition <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>newData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                emit <span class="token function">newDataRead</span><span class="token punctuation">(</span>allChannels<span class="token punctuation">,</span> packetCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Проверяем чаще чем запись</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    QString filename<span class="token punctuation">;</span>
    qint64 lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> keepReading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// FILEHANDLER_H</span></span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>2. Виджет для отображения графиков</span></h3><p class="ds-markdown-paragraph"><strong><span>graphwidget.h</span></strong></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">GRAPHWIDGET_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GRAPHWIDGET_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTimer&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QGridLayout&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QtCharts&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">GraphWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span> <span class="token punctuation">{</span>
    Q_OBJECT

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">explicit</span> <span class="token function">GraphWidget</span><span class="token punctuation">(</span>QWidget<span class="token operator">*</span> parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">updateGraphs</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> allChannels<span class="token punctuation">,</span> <span class="token keyword">int</span> currentCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">clearGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">setupGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">updateChart</span><span class="token punctuation">(</span>QChart<span class="token operator">*</span> chart<span class="token punctuation">,</span> QLineSeries<span class="token operator">*</span> series<span class="token punctuation">,</span> <span class="token keyword">const</span> QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> channel<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QGridLayout<span class="token operator">*</span> layout<span class="token punctuation">;</span>
    QVector<span class="token operator">&lt;</span>QChartView<span class="token operator">*</span><span class="token operator">&gt;</span> chartViews<span class="token punctuation">;</span>
    QVector<span class="token operator">&lt;</span>QLineSeries<span class="token operator">*</span><span class="token operator">&gt;</span> series<span class="token punctuation">;</span>
    QVector<span class="token operator">&lt;</span>QChart<span class="token operator">*</span><span class="token operator">&gt;</span> charts<span class="token punctuation">;</span>
    
    <span class="token keyword">int</span> maxPoints <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span> <span class="token comment">// Максимальное количество точек на графике</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// GRAPHWIDGET_H</span></span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><strong><span>graphwidget.cpp</span></strong></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"graphwidget.h"</span></span>

<span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">GraphWidget</span><span class="token punctuation">(</span>QWidget<span class="token operator">*</span> parent<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGridLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setupGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">setupGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Создаем 32 графика в сетке 8x4</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">auto</span> chart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Channel %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">setMargins</span><span class="token punctuation">(</span><span class="token function">QMargins</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">auto</span> series <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLineSeries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span>series<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>series<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">addSeries</span><span class="token punctuation">(</span>series<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        chart<span class="token operator">-&gt;</span><span class="token function">createDefaultAxes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">axisX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> maxPoints<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">axisY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">auto</span> chartView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QChartView</span><span class="token punctuation">(</span>chart<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chartView<span class="token operator">-&gt;</span><span class="token function">setRenderHint</span><span class="token punctuation">(</span>QPainter<span class="token double-colon punctuation">::</span>Antialiasing<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chartView<span class="token operator">-&gt;</span><span class="token function">setMinimumSize</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        chartViews<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>chartView<span class="token punctuation">)</span><span class="token punctuation">;</span>
        charts<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>chart<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>chartView<span class="token punctuation">,</span> i <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">,</span> i <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">updateGraphs</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> allChannels<span class="token punctuation">,</span> <span class="token keyword">int</span> currentCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> allChannels<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">updateChart</span><span class="token punctuation">(</span>charts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> series<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> allChannels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">updateChart</span><span class="token punctuation">(</span>QChart<span class="token operator">*</span> chart<span class="token punctuation">,</span> QLineSeries<span class="token operator">*</span> series<span class="token punctuation">,</span> <span class="token keyword">const</span> QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    series<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">int</span> startIndex <span class="token operator">=</span> <span class="token function">qMax</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> maxPoints<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> displayCount <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startIndex<span class="token punctuation">;</span>
    
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> displayCount<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> x <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token comment">// Относительная позиция (последние maxPoints точек)</span>
        <span class="token keyword">float</span> y <span class="token operator">=</span> data<span class="token punctuation">[</span>startIndex <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        series<span class="token operator">-&gt;</span><span class="token function">append</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Автоматическое масштабирование по Y</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">float</span> minY <span class="token operator">=</span> <span class="token operator">*</span>std<span class="token double-colon punctuation">::</span><span class="token function">min_element</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> displayCount<span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> maxY <span class="token operator">=</span> <span class="token operator">*</span>std<span class="token double-colon punctuation">::</span><span class="token function">max_element</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> displayCount<span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> margin <span class="token operator">=</span> <span class="token punctuation">(</span>maxY <span class="token operator">-</span> minY<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
        
        chart<span class="token operator">-&gt;</span><span class="token function">axisY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span>minY <span class="token operator">-</span> margin<span class="token punctuation">,</span> maxY <span class="token operator">+</span> margin<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    chart<span class="token operator">-&gt;</span><span class="token function">axisX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> displayCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">clearGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> s <span class="token operator">:</span> series<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        s<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>3. Главное окно приложения</span></h3><p class="ds-markdown-paragraph"><strong><span>mainwindow.h</span></strong></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">MAINWINDOW_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAINWINDOW_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMainWindow&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVBoxLayout&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QHBoxLayout&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QScrollArea&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"filehandler.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"graphwidget.h"</span></span>

<span class="token keyword">class</span> <span class="token class-name">MainWindow</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QMainWindow</span></span> <span class="token punctuation">{</span>
    Q_OBJECT

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget<span class="token operator">*</span> parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">startRecording</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">stopRecording</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">onNewDataRead</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> allChannels<span class="token punctuation">,</span> <span class="token keyword">int</span> packetCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">onResetRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">setupUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    DataWriter<span class="token operator">*</span> writer<span class="token punctuation">;</span>
    DataReader<span class="token operator">*</span> reader<span class="token punctuation">;</span>
    GraphWidget<span class="token operator">*</span> graphWidget<span class="token punctuation">;</span>
    QScrollArea<span class="token operator">*</span> scrollArea<span class="token punctuation">;</span>
    QPushButton<span class="token operator">*</span> startButton<span class="token punctuation">;</span>
    QPushButton<span class="token operator">*</span> stopButton<span class="token punctuation">;</span>
    QLabel<span class="token operator">*</span> statusLabel<span class="token punctuation">;</span>
    
    QString filename <span class="token operator">=</span> <span class="token string">"waveform_data.bin"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// MAINWINDOW_H</span></span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><strong><span>mainwindow.cpp</span></strong></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"mainwindow.h"</span></span>

<span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget<span class="token operator">*</span> parent<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setupUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">DataWriter</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">DataReader</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token function">connect</span><span class="token punctuation">(</span>reader<span class="token punctuation">,</span> <span class="token operator">&amp;</span>DataReader<span class="token double-colon punctuation">::</span>newDataRead<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>onNewDataRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>reader<span class="token punctuation">,</span> <span class="token operator">&amp;</span>DataReader<span class="token double-colon punctuation">::</span>resetRequested<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>onResetRequested<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>writer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>DataWriter<span class="token double-colon punctuation">::</span>newDataWritten<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        statusLabel<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Packets written: %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">stopRecording</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">setupUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    QWidget<span class="token operator">*</span> centralWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QVBoxLayout<span class="token operator">*</span> mainLayout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QVBoxLayout</span><span class="token punctuation">(</span>centralWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Панель управления</span>
    QHBoxLayout<span class="token operator">*</span> controlLayout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QHBoxLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    startButton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"Start Recording"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    stopButton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"Stop Recording"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    statusLabel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"Ready"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>startButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>stopButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>statusLabel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addStretch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Графики</span>
    graphWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">GraphWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    scrollArea <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QScrollArea</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    scrollArea<span class="token operator">-&gt;</span><span class="token function">setWidget</span><span class="token punctuation">(</span>graphWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    scrollArea<span class="token operator">-&gt;</span><span class="token function">setWidgetResizable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    mainLayout<span class="token operator">-&gt;</span><span class="token function">addLayout</span><span class="token punctuation">(</span>controlLayout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mainLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>scrollArea<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token function">setCentralWidget</span><span class="token punctuation">(</span>centralWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">1200</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token function">connect</span><span class="token punctuation">(</span>startButton<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>startRecording<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>stopButton<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>stopRecording<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    stopButton<span class="token operator">-&gt;</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">startRecording</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Очищаем файл при начале новой записи</span>
    <span class="token class-name">QFile</span><span class="token double-colon punctuation">::</span><span class="token function">remove</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    reader<span class="token operator">-&gt;</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    writer<span class="token operator">-&gt;</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    startButton<span class="token operator">-&gt;</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    stopButton<span class="token operator">-&gt;</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    statusLabel<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Recording started"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">stopRecording</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>writer <span class="token operator">&amp;&amp;</span> writer<span class="token operator">-&gt;</span><span class="token function">isRunning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        writer<span class="token operator">-&gt;</span><span class="token function">stopWriting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        writer<span class="token operator">-&gt;</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>reader <span class="token operator">&amp;&amp;</span> reader<span class="token operator">-&gt;</span><span class="token function">isRunning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        reader<span class="token operator">-&gt;</span><span class="token function">stopReading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        reader<span class="token operator">-&gt;</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    startButton<span class="token operator">-&gt;</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    stopButton<span class="token operator">-&gt;</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    statusLabel<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Recording stopped"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">onNewDataRead</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> allChannels<span class="token punctuation">,</span> <span class="token keyword">int</span> packetCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    graphWidget<span class="token operator">-&gt;</span><span class="token function">updateGraphs</span><span class="token punctuation">(</span>allChannels<span class="token punctuation">,</span> packetCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    statusLabel<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Packets read: %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>packetCount<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">onResetRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    graphWidget<span class="token operator">-&gt;</span><span class="token function">clearGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>4. main.cpp</span></h3><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"mainwindow.h"</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    MainWindow window<span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>5. CMakeLists.txt</span></h3><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cmake</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.16</span><span class="token punctuation">)</span>
<span class="token keyword">project</span><span class="token punctuation">(</span>WaveformViewer<span class="token punctuation">)</span>

<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_STANDARD</span> <span class="token number">17</span><span class="token punctuation">)</span>
<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_STANDARD_REQUIRED</span> <span class="token boolean">ON</span><span class="token punctuation">)</span>

<span class="token keyword">find_package</span><span class="token punctuation">(</span>Qt6 REQUIRED COMPONENTS Core Widgets Charts Concurrent<span class="token punctuation">)</span>

<span class="token function">qt_standard_project_setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">qt_add_executable</span><span class="token punctuation">(</span>WaveformViewer
    main.cpp
    mainwindow.cpp
    graphwidget.cpp
<span class="token punctuation">)</span>

<span class="token function">qt_add_resources</span><span class="token punctuation">(</span>WaveformViewer <span class="token string">"resources"</span>
    resources.qrc
<span class="token punctuation">)</span>

<span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>WaveformViewer <span class="token inserted class-name">Qt6::Core</span> <span class="token inserted class-name">Qt6::Widgets</span> <span class="token inserted class-name">Qt6::Charts</span> <span class="token inserted class-name">Qt6::Concurrent</span><span class="token punctuation">)</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>Особенности реализации:</span></h3><ol start="1"><li><p class="ds-markdown-paragraph"><strong><span>Инкрементальное чтение</span></strong><span>: Читатель получает только новые данные после последней позиции</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>32 графика</span></strong><span>: Каждый отображает данные своего канала</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Прокрутка данных</span></strong><span>: Отображаются только последние 200 точек</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Автомасштабирование</span></strong><span>: Графики автоматически подстраиваются под диапазон данных</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Сброс при перезаписи</span></strong><span>: Если файл перезаписан, графики очищаются</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Статус в реальном времени</span></strong><span>: Отображается количество записанных/прочитанных пакетов</span></p></li></ol><p class="ds-markdown-paragraph"><span>Эта система эффективно обрабатывает поток данных и перерисовывает графики только при поступлении новой информации, что обеспечивает плавную визуализацию даже при высоких частотах обновления.</span></p></div></div><div class="ds-theme" style="--ds-rgb-hover: 245 245 245; --ds-rgb-primary: 77 107 254; --ds-button-hover-color: #2563EB; --ds-bordered-secondary-button-color: var(--dsr-text-1); --ds-input-prefix-color: var(--dsr-text-1);"></div><div class="ds-flex _0a3d93b" style="align-items: center; gap: 10px;"><div class="ds-flex _965abe9" style="align-items: center; gap: 10px;"><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.92142 0.349213C10.3745 0.349295 12.5564 1.50526 13.9558 3.299L15.1282 2.12765C15.3304 1.92552 15.6768 2.06949 15.6768 2.35544V5.53929C15.6766 5.71632 15.533 5.85982 15.356 5.86008H12.1711C11.8855 5.85976 11.7427 5.51471 11.9443 5.31255L12.9642 4.29062C11.8238 2.74311 9.98914 1.74112 7.92142 1.74104C4.46442 1.74104 1.66239 4.54307 1.66239 8.00006C1.66239 11.4571 4.46442 14.2591 7.92142 14.2591C11.3783 14.2589 14.1804 11.457 14.1804 8.00006H15.5723C15.5723 12.2252 12.1465 15.6508 7.92142 15.6509C3.6962 15.6509 0.270569 12.2253 0.270569 8.00006C0.270569 3.77485 3.6962 0.349213 7.92142 0.349213Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.27861 0.811633C8.81985 0.142255 9.79016 0.0422445 10.4537 0.557662L10.5823 0.669367L10.6065 0.693605L10.6097 0.695713L10.6392 0.72522C11.3549 1.44685 11.6336 2.49474 11.3716 3.47675L11.3705 3.48097L11.361 3.5168L11.36 3.51891L10.8889 5.2261C10.8796 5.26003 10.8706 5.29164 10.8626 5.32094C10.8934 5.32101 10.927 5.322 10.9627 5.322H11.9006C12.4263 5.322 12.783 5.31906 13.0651 5.36731C14.8182 5.66725 15.9851 7.34574 15.6564 9.09363C15.6035 9.37493 15.4769 9.70926 15.2939 10.2023L14.337 12.7799C14.1401 13.3105 13.9773 13.7518 13.8101 14.1025C13.6375 14.4646 13.4385 14.7794 13.1441 15.0425C12.9712 15.197 12.7801 15.3303 12.5751 15.4387C12.2259 15.6232 11.8608 15.7 11.4612 15.7359C11.0742 15.7705 10.6034 15.7696 10.0374 15.7696H4.87371C4.08047 15.7696 3.42922 15.7703 2.90728 15.7138C2.37206 15.6558 1.88985 15.5311 1.4667 15.2237C1.22409 15.0475 1.01072 14.834 0.834405 14.5914C0.52696 14.1683 0.401312 13.6861 0.343323 13.1509C0.286761 12.6288 0.28747 11.977 0.28747 11.1834V9.51411C0.28747 8.84785 0.281286 8.36721 0.399176 7.95656C0.671091 7.00941 1.41109 6.26838 2.35823 5.99645C2.76888 5.87855 3.24952 5.88579 3.91579 5.88579C4.11977 5.88579 4.14542 5.88325 4.16238 5.88053C4.23526 5.8687 4.30403 5.83669 4.35839 5.78674C4.37104 5.77511 4.38755 5.7561 4.51436 5.59494L8.25648 0.839033L8.25754 0.837979L8.27861 0.811633ZM1.69116 11.1834C1.69116 12.0083 1.69211 12.5712 1.73859 13.0002C1.78365 13.4158 1.86467 13.6222 1.96937 13.7663C2.05914 13.8898 2.16727 13.999 2.29079 14.0888C2.43495 14.1935 2.6421 14.2745 3.05797 14.3195C3.45891 14.363 3.97631 14.3656 4.71564 14.3659C4.30795 13.8053 4.06447 13.1172 4.06437 12.371V8.59412H5.46807V12.371C5.46832 13.4734 6.3616 14.367 7.46401 14.367H10.0374C10.6286 14.367 11.0269 14.3663 11.3368 14.3385C11.6339 14.3118 11.7956 14.2639 11.9196 14.1984C12.024 14.1431 12.1213 14.0747 12.2094 13.996C12.3139 13.9025 12.4151 13.7679 12.5434 13.4986C12.6774 13.2177 12.8162 12.8451 13.0219 12.2909L13.9787 9.71328C14.1848 9.15822 14.253 8.96737 14.278 8.83439C14.4617 7.85698 13.8092 6.91901 12.829 6.75098C12.6956 6.72816 12.4928 6.72464 11.9006 6.72464H10.9627C10.7737 6.72464 10.5693 6.72663 10.4 6.70672C10.2211 6.68568 9.96696 6.6303 9.74764 6.43167C9.64448 6.33817 9.5595 6.22616 9.49683 6.10183C9.36384 5.8379 9.37793 5.57905 9.40515 5.40104C9.43094 5.23267 9.48666 5.03623 9.53688 4.8541L10.0079 3.14585L10.0174 3.11108C10.1488 2.61344 10.0077 2.08344 9.64648 1.71687L9.60854 1.67893L9.55058 1.6431C9.48789 1.62049 9.41419 1.6382 9.36932 1.69368L9.35773 1.70633L9.35878 1.70738L5.61666 6.46224C5.51816 6.58741 5.42231 6.71336 5.30683 6.81948C5.05069 7.05477 4.73119 7.20945 4.3879 7.26525C4.23309 7.29038 4.07507 7.28843 3.91579 7.28843C3.1535 7.28843 2.9191 7.29576 2.74604 7.34534C2.26358 7.48385 1.88558 7.86087 1.74702 8.34331C1.69732 8.51642 1.69116 8.75116 1.69116 9.51411V11.1834Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.72451 15.1086C7.18929 15.7706 6.22975 15.8695 5.57357 15.3598L5.44643 15.2493L5.42247 15.2253L5.41934 15.2233L5.39016 15.1941C4.68239 14.4805 4.40679 13.4442 4.66589 12.4731L4.66693 12.4689L4.67631 12.4335L4.67735 12.4314L5.14318 10.7432C5.15243 10.7096 5.1613 10.6784 5.16923 10.6494C5.13878 10.6493 5.10558 10.6484 5.07023 10.6484H4.14274C3.62288 10.6484 3.27015 10.6513 2.9912 10.6035C1.25757 10.3069 0.103662 8.64709 0.42863 6.91861C0.480965 6.64044 0.606164 6.30981 0.787119 5.8223L1.73336 3.27328C1.92812 2.74859 2.08912 2.31215 2.25442 1.96542C2.42515 1.60731 2.62191 1.296 2.91304 1.03584C3.08408 0.883016 3.273 0.751185 3.47579 0.644009C3.82102 0.461569 4.18214 0.385575 4.57731 0.350131C4.95993 0.315849 5.42553 0.316783 5.98521 0.316783H11.0916C11.876 0.316783 12.52 0.316134 13.0362 0.372015C13.5655 0.429358 14.0423 0.552599 14.4608 0.856601C14.7007 1.03091 14.9117 1.24199 15.086 1.48187C15.3901 1.90033 15.5143 2.37716 15.5717 2.90645C15.6276 3.42275 15.6269 4.06727 15.6269 4.85209V6.5028C15.6269 7.16167 15.633 7.63697 15.5164 8.04306C15.2475 8.97969 14.5158 9.71248 13.5791 9.9814C13.173 10.098 12.6977 10.0908 12.0389 10.0908C11.8372 10.0908 11.8118 10.0933 11.795 10.096C11.723 10.1077 11.6549 10.1394 11.6012 10.1888C11.5887 10.2003 11.5724 10.2191 11.447 10.3784L7.74639 15.0815L7.74535 15.0826L7.72451 15.1086ZM14.2388 4.85209C14.2388 4.03635 14.2379 3.47971 14.1919 3.05547C14.1473 2.64449 14.0672 2.44037 13.9637 2.29785C13.8749 2.17569 13.768 2.06776 13.6458 1.97896C13.5033 1.87539 13.2984 1.7953 12.8872 1.75074C12.4907 1.70779 11.979 1.70518 11.2479 1.70489C11.6511 2.25924 11.8918 2.93974 11.8919 3.67762V7.41257H10.5038V3.67762C10.5036 2.58751 9.62023 1.70384 8.53007 1.70384H5.98521C5.40065 1.70384 5.00679 1.70449 4.70028 1.73198C4.40651 1.75836 4.24662 1.80577 4.12399 1.87058C4.02069 1.92518 3.92452 1.99283 3.8374 2.07067C3.73401 2.16312 3.634 2.29627 3.50705 2.56255C3.37462 2.84034 3.23734 3.2088 3.03393 3.75682L2.08768 6.30584C1.88395 6.85474 1.81646 7.04347 1.79172 7.17497C1.61005 8.14152 2.25533 9.06908 3.22464 9.23524C3.35654 9.25781 3.55717 9.26129 4.14274 9.26129H5.07023C5.25717 9.26129 5.4593 9.25932 5.62672 9.27901C5.80364 9.29982 6.05492 9.35458 6.27179 9.551C6.37381 9.64347 6.45784 9.75424 6.51982 9.87719C6.65133 10.1382 6.6374 10.3942 6.61048 10.5702C6.58498 10.7367 6.52988 10.931 6.48022 11.1111L6.01439 12.8003L6.00501 12.8347C5.87513 13.3268 6.01464 13.8509 6.37184 14.2134L6.40935 14.251L6.46667 14.2864C6.52866 14.3088 6.60155 14.2912 6.64591 14.2364L6.65738 14.2239L6.65633 14.2228L10.3569 9.52078C10.4543 9.397 10.5491 9.27245 10.6633 9.1675C10.9166 8.93483 11.2325 8.78186 11.572 8.72669C11.7251 8.70184 11.8814 8.70376 12.0389 8.70376C12.7927 8.70376 13.0245 8.69651 13.1956 8.64748C13.6727 8.51051 14.0465 8.13768 14.1836 7.6606C14.2327 7.48941 14.2388 7.25727 14.2388 6.5028V4.85209Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.7484 11.1004C15.6274 11.8866 15.5288 12.5365 15.3882 13.0496C15.243 13.579 15.0339 14.0407 14.6455 14.4162C14.5638 14.4952 14.4775 14.5699 14.387 14.6387C13.9568 14.9656 13.4683 15.1012 12.923 15.1642C12.3944 15.2252 11.7374 15.2245 10.9419 15.2245H5.05809C4.2626 15.2245 3.6056 15.2252 3.07703 15.1642C2.53171 15.1012 2.04317 14.9656 1.61296 14.6387C1.52248 14.5699 1.43618 14.4952 1.35447 14.4162C0.966081 14.0407 0.756961 13.579 0.611839 13.0496C0.471162 12.5365 0.372616 11.8866 0.251648 11.1004L1.6458 10.8864C1.77181 11.7054 1.85791 12.2602 1.97209 12.6767C2.08174 13.0767 2.1976 13.2701 2.3344 13.4024C2.37603 13.4426 2.42074 13.4807 2.46683 13.5158C2.6184 13.6308 2.8272 13.7161 3.23912 13.7636C3.66812 13.8131 4.22949 13.8145 5.05809 13.8145H10.9419C11.7705 13.8145 12.3319 13.8131 12.7609 13.7636C13.1728 13.7161 13.3816 13.6308 13.5332 13.5158C13.5793 13.4807 13.624 13.4426 13.6656 13.4024C13.8024 13.2701 13.9183 13.0767 14.0279 12.6767C14.1421 12.2602 14.2282 11.7054 14.3542 10.8864L15.7484 11.1004ZM7.71503 0.558394C7.90371 0.52798 8.09629 0.52798 8.28498 0.558394C8.63706 0.615181 8.91293 0.790123 9.14944 0.985327C9.37579 1.17216 9.62518 1.42894 9.90478 1.7163L13.387 5.29491L12.8817 5.78753L12.3763 6.27908L8.89412 2.70047C8.82608 2.63054 8.76286 2.56716 8.70555 2.50873V10.5336H7.29445V2.50873C7.23714 2.56716 7.17392 2.63054 7.10588 2.70047L3.62368 6.27908L3.11835 5.78753L2.61302 5.29491L6.09522 1.7163C6.37482 1.42894 6.62422 1.17216 6.85057 0.985327C7.08707 0.790123 7.36294 0.615181 7.71503 0.558394Z" fill="currentColor"></path></svg></div></div></div><div style="flex: 1 1 0%;"></div></div></div><div class="_9663006" data-um-id="9"><div class="d29f3d7d ds-message _63c77b1" style="--panel-width: 0px;"><div class="fbb737a4">а как допустим посмотреть полную историю графика, если использовать ограничение на последние 200 точек</div></div><div class="_11d6b3a"><div class="_425ea0b"><div class="ds-flex _78e0558" style="align-items: flex-end; gap: 0px;"><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button d4910adc" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px; margin-left: 10px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.94073 1.34948C10.7047 0.902375 11.6503 0.90248 12.4143 1.34948C12.706 1.52022 12.9687 1.79124 13.3104 2.1329C13.652 2.47454 13.9231 2.73727 14.0938 3.029C14.5408 3.79301 14.5409 4.73862 14.0938 5.50257C13.9231 5.79422 13.652 6.0571 13.3104 6.39867L6.65929 13.0498C6.28065 13.4284 6.00692 13.7108 5.6654 13.9097C5.32388 14.1085 4.94312 14.2074 4.42702 14.3498L3.24391 14.6762C2.77524 14.8054 2.34535 14.9263 2.00128 14.9685C1.65193 15.0112 1.17961 15.0014 0.810733 14.6326C0.44189 14.2637 0.432076 13.7914 0.474829 13.442C0.517004 13.098 0.63787 12.668 0.767151 12.1994L1.09349 11.0163C1.23585 10.5002 1.33478 10.1194 1.53356 9.77791C1.73246 9.43639 2.01487 9.16266 2.39352 8.78402L9.04463 2.1329C9.38622 1.79132 9.64908 1.52023 9.94073 1.34948ZM15.5427 14.8399H7.5522L8.96704 13.425H15.5427V14.8399ZM3.39379 9.78429C2.96497 10.2131 2.84241 10.3437 2.75706 10.4901C2.6718 10.6366 2.61858 10.8079 2.4573 11.3926L2.13096 12.5757C2.0018 13.0439 1.92191 13.3419 1.8886 13.5536C2.10038 13.5204 2.39869 13.4417 2.86761 13.3123L4.05072 12.986C4.63541 12.8247 4.80666 12.7715 4.9532 12.6862C5.09965 12.6009 5.23019 12.4783 5.65902 12.0495L10.721 6.9865L8.45574 4.72128L3.39379 9.78429ZM11.7 2.57085C11.3774 2.38205 10.9777 2.38205 10.6551 2.57085C10.5602 2.62653 10.4487 2.72937 10.0449 3.13317L9.45601 3.72101L11.7212 5.98623L12.3101 5.3984C12.7139 4.99464 12.8168 4.88314 12.8725 4.78825C13.0612 4.46567 13.0612 4.06592 12.8725 3.74333C12.8168 3.64834 12.7145 3.53758 12.3101 3.13317C11.9057 2.72869 11.795 2.62647 11.7 2.57085Z" fill="currentColor"></path></svg></div></div></div></div></div></div><div class="_4f9bf79 _43c05b5" style="--assistant-last-margin-bottom: 32px;"><div class="ds-message _63c77b1" style="--panel-width: 0px;"><div class="_74c0879" style="--collapsible-area-title-height: 38px; --group-title-sticky-top: 0px;"><div class="_245c867"><div class="_5ab5d64"><div class="ds-icon _970ac5e" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.00198 6.6446C8.75032 6.6446 9.35738 7.25175 9.35745 8.00007C9.35745 8.74844 8.75036 9.35554 8.00198 9.35554C7.25373 9.35539 6.64749 8.74835 6.64749 8.00007C6.64756 7.25184 7.25377 6.64474 8.00198 6.6446Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.97171 1.29987C11.5854 0.718977 13.271 0.642258 14.3145 1.68561C15.3578 2.72908 15.2811 4.41472 14.7002 6.02839C14.4708 6.66567 14.1505 7.32943 13.75 8.00007C14.1505 8.67068 14.4708 9.3345 14.7002 9.97175C15.2811 11.5854 15.3579 13.2711 14.3145 14.3145C13.2711 15.3579 11.5854 15.2812 9.97171 14.7003C9.33446 14.4708 8.67065 14.1505 8.00003 13.7501C7.32939 14.1505 6.66564 14.4708 6.02835 14.7003C4.41467 15.2812 2.72905 15.3578 1.68558 14.3145C0.642216 13.2711 0.718931 11.5854 1.29984 9.97175C1.52921 9.3346 1.84871 8.67055 2.24905 8.00007C1.84872 7.32959 1.52921 6.66551 1.29984 6.02839C0.718913 4.41465 0.642131 2.72906 1.68558 1.68561C2.72903 0.642173 4.41462 0.718948 6.02835 1.29987C6.66547 1.52925 7.32956 1.84876 8.00003 2.24909C8.67051 1.84875 9.33457 1.52925 9.97171 1.29987ZM12.9405 9.21296C12.4392 9.89306 11.8617 10.5681 11.2149 11.2149C10.5681 11.8617 9.89302 12.4392 9.21292 12.9405C9.62538 13.1579 10.0271 13.338 10.4121 13.4766C11.9147 14.0175 12.9173 13.8738 13.3955 13.3956C13.8738 12.9173 14.0175 11.9147 13.4766 10.4122C13.338 10.0272 13.1579 9.62541 12.9405 9.21296ZM3.05862 9.21296C2.84127 9.62529 2.66203 10.0273 2.52347 10.4122C1.98258 11.9147 2.12633 12.9173 2.60452 13.3956C3.08284 13.8737 4.08551 14.0175 5.58792 13.4766C5.9727 13.3381 6.37395 13.1578 6.78616 12.9405C6.1063 12.4393 5.43174 11.8615 4.78519 11.2149C4.13829 10.568 3.55999 9.8932 3.05862 9.21296ZM7.99905 3.79206C7.23185 4.31425 6.45312 4.95519 5.70413 5.70417C4.95515 6.45315 4.31421 7.2319 3.79202 7.99909C4.31437 8.76672 4.95477 9.54659 5.70413 10.296C6.45315 11.045 7.23277 11.6849 8.00003 12.2071C8.76731 11.6849 9.54689 11.045 10.2959 10.296C11.045 9.54692 11.6848 8.76735 12.2071 8.00007C11.6848 7.23281 11.0449 6.45318 10.2959 5.70417C9.54656 4.95481 8.76668 4.3144 7.99905 3.79206ZM5.58792 2.52351C4.08539 1.98261 3.08278 2.12632 2.60452 2.60456C2.12627 3.08281 1.98258 4.08542 2.52347 5.58796C2.66195 5.97259 2.84146 6.37415 3.05862 6.7862C3.55989 6.10617 4.13846 5.43196 4.78519 4.78522C5.43193 4.13849 6.10612 3.55993 6.78616 3.05866C6.37411 2.8415 5.97255 2.66198 5.58792 2.52351ZM13.3955 2.60456C12.9173 2.12637 11.9146 1.98263 10.4121 2.52351C10.0272 2.66207 9.62525 2.84131 9.21292 3.05866C9.89316 3.56002 10.568 4.13833 11.2149 4.78522C11.8614 5.43178 12.4393 6.10633 12.9405 6.7862C13.1577 6.37399 13.3381 5.97273 13.4766 5.58796C14.0174 4.08555 13.8737 3.08287 13.3955 2.60456Z" fill="currentColor"></path></svg></div><span class="_5255ff8 _4d41763">Thought for 118 seconds</span><div class="ds-icon" style="font-size: 14px; width: 14px; height: 14px;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.8487 5.5L11.4239 5.92383L8.6973 8.65137C8.4416 8.90706 8.21565 9.13382 8.01175 9.29785C7.79915 9.46883 7.55598 9.61756 7.25003 9.66602C7.08438 9.69222 6.91568 9.69222 6.75003 9.66602C6.44408 9.61756 6.20091 9.46883 5.98831 9.29785C5.78442 9.13382 5.55846 8.90706 5.30276 8.65137L2.5762 5.92383L2.1514 5.5L3.00003 4.65137L3.42386 5.07617L6.1514 7.80273C6.42598 8.07732 6.59879 8.24849 6.74026 8.3623C6.87294 8.46904 6.92275 8.47813 6.93753 8.48047C6.97898 8.48703 7.02108 8.48703 7.06253 8.48047C7.07731 8.47813 7.12712 8.46904 7.2598 8.3623C7.40127 8.24849 7.57408 8.07732 7.84866 7.80273L10.5762 5.07617L11 4.65137L11.8487 5.5Z" fill="currentColor"></path></svg></div></div><div class="c99b79f8" style="opacity: 0;"></div></div><div class="c2b72bb8"></div><div class="e1675d8b ds-think-content _767406f"><div class="ddd26891 _9b52f6c" style="width: 16px; height: 16px;"><div class="a510c7ce _0652043"></div></div><div class="_9ecc93a"></div><div class="ds-markdown" style="--ds-md-zoom: 1.143;"><p class="ds-markdown-paragraph"><span>Для отображения полной истории графика вместо ограничения последними 200 точками, мы можем изменить логику так, чтобы на графике отображались все данные с начала записи. Однако, если данных становится очень много, это может замедлить рендеринг. Поэтому можно предложить два варианта:</span></p><ol start="1"><li><p class="ds-markdown-paragraph"><span>Отображать все данные без ограничений (но предупредить о возможных проблемах с производительностью при большом количестве данных).</span></p></li><li><p class="ds-markdown-paragraph"><span>Реализовать возможность масштабирования и прокрутки графика, чтобы пользователь мог просматривать всю историю.</span></p></li></ol><p class="ds-markdown-paragraph"><span>Давайте модифицируем наш класс GraphWidget для отображения всей истории данных. Мы уберем ограничение в 200 точек и будем обновлять оси X, чтобы они охватывали весь диапазон данных.</span></p><p class="ds-markdown-paragraph"><span>Однако, если данных станет очень много (десятки тысяч точек), то рендеринг может замедлиться. В таком случае можно использовать методы уменьшения данных (downsampling) для отображения, но это сложно. В качестве альтернативы, мы можем использовать QChart с возможностью zoom и scroll, чтобы пользователь мог сам управлять просмотром.</span></p><p class="ds-markdown-paragraph"><span>В Qt Charts для этого можно использовать QChartView и включить возможности zoom и scroll.</span></p><p class="ds-markdown-paragraph"><span>Давайте переделаем GraphWidget:</span></p><ul><li><p class="ds-markdown-paragraph"><span>Уберем ограничение на количество точек.</span></p></li><li><p class="ds-markdown-paragraph"><span>Включим возможность zoom и scroll в QChartView.</span></p></li><li><p class="ds-markdown-paragraph"><span>Будем обновлять ось X так, чтобы она охватывала все данные.</span></p></li></ul><p class="ds-markdown-paragraph"><span>Но note: у нас 32 графика, и если данных много, то производительность может упасть. Поэтому, если мы ожидаем много данных, то лучше оставить ограничение или реализовать downsampling. Однако, для демонстрации и для небольшого количества данных (несколько тысяч точек) можно отображать все.</span></p><p class="ds-markdown-paragraph"><span>Мы изменим метод updateChart в GraphWidget:</span></p><p class="ds-markdown-paragraph"><span>Вместо того, чтобы брать только последние 200 точек, мы будем отображать все точки. Также мы изменим ось X, чтобы она автоматически масштабировалась на весь диапазон.</span></p><p class="ds-markdown-paragraph"><span>Однако, если мы хотим оставить возможность просмотра всей истории, но при этом не нагружать сильно рендеринг, можно дать пользователю выбор: отображать последние N точек или всю историю.</span></p><p class="ds-markdown-paragraph"><span>Покажем, как модифицировать для отображения всей истории.</span></p><p class="ds-markdown-paragraph"><span>Изменения в graphwidget.cpp:</span></p><ol start="1"><li><p class="ds-markdown-paragraph"><span>Уберем переменную maxPoints.</span></p></li><li><p class="ds-markdown-paragraph"><span>В updateChart будем отображать все данные.</span></p></li></ol><p class="ds-markdown-paragraph"><span>Но note: в текущей реализации мы передаем в updateChart не всю историю, а только новые данные? Нет, в текущей реализации DataReader передает все накопленные данные для каждого канала (allChannels[i] содержит все точки для i-го канала). Однако, это может быть неэффективно, потому что при каждом обновлении мы пересылаем все данные заново. Вместо этого лучше хранить данные внутри GraphWidget и просто добавлять новые точки.</span></p><p class="ds-markdown-paragraph"><span>Давайте переделаем хранение данных:</span></p><ul><li><p class="ds-markdown-paragraph"><span>В GraphWidget будем хранить данные для всех каналов (QVector&lt;QVector</span><span class="ds-markdown-html">&lt;float&gt;</span><span>&gt; channelsData).</span></p></li><li><p class="ds-markdown-paragraph"><span>При получении новых данных будем добавлять их в channelsData и обновлять графики.</span></p></li></ul><p class="ds-markdown-paragraph"><span>Но тогда мы должны очищать данные при сбросе (по сигналу resetRequested).</span></p><p class="ds-markdown-paragraph"><span>Также, если мы хотим отображать всю историю, то мы должны накапливать данные.</span></p><p class="ds-markdown-paragraph"><span>Однако, в текущей архитектуре DataReader читает из файла все новые данные и передает их в GraphWidget. При этом он передает не только новые, а все данные, которые были прочитаны с момента последнего чтения? Нет, в текущей реализации DataReader передает все данные, которые он прочитал в текущей итерации (которые были добавлены в файл с последнего чтения). Но в сигнале newDataRead мы передаем все данные для каждого канала (все, что было прочитано в текущей порции). Но это не вся история, а только новые данные. Поэтому нам нужно накапливать историю в GraphWidget.</span></p><p class="ds-markdown-paragraph"><span>Давайте изменим:</span></p><ol start="1"><li><p class="ds-markdown-paragraph"><span>В GraphWidget добавим член для хранения данных всех каналов (истории).</span></p></li><li><p class="ds-markdown-paragraph"><span>При получении новых данных будем добавлять их к истории.</span></p></li><li><p class="ds-markdown-paragraph"><span>При сбросе очищаем историю.</span></p></li></ol><p class="ds-markdown-paragraph"><span>Также, чтобы не передавать каждый раз все данные (что может быть неэффективно), мы можем передавать только новые данные. Но тогда нужно изменить сигнал newDataRead, чтобы он передавал только новые данные, а не все.</span></p><p class="ds-markdown-paragraph"><span>Но в текущей реализации DataReader читает из файла все новые данные и передает их в виде вектора векторов, где каждый внутренний вектор - это один канал, и в нем все точки, которые были прочитаны в текущей итерации. Но это не вся история канала, а только новые точки. Поэтому нам нужно в GraphWidget накапливать историю.</span></p><p class="ds-markdown-paragraph"><span>Предлагаю изменить:</span></p><ul><li><p class="ds-markdown-paragraph"><span>В GraphWidget хранить историю для каждого канала (QVector&lt;QVector</span><span class="ds-markdown-html">&lt;float&gt;</span><span>&gt; channelsData; // 32 канала, каждый - вектор float).</span></p></li><li><p class="ds-markdown-paragraph"><span>При получении новых данных (newDataRead) мы добавляем новые точки к channelsData и затем обновляем графики.</span></p></li></ul><p class="ds-markdown-paragraph"><span>Тогда в updateChart мы будем передавать весь канал (всю историю) для отрисовки.</span></p><p class="ds-markdown-paragraph"><span>Изменения в GraphWidget:</span></p><p class="ds-markdown-paragraph"><span>В graphwidget.h:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">private</span><span class="token operator">:</span>
    QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span> channelsData<span class="token punctuation">;</span> <span class="token comment">// История данных для 32 каналов</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>В конструкторе GraphWidget инициализируем channelsData:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">GraphWidget</span><span class="token punctuation">(</span>QWidget<span class="token operator">*</span> parent<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGridLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    channelsData<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setupGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>В слоте updateGraphs:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">updateGraphs</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> newData<span class="token punctuation">,</span> <span class="token keyword">int</span> currentCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// newData - это новые данные для каждого канала (32 канала, каждый содержит вектор новых точек)</span>
    <span class="token comment">// Добавляем новые данные к истории</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> newData<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        channelsData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>newData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Обновляем каждый график</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">updateChart</span><span class="token punctuation">(</span>charts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> series<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> channelsData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>В updateChart теперь используем весь channelsData[i] для отрисовки.</span></p><p class="ds-markdown-paragraph"><span>Также изменим метод clearGraphs:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">clearGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> s <span class="token operator">:</span> series<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        s<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> channelsData<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        channelsData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Теперь, чтобы отображать всю историю, мы просто будем рисовать все точки из channelsData[i].</span></p><p class="ds-markdown-paragraph"><span>Но тогда, если данных станет очень много, то производительность прорисовки может упасть. Поэтому можно дать пользователю возможность выбирать, сколько точек отображать (все или только последние N). Давайте добавим переключатель в интерфейс.</span></p><p class="ds-markdown-paragraph"><span>Однако, по условию задачи мы должны перерисовывать графики при поступлении новых данных, и мы хотим иметь возможность посмотреть полную историю. Поэтому мы реализуем два режима:</span></p><ol start="1"><li><p class="ds-markdown-paragraph"><span>Режим реального времени (последние N точек, например, 200).</span></p></li><li><p class="ds-markdown-paragraph"><span>Режим полной истории (все точки).</span></p></li></ol><p class="ds-markdown-paragraph"><span>Добавим в GraphWidget флаг для выбора режима и метод для установки этого флага.</span></p><p class="ds-markdown-paragraph"><span>В graphwidget.h:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">class</span> <span class="token class-name">GraphWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span> <span class="token punctuation">{</span>
    Q_OBJECT

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">enum</span> <span class="token class-name">DisplayMode</span> <span class="token punctuation">{</span>
        RealTimeMode<span class="token punctuation">,</span>   <span class="token comment">// Показывать последние maxPoints точек</span>
        HistoryMode     <span class="token comment">// Показывать всю историю</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">explicit</span> <span class="token function">GraphWidget</span><span class="token punctuation">(</span>QWidget<span class="token operator">*</span> parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">updateGraphs</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> newData<span class="token punctuation">,</span> <span class="token keyword">int</span> currentCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">setDisplayMode</span><span class="token punctuation">(</span>DisplayMode mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ... остальное</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    DisplayMode displayMode <span class="token operator">=</span> RealTimeMode<span class="token punctuation">;</span>
    <span class="token keyword">int</span> maxPoints <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span> <span class="token comment">// Используется в режиме RealTimeMode</span>

    <span class="token comment">// ... остальное</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Тогда в updateChart мы будем в зависимости от режима отображать либо все точки, либо только последние maxPoints.</span></p><p class="ds-markdown-paragraph"><span>Изменим updateChart:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">updateChart</span><span class="token punctuation">(</span>QChart<span class="token operator">*</span> chart<span class="token punctuation">,</span> QLineSeries<span class="token operator">*</span> series<span class="token punctuation">,</span> <span class="token keyword">const</span> QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    series<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> startIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> displayCount <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>displayMode <span class="token operator">==</span> RealTimeMode <span class="token operator">&amp;&amp;</span> displayCount <span class="token operator">&gt;</span> maxPoints<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        startIndex <span class="token operator">=</span> displayCount <span class="token operator">-</span> maxPoints<span class="token punctuation">;</span>
        displayCount <span class="token operator">=</span> maxPoints<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> displayCount<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> x <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token comment">// В режиме реального времени мы показываем последние maxPoints точек, и x идет от 0 до maxPoints-1</span>
        <span class="token comment">// В режиме истории мы показываем все точки, и x идет от 0 до data.size()-1</span>
        <span class="token comment">// Но если мы хотим, чтобы в режиме истории ось X показывала реальный индекс (с учетом всего времени), то мы должны использовать i + startIndex?</span>
        <span class="token comment">// Но тогда в режиме истории startIndex=0, и мы используем i от 0 до data.size()-1, что и есть реальный индекс.</span>
        <span class="token keyword">float</span> y <span class="token operator">=</span> data<span class="token punctuation">[</span>startIndex <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        series<span class="token operator">-&gt;</span><span class="token function">append</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Масштабирование по осям</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>displayCount <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Определяем минимальное и максимальное Y в отображаемом диапазоне</span>
        <span class="token keyword">float</span> minY <span class="token operator">=</span> data<span class="token punctuation">[</span>startIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> maxY <span class="token operator">=</span> data<span class="token punctuation">[</span>startIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> displayCount<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">float</span> value <span class="token operator">=</span> data<span class="token punctuation">[</span>startIndex <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> minY<span class="token punctuation">)</span> minY <span class="token operator">=</span> value<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&gt;</span> maxY<span class="token punctuation">)</span> maxY <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">float</span> margin <span class="token operator">=</span> <span class="token punctuation">(</span>maxY <span class="token operator">-</span> minY<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>margin <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> margin <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>

        chart<span class="token operator">-&gt;</span><span class="token function">axisY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span>minY <span class="token operator">-</span> margin<span class="token punctuation">,</span> maxY <span class="token operator">+</span> margin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">axisX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> displayCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        chart<span class="token operator">-&gt;</span><span class="token function">axisX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">axisY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Теперь в режиме RealTimeMode мы показываем последние maxPoints точек, а в HistoryMode - все точки.</span></p><p class="ds-markdown-paragraph"><span>Также мы можем добавить в интерфейс кнопку для переключения режима.</span></p><p class="ds-markdown-paragraph"><span>В MainWindow добавим кнопку и слот для переключения режима.</span></p><p class="ds-markdown-paragraph"><span>Однако, note: в режиме HistoryMode, если данных очень много, то при каждом обновлении мы будем перерисовывать все точки, что может быть тяжело. Поэтому, если производительность станет проблемой, можно использовать downsampling.</span></p><p class="ds-markdown-paragraph"><span>Но для начала давайте реализуем переключение режима.</span></p><p class="ds-markdown-paragraph"><span>В MainWindow:</span></p><p class="ds-markdown-paragraph"><span>Добавим кнопку и подключим ее к слоту, который будет менять режим GraphWidget.</span></p><p class="ds-markdown-paragraph"><span>В mainwindow.h:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">private</span> slots<span class="token operator">:</span>
    <span class="token comment">// ... другие слоты</span>
    <span class="token keyword">void</span> <span class="token function">toggleDisplayMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    QPushButton<span class="token operator">*</span> modeButton<span class="token punctuation">;</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>В mainwindow.cpp:</span></p><p class="ds-markdown-paragraph"><span>В setupUI добавим кнопку:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre>    modeButton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"Switch to History Mode"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>modeButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>modeButton<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>toggleDisplayMode<span class="token punctuation">)</span><span class="token punctuation">;</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Реализуем toggleDisplayMode:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">toggleDisplayMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">bool</span> isHistoryMode <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    isHistoryMode <span class="token operator">=</span> <span class="token operator">!</span>isHistoryMode<span class="token punctuation">;</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isHistoryMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        graphWidget<span class="token operator">-&gt;</span><span class="token function">setDisplayMode</span><span class="token punctuation">(</span>GraphWidget<span class="token double-colon punctuation">::</span>HistoryMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        modeButton<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Switch to Real-Time Mode"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        graphWidget<span class="token operator">-&gt;</span><span class="token function">setDisplayMode</span><span class="token punctuation">(</span>GraphWidget<span class="token double-colon punctuation">::</span>RealTimeMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        modeButton<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Switch to History Mode"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>В GraphWidget реализуем setDisplayMode:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">setDisplayMode</span><span class="token punctuation">(</span>DisplayMode mode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>displayMode <span class="token operator">!=</span> mode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        displayMode <span class="token operator">=</span> mode<span class="token punctuation">;</span>
        <span class="token comment">// Обновляем графики с новым режимом</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">updateChart</span><span class="token punctuation">(</span>charts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> series<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> channelsData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Теперь пользователь может переключаться между режимами.</span></p><p class="ds-markdown-paragraph"><span>Однако, note: в режиме реального времени мы отображаем последние maxPoints точек, но при переключении в режим истории мы покажем все точки. И наоборот.</span></p><p class="ds-markdown-paragraph"><span>Это решение дает гибкость для просмотра данных.</span></p><p class="ds-markdown-paragraph"><span>Но предупредим: если данных очень много, то в режиме истории производительность может упасть. В таком случае можно использовать методы, такие как прореживание данных (downsampling) для отображения, но это выходит за рамки данной задачи.</span></p><p class="ds-markdown-paragraph"><span>Теперь, если мы хотим, чтобы в режиме реального времени ось X показывала относительное время (последние maxPoints точек), а в режиме истории - абсолютные индексы (от 0 до общего количества точек), то мы должны в updateChart для режима истории использовать в качестве X абсолютный индекс (т.е. i + startIndex), но тогда у нас получится, что в режиме истории мы показываем точки от 0 до N, а в реальном времени - от 0 до maxPoints. Это может быть неудобно, потому что в реальном времени мы видим только последние точки, а в истории - все, но при этом в реальном времени шкала X постоянно сдвигается.</span></p><p class="ds-markdown-paragraph"><span>Альтернатива: в режиме реального времени мы можем отображать точки от (общее количество точек - maxPoints) до (общее количество точек). Но тогда ось X будет показывать абсолютные индексы, но только последний сегмент. Это может быть более понятно.</span></p><p class="ds-markdown-paragraph"><span>Давайте изменим отображение в режиме реального времени: будем отображать последние maxPoints точек, но по оси X будем показывать абсолютные индексы (т.е. от startIndex до startIndex+displayCount).</span></p><p class="ds-markdown-paragraph"><span>Тогда в updateChart:</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">updateChart</span><span class="token punctuation">(</span>QChart<span class="token operator">*</span> chart<span class="token punctuation">,</span> QLineSeries<span class="token operator">*</span> series<span class="token punctuation">,</span> <span class="token keyword">const</span> QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    series<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> startIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> displayCount <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>displayMode <span class="token operator">==</span> RealTimeMode <span class="token operator">&amp;&amp;</span> displayCount <span class="token operator">&gt;</span> maxPoints<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        startIndex <span class="token operator">=</span> displayCount <span class="token operator">-</span> maxPoints<span class="token punctuation">;</span>
        displayCount <span class="token operator">=</span> maxPoints<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> displayCount<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> x <span class="token operator">=</span> startIndex <span class="token operator">+</span> i<span class="token punctuation">;</span> <span class="token comment">// Абсолютный индекс</span>
        <span class="token keyword">float</span> y <span class="token operator">=</span> data<span class="token punctuation">[</span>startIndex <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        series<span class="token operator">-&gt;</span><span class="token function">append</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Масштабирование по осям</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>displayCount <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">float</span> minY <span class="token operator">=</span> data<span class="token punctuation">[</span>startIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> maxY <span class="token operator">=</span> data<span class="token punctuation">[</span>startIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> displayCount<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">float</span> value <span class="token operator">=</span> data<span class="token punctuation">[</span>startIndex <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> minY<span class="token punctuation">)</span> minY <span class="token operator">=</span> value<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&gt;</span> maxY<span class="token punctuation">)</span> maxY <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">float</span> margin <span class="token operator">=</span> <span class="token punctuation">(</span>maxY <span class="token operator">-</span> minY<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>margin <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> margin <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>

        chart<span class="token operator">-&gt;</span><span class="token function">axisY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span>minY <span class="token operator">-</span> margin<span class="token punctuation">,</span> maxY <span class="token operator">+</span> margin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">axisX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span>startIndex<span class="token punctuation">,</span> startIndex <span class="token operator">+</span> displayCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        chart<span class="token operator">-&gt;</span><span class="token function">axisX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">axisY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><span>Теперь ось X в режиме реального времени будет показывать абсолютные индексы, но только последний сегмент, а в режиме истории - весь диапазон.</span></p><p class="ds-markdown-paragraph"><span>Это улучшит понимание данных.</span></p><p class="ds-markdown-paragraph"><span>Итог:</span></p><p class="ds-markdown-paragraph"><span>Мы реализовали два режима отображения: реального времени (последние 200 точек) и полной истории. Пользователь может переключаться между ними. При этом в режиме реального времени графики показывают последние 200 точек, а в режиме истории - все данные. Ось X в обоих режимах показывает абсолютные индексы точек.</span></p><p class="ds-markdown-paragraph"><span>Теперь, если производительность в режиме истории будет низкой, можно добавить опцию прореживания данных, но это уже дальнейшее улучшение.</span></p></div></div><div class="_8f7678d"></div></div><div class="ds-markdown" style="--ds-md-zoom: 1.143;"><p class="ds-markdown-paragraph"><span>Отличный вопрос! Давайте реализуем возможность просмотра полной истории графиков с прокруткой и масштабированием. Вот модифицированная версия:</span></p><h3><span>1. Обновленный GraphWidget с навигацией по истории</span></h3><p class="ds-markdown-paragraph"><strong><span>graphwidget.h</span></strong></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">GRAPHWIDGET_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GRAPHWIDGET_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QScrollArea&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QGridLayout&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QSlider&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QCheckBox&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QtCharts&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">GraphWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span> <span class="token punctuation">{</span>
    Q_OBJECT

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">explicit</span> <span class="token function">GraphWidget</span><span class="token punctuation">(</span>QWidget<span class="token operator">*</span> parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">updateGraphs</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> allChannels<span class="token punctuation">,</span> <span class="token keyword">int</span> currentCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">clearGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">setVisibleRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">toggleAutoScroll</span><span class="token punctuation">(</span><span class="token keyword">bool</span> enabled<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">zoomIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">zoomOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">resetZoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">setupUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">setupGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">updateChart</span><span class="token punctuation">(</span>QChart<span class="token operator">*</span> chart<span class="token punctuation">,</span> QLineSeries<span class="token operator">*</span> series<span class="token punctuation">,</span> <span class="token keyword">const</span> QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">updateNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    QGridLayout<span class="token operator">*</span> mainLayout<span class="token punctuation">;</span>
    QGridLayout<span class="token operator">*</span> chartsLayout<span class="token punctuation">;</span>
    QHBoxLayout<span class="token operator">*</span> controlLayout<span class="token punctuation">;</span>
    QWidget<span class="token operator">*</span> chartsWidget<span class="token punctuation">;</span>
    QScrollArea<span class="token operator">*</span> scrollArea<span class="token punctuation">;</span>
    
    QVector<span class="token operator">&lt;</span>QChartView<span class="token operator">*</span><span class="token operator">&gt;</span> chartViews<span class="token punctuation">;</span>
    QVector<span class="token operator">&lt;</span>QLineSeries<span class="token operator">*</span><span class="token operator">&gt;</span> series<span class="token punctuation">;</span>
    QVector<span class="token operator">&lt;</span>QChart<span class="token operator">*</span><span class="token operator">&gt;</span> charts<span class="token punctuation">;</span>
    
    <span class="token comment">// Навигация</span>
    QSlider<span class="token operator">*</span> rangeSlider<span class="token punctuation">;</span>
    QLabel<span class="token operator">*</span> rangeLabel<span class="token punctuation">;</span>
    QPushButton<span class="token operator">*</span> zoomInButton<span class="token punctuation">;</span>
    QPushButton<span class="token operator">*</span> zoomOutButton<span class="token punctuation">;</span>
    QPushButton<span class="token operator">*</span> resetZoomButton<span class="token punctuation">;</span>
    QCheckBox<span class="token operator">*</span> autoScrollCheck<span class="token punctuation">;</span>
    
    <span class="token comment">// Данные</span>
    QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span> channelsData<span class="token punctuation">;</span>
    <span class="token keyword">int</span> totalPoints <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> visibleRange <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span> <span class="token comment">// Количество видимых точек</span>
    <span class="token keyword">bool</span> autoScroll <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">double</span> zoomFactor <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// GRAPHWIDGET_H</span></span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><strong><span>graphwidget.cpp</span></strong></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"graphwidget.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>

<span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">GraphWidget</span><span class="token punctuation">(</span>QWidget<span class="token operator">*</span> parent<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    channelsData<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setupUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setupGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">setupUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mainLayout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGridLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Панель управления</span>
    controlLayout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QHBoxLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    autoScrollCheck <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QCheckBox</span><span class="token punctuation">(</span><span class="token string">"Автопрокрутка"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    autoScrollCheck<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>autoScrollCheck<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QCheckBox<span class="token double-colon punctuation">::</span>toggled<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>GraphWidget<span class="token double-colon punctuation">::</span>toggleAutoScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    rangeLabel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"Видимые точки: 200"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    rangeSlider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QSlider</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>Horizontal<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rangeSlider<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rangeSlider<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rangeSlider<span class="token operator">-&gt;</span><span class="token function">setTickPosition</span><span class="token punctuation">(</span>QSlider<span class="token double-colon punctuation">::</span>TicksBelow<span class="token punctuation">)</span><span class="token punctuation">;</span>
    rangeSlider<span class="token operator">-&gt;</span><span class="token function">setTickInterval</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>rangeSlider<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QSlider<span class="token double-colon punctuation">::</span>valueChanged<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>GraphWidget<span class="token double-colon punctuation">::</span>setVisibleRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    zoomInButton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"+"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    zoomOutButton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resetZoomButton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"Сброс масштаба"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token function">connect</span><span class="token punctuation">(</span>zoomInButton<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>GraphWidget<span class="token double-colon punctuation">::</span>zoomIn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>zoomOutButton<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>GraphWidget<span class="token double-colon punctuation">::</span>zoomOut<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>resetZoomButton<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>GraphWidget<span class="token double-colon punctuation">::</span>resetZoom<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>autoScrollCheck<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>rangeLabel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>rangeSlider<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>zoomInButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>zoomOutButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>resetZoomButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addStretch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Область с графиками</span>
    chartsWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    chartsLayout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGridLayout</span><span class="token punctuation">(</span>chartsWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    chartsLayout<span class="token operator">-&gt;</span><span class="token function">setSpacing</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    scrollArea <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QScrollArea</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    scrollArea<span class="token operator">-&gt;</span><span class="token function">setWidget</span><span class="token punctuation">(</span>chartsWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    scrollArea<span class="token operator">-&gt;</span><span class="token function">setWidgetResizable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    scrollArea<span class="token operator">-&gt;</span><span class="token function">setHorizontalScrollBarPolicy</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>ScrollBarAsNeeded<span class="token punctuation">)</span><span class="token punctuation">;</span>
    scrollArea<span class="token operator">-&gt;</span><span class="token function">setVerticalScrollBarPolicy</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>ScrollBarAsNeeded<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    mainLayout<span class="token operator">-&gt;</span><span class="token function">addLayout</span><span class="token punctuation">(</span>controlLayout<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mainLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>scrollArea<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">setupGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Очищаем предыдущие графики</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> view <span class="token operator">:</span> chartViews<span class="token punctuation">)</span> <span class="token keyword">delete</span> view<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> s <span class="token operator">:</span> series<span class="token punctuation">)</span> <span class="token keyword">delete</span> s<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> chart <span class="token operator">:</span> charts<span class="token punctuation">)</span> <span class="token keyword">delete</span> chart<span class="token punctuation">;</span>
    
    chartViews<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    series<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    charts<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Создаем 32 графика в сетке 8x4</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">auto</span> chart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Канал %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">setMargins</span><span class="token punctuation">(</span><span class="token function">QMargins</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">auto</span> series <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLineSeries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span>series<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>series<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">addSeries</span><span class="token punctuation">(</span>series<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// Настраиваем оси</span>
        <span class="token keyword">auto</span> axisX <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QValueAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> axisY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QValueAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        axisX<span class="token operator">-&gt;</span><span class="token function">setTitleText</span><span class="token punctuation">(</span><span class="token string">"Время (точки)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        axisY<span class="token operator">-&gt;</span><span class="token function">setTitleText</span><span class="token punctuation">(</span><span class="token string">"Значение"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        axisX<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> visibleRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
        axisY<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        chart<span class="token operator">-&gt;</span><span class="token function">addAxis</span><span class="token punctuation">(</span>axisX<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>AlignBottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chart<span class="token operator">-&gt;</span><span class="token function">addAxis</span><span class="token punctuation">(</span>axisY<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>AlignLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        series<span class="token operator">-&gt;</span><span class="token function">attachAxis</span><span class="token punctuation">(</span>axisX<span class="token punctuation">)</span><span class="token punctuation">;</span>
        series<span class="token operator">-&gt;</span><span class="token function">attachAxis</span><span class="token punctuation">(</span>axisY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">auto</span> chartView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QChartView</span><span class="token punctuation">(</span>chart<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chartView<span class="token operator">-&gt;</span><span class="token function">setRenderHint</span><span class="token punctuation">(</span>QPainter<span class="token double-colon punctuation">::</span>Antialiasing<span class="token punctuation">)</span><span class="token punctuation">;</span>
        chartView<span class="token operator">-&gt;</span><span class="token function">setMinimumSize</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        chartViews<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>chartView<span class="token punctuation">)</span><span class="token punctuation">;</span>
        charts<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>chart<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        chartsLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>chartView<span class="token punctuation">,</span> i <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">,</span> i <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">updateGraphs</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> newData<span class="token punctuation">,</span> <span class="token keyword">int</span> currentCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Добавляем новые данные</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> newData<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        channelsData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>newData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newData<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> newData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        totalPoints <span class="token operator">=</span> channelsData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Обновляем графики</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">updateChart</span><span class="token punctuation">(</span>charts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> series<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> channelsData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">updateNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">updateChart</span><span class="token punctuation">(</span>QChart<span class="token operator">*</span> chart<span class="token punctuation">,</span> QLineSeries<span class="token operator">*</span> series<span class="token punctuation">,</span> <span class="token keyword">const</span> QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> data<span class="token punctuation">,</span> <span class="token keyword">int</span> channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    
    series<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">int</span> startIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> displayCount <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>autoScroll <span class="token operator">&amp;&amp;</span> displayCount <span class="token operator">&gt;</span> visibleRange<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        startIndex <span class="token operator">=</span> displayCount <span class="token operator">-</span> visibleRange<span class="token punctuation">;</span>
        displayCount <span class="token operator">=</span> visibleRange<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Применяем масштабирование</span>
    <span class="token keyword">int</span> effectiveRange <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>visibleRange <span class="token operator">*</span> zoomFactor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>autoScroll <span class="token operator">&amp;&amp;</span> displayCount <span class="token operator">&gt;</span> effectiveRange<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        startIndex <span class="token operator">=</span> displayCount <span class="token operator">-</span> effectiveRange<span class="token punctuation">;</span>
        displayCount <span class="token operator">=</span> effectiveRange<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> displayCount<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> x <span class="token operator">=</span> autoScroll <span class="token operator">?</span> i <span class="token operator">:</span> <span class="token punctuation">(</span>startIndex <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> y <span class="token operator">=</span> data<span class="token punctuation">[</span>startIndex <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        series<span class="token operator">-&gt;</span><span class="token function">append</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Обновляем оси</span>
    QValueAxis<span class="token operator">*</span> axisX <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>QValueAxis<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>chart<span class="token operator">-&gt;</span><span class="token function">axes</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>Horizontal<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QValueAxis<span class="token operator">*</span> axisY <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>QValueAxis<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>chart<span class="token operator">-&gt;</span><span class="token function">axes</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>Vertical<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>autoScroll<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        axisX<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> displayCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        axisX<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span>startIndex<span class="token punctuation">,</span> startIndex <span class="token operator">+</span> displayCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Автоматическое масштабирование по Y</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>displayCount <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">float</span> minY <span class="token operator">=</span> data<span class="token punctuation">[</span>startIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> maxY <span class="token operator">=</span> data<span class="token punctuation">[</span>startIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
        
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> displayCount<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">float</span> value <span class="token operator">=</span> data<span class="token punctuation">[</span>startIndex <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> minY<span class="token punctuation">)</span> minY <span class="token operator">=</span> value<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&gt;</span> maxY<span class="token punctuation">)</span> maxY <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">float</span> margin <span class="token operator">=</span> <span class="token punctuation">(</span>maxY <span class="token operator">-</span> minY<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>margin <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> margin <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
        
        axisY<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span>minY <span class="token operator">-</span> margin<span class="token punctuation">,</span> maxY <span class="token operator">+</span> margin<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">updateNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    rangeLabel<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Видимые точки: %1 | Всего: %2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>visibleRange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>totalPoints<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>autoScroll<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        rangeSlider<span class="token operator">-&gt;</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        zoomInButton<span class="token operator">-&gt;</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        zoomOutButton<span class="token operator">-&gt;</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        rangeSlider<span class="token operator">-&gt;</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        zoomInButton<span class="token operator">-&gt;</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        zoomOutButton<span class="token operator">-&gt;</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">setVisibleRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    visibleRange <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">updateChart</span><span class="token punctuation">(</span>charts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> series<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> channelsData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">updateNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">toggleAutoScroll</span><span class="token punctuation">(</span><span class="token keyword">bool</span> enabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    autoScroll <span class="token operator">=</span> enabled<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">updateChart</span><span class="token punctuation">(</span>charts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> series<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> channelsData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">updateNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">zoomIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    zoomFactor <span class="token operator">*=</span> <span class="token number">0.8</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>zoomFactor <span class="token operator">&lt;</span> <span class="token number">0.1</span><span class="token punctuation">)</span> zoomFactor <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
    <span class="token function">setVisibleRange</span><span class="token punctuation">(</span>visibleRange<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Перерисовываем с новым масштабом</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">zoomOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    zoomFactor <span class="token operator">*=</span> <span class="token number">1.25</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>zoomFactor <span class="token operator">&gt;</span> <span class="token number">10.0</span><span class="token punctuation">)</span> zoomFactor <span class="token operator">=</span> <span class="token number">10.0</span><span class="token punctuation">;</span>
    <span class="token function">setVisibleRange</span><span class="token punctuation">(</span>visibleRange<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Перерисовываем с новым масштабом</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">resetZoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    zoomFactor <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
    <span class="token function">setVisibleRange</span><span class="token punctuation">(</span>visibleRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">clearGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> s <span class="token operator">:</span> series<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        s<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> channelsData<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        channelsData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    totalPoints <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">updateNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>2. Обновленный DataReader для эффективной работы с историей</span></h3><p class="ds-markdown-paragraph"><strong><span>filehandler.h</span></strong><span> (обновленная часть)</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">class</span> <span class="token class-name">DataReader</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
    Q_OBJECT
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">explicit</span> <span class="token function">DataReader</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString<span class="token operator">&amp;</span> filename<span class="token punctuation">,</span> QObject<span class="token operator">*</span> parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token function">QThread</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">filename</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token keyword">void</span> <span class="token function">stopReading</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        keepReading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

signals<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">newDataRead</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> newData<span class="token punctuation">,</span> <span class="token keyword">int</span> packetCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">resetRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">while</span> <span class="token punctuation">(</span>keepReading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> lastReadPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> lastReadPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    emit <span class="token function">resetRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">continue</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>lastReadPosition<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
            in<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

            QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span> data<span class="token punctuation">;</span>
            <span class="token keyword">int</span> packetCount<span class="token punctuation">;</span>
            QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span> newDataPackets<span class="token punctuation">;</span>

            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                in <span class="token operator">&gt;&gt;</span> data <span class="token operator">&gt;&gt;</span> packetCount<span class="token punctuation">;</span>
                
                <span class="token keyword">if</span> <span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> QDataStream<span class="token double-colon punctuation">::</span>Ok <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">32</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    newDataPackets<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    lastReadPosition <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>newDataPackets<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// Транспонируем данные: из пакетов в каналы</span>
                QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span> <span class="token function">newDataByChannels</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    newDataByChannels<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">QVector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> packet <span class="token operator">:</span> newDataPackets<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        newDataByChannels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>packet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                
                emit <span class="token function">newDataRead</span><span class="token punctuation">(</span>newDataByChannels<span class="token punctuation">,</span> packetCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    QString filename<span class="token punctuation">;</span>
    qint64 lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> keepReading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>3. Обновленный MainWindow</span></h3><p class="ds-markdown-paragraph"><strong><span>mainwindow.h</span></strong><span> (добавьте в private slots)</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">private</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">startRecording</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">stopRecording</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">onNewDataRead</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> newData<span class="token punctuation">,</span> <span class="token keyword">int</span> packetCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">onResetRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">saveData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Новый слот для сохранения данных</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><strong><span>mainwindow.cpp</span></strong><span> (дополнения)</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token comment">// В setupUI() добавьте кнопку сохранения:</span>
<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">setupUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... существующий код ...</span>
    
    QPushButton<span class="token operator">*</span> saveButton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"Сохранить данные"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>saveButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>saveButton<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>saveData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// ... остальной код ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// Новый метод для сохранения данных</span>
<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">saveData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    QString saveFilename <span class="token operator">=</span> <span class="token class-name">QFileDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getSaveFileName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"Сохранить данные"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"Binary Files (*.bin)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>saveFilename<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">QFile</span><span class="token double-colon punctuation">::</span><span class="token function">copy</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> saveFilename<span class="token punctuation">)</span><span class="token punctuation">;</span>
        statusLabel<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Данные сохранены"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>Ключевые особенности реализации:</span></h3><ol start="1"><li><p class="ds-markdown-paragraph"><strong><span>Два режима просмотра</span></strong><span>:</span></p><ul><li><p class="ds-markdown-paragraph"><strong><span>Автопрокрутка</span></strong><span>: Показываются последние N точек</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Ручная навигация</span></strong><span>: Возможность просматривать всю историю</span></p></li></ul></li><li><p class="ds-markdown-paragraph"><strong><span>Элементы управления</span></strong><span>:</span></p><ul><li><p class="ds-markdown-paragraph"><span>Слайдер для настройки количества видимых точек</span></p></li><li><p class="ds-markdown-paragraph"><span>Кнопки масштабирования (+/-)</span></p></li><li><p class="ds-markdown-paragraph"><span>Кнопка сброса масштаба</span></p></li><li><p class="ds-markdown-paragraph"><span>Чекбокс автопрокрутки</span></p></li></ul></li><li><p class="ds-markdown-paragraph"><strong><span>Эффективное хранение</span></strong><span>:</span></p><ul><li><p class="ds-markdown-paragraph"><span>Все данные хранятся в памяти для быстрого доступа</span></p></li><li><p class="ds-markdown-paragraph"><span>Возможность сохранения данных в файл</span></p></li></ul></li><li><p class="ds-markdown-paragraph"><strong><span>Гибкая визуализация</span></strong><span>:</span></p><ul><li><p class="ds-markdown-paragraph"><span>Автоматическое масштабирование по оси Y</span></p></li><li><p class="ds-markdown-paragraph"><span>Прокрутка по горизонтали для просмотра истории</span></p></li><li><p class="ds-markdown-paragraph"><span>Информация о количестве точек</span></p></li></ul></li><li><p class="ds-markdown-paragraph"><strong><span>Производительность</span></strong><span>:</span></p><ul><li><p class="ds-markdown-paragraph"><span>Графики обновляются только при поступлении новых данных</span></p></li><li><p class="ds-markdown-paragraph"><span>Плавная навигация даже при больших объемах данных</span></p></li></ul></li></ol><h3><span>Использование:</span></h3><ol start="1"><li><p class="ds-markdown-paragraph"><strong><span>Режим автопрокрутки</span></strong><span>: Включен по умолчанию, показывает последние 200 точек</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Просмотр истории</span></strong><span>: Отключите автопрокрутку и используйте:</span></p><ul><li><p class="ds-markdown-paragraph"><span>Слайдер для настройки количества видимых точек</span></p></li><li><p class="ds-markdown-paragraph"><span>Прокрутку мыши или полосы прокрутки для навигации</span></p></li><li><p class="ds-markdown-paragraph"><span>Кнопки +/- для масштабирования</span></p></li></ul></li><li><p class="ds-markdown-paragraph"><strong><span>Сохранение</span></strong><span>: Кнопка "Сохранить данные" позволяет экспортировать все данные</span></p></li></ol><p class="ds-markdown-paragraph"><span>Эта реализация позволяет эффективно работать как с реальным временем (автопрокрутка), так и анализировать полную историю данных с удобной навигацией.</span></p></div></div><div class="ds-theme" style="--ds-rgb-hover: 245 245 245; --ds-rgb-primary: 77 107 254; --ds-button-hover-color: #2563EB; --ds-bordered-secondary-button-color: var(--dsr-text-1); --ds-input-prefix-color: var(--dsr-text-1);"></div><div class="ds-flex _0a3d93b" style="align-items: center; gap: 10px;"><div class="ds-flex _965abe9" style="align-items: center; gap: 10px;"><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.92142 0.349213C10.3745 0.349295 12.5564 1.50526 13.9558 3.299L15.1282 2.12765C15.3304 1.92552 15.6768 2.06949 15.6768 2.35544V5.53929C15.6766 5.71632 15.533 5.85982 15.356 5.86008H12.1711C11.8855 5.85976 11.7427 5.51471 11.9443 5.31255L12.9642 4.29062C11.8238 2.74311 9.98914 1.74112 7.92142 1.74104C4.46442 1.74104 1.66239 4.54307 1.66239 8.00006C1.66239 11.4571 4.46442 14.2591 7.92142 14.2591C11.3783 14.2589 14.1804 11.457 14.1804 8.00006H15.5723C15.5723 12.2252 12.1465 15.6508 7.92142 15.6509C3.6962 15.6509 0.270569 12.2253 0.270569 8.00006C0.270569 3.77485 3.6962 0.349213 7.92142 0.349213Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.27861 0.811633C8.81985 0.142255 9.79016 0.0422445 10.4537 0.557662L10.5823 0.669367L10.6065 0.693605L10.6097 0.695713L10.6392 0.72522C11.3549 1.44685 11.6336 2.49474 11.3716 3.47675L11.3705 3.48097L11.361 3.5168L11.36 3.51891L10.8889 5.2261C10.8796 5.26003 10.8706 5.29164 10.8626 5.32094C10.8934 5.32101 10.927 5.322 10.9627 5.322H11.9006C12.4263 5.322 12.783 5.31906 13.0651 5.36731C14.8182 5.66725 15.9851 7.34574 15.6564 9.09363C15.6035 9.37493 15.4769 9.70926 15.2939 10.2023L14.337 12.7799C14.1401 13.3105 13.9773 13.7518 13.8101 14.1025C13.6375 14.4646 13.4385 14.7794 13.1441 15.0425C12.9712 15.197 12.7801 15.3303 12.5751 15.4387C12.2259 15.6232 11.8608 15.7 11.4612 15.7359C11.0742 15.7705 10.6034 15.7696 10.0374 15.7696H4.87371C4.08047 15.7696 3.42922 15.7703 2.90728 15.7138C2.37206 15.6558 1.88985 15.5311 1.4667 15.2237C1.22409 15.0475 1.01072 14.834 0.834405 14.5914C0.52696 14.1683 0.401312 13.6861 0.343323 13.1509C0.286761 12.6288 0.28747 11.977 0.28747 11.1834V9.51411C0.28747 8.84785 0.281286 8.36721 0.399176 7.95656C0.671091 7.00941 1.41109 6.26838 2.35823 5.99645C2.76888 5.87855 3.24952 5.88579 3.91579 5.88579C4.11977 5.88579 4.14542 5.88325 4.16238 5.88053C4.23526 5.8687 4.30403 5.83669 4.35839 5.78674C4.37104 5.77511 4.38755 5.7561 4.51436 5.59494L8.25648 0.839033L8.25754 0.837979L8.27861 0.811633ZM1.69116 11.1834C1.69116 12.0083 1.69211 12.5712 1.73859 13.0002C1.78365 13.4158 1.86467 13.6222 1.96937 13.7663C2.05914 13.8898 2.16727 13.999 2.29079 14.0888C2.43495 14.1935 2.6421 14.2745 3.05797 14.3195C3.45891 14.363 3.97631 14.3656 4.71564 14.3659C4.30795 13.8053 4.06447 13.1172 4.06437 12.371V8.59412H5.46807V12.371C5.46832 13.4734 6.3616 14.367 7.46401 14.367H10.0374C10.6286 14.367 11.0269 14.3663 11.3368 14.3385C11.6339 14.3118 11.7956 14.2639 11.9196 14.1984C12.024 14.1431 12.1213 14.0747 12.2094 13.996C12.3139 13.9025 12.4151 13.7679 12.5434 13.4986C12.6774 13.2177 12.8162 12.8451 13.0219 12.2909L13.9787 9.71328C14.1848 9.15822 14.253 8.96737 14.278 8.83439C14.4617 7.85698 13.8092 6.91901 12.829 6.75098C12.6956 6.72816 12.4928 6.72464 11.9006 6.72464H10.9627C10.7737 6.72464 10.5693 6.72663 10.4 6.70672C10.2211 6.68568 9.96696 6.6303 9.74764 6.43167C9.64448 6.33817 9.5595 6.22616 9.49683 6.10183C9.36384 5.8379 9.37793 5.57905 9.40515 5.40104C9.43094 5.23267 9.48666 5.03623 9.53688 4.8541L10.0079 3.14585L10.0174 3.11108C10.1488 2.61344 10.0077 2.08344 9.64648 1.71687L9.60854 1.67893L9.55058 1.6431C9.48789 1.62049 9.41419 1.6382 9.36932 1.69368L9.35773 1.70633L9.35878 1.70738L5.61666 6.46224C5.51816 6.58741 5.42231 6.71336 5.30683 6.81948C5.05069 7.05477 4.73119 7.20945 4.3879 7.26525C4.23309 7.29038 4.07507 7.28843 3.91579 7.28843C3.1535 7.28843 2.9191 7.29576 2.74604 7.34534C2.26358 7.48385 1.88558 7.86087 1.74702 8.34331C1.69732 8.51642 1.69116 8.75116 1.69116 9.51411V11.1834Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.72451 15.1086C7.18929 15.7706 6.22975 15.8695 5.57357 15.3598L5.44643 15.2493L5.42247 15.2253L5.41934 15.2233L5.39016 15.1941C4.68239 14.4805 4.40679 13.4442 4.66589 12.4731L4.66693 12.4689L4.67631 12.4335L4.67735 12.4314L5.14318 10.7432C5.15243 10.7096 5.1613 10.6784 5.16923 10.6494C5.13878 10.6493 5.10558 10.6484 5.07023 10.6484H4.14274C3.62288 10.6484 3.27015 10.6513 2.9912 10.6035C1.25757 10.3069 0.103662 8.64709 0.42863 6.91861C0.480965 6.64044 0.606164 6.30981 0.787119 5.8223L1.73336 3.27328C1.92812 2.74859 2.08912 2.31215 2.25442 1.96542C2.42515 1.60731 2.62191 1.296 2.91304 1.03584C3.08408 0.883016 3.273 0.751185 3.47579 0.644009C3.82102 0.461569 4.18214 0.385575 4.57731 0.350131C4.95993 0.315849 5.42553 0.316783 5.98521 0.316783H11.0916C11.876 0.316783 12.52 0.316134 13.0362 0.372015C13.5655 0.429358 14.0423 0.552599 14.4608 0.856601C14.7007 1.03091 14.9117 1.24199 15.086 1.48187C15.3901 1.90033 15.5143 2.37716 15.5717 2.90645C15.6276 3.42275 15.6269 4.06727 15.6269 4.85209V6.5028C15.6269 7.16167 15.633 7.63697 15.5164 8.04306C15.2475 8.97969 14.5158 9.71248 13.5791 9.9814C13.173 10.098 12.6977 10.0908 12.0389 10.0908C11.8372 10.0908 11.8118 10.0933 11.795 10.096C11.723 10.1077 11.6549 10.1394 11.6012 10.1888C11.5887 10.2003 11.5724 10.2191 11.447 10.3784L7.74639 15.0815L7.74535 15.0826L7.72451 15.1086ZM14.2388 4.85209C14.2388 4.03635 14.2379 3.47971 14.1919 3.05547C14.1473 2.64449 14.0672 2.44037 13.9637 2.29785C13.8749 2.17569 13.768 2.06776 13.6458 1.97896C13.5033 1.87539 13.2984 1.7953 12.8872 1.75074C12.4907 1.70779 11.979 1.70518 11.2479 1.70489C11.6511 2.25924 11.8918 2.93974 11.8919 3.67762V7.41257H10.5038V3.67762C10.5036 2.58751 9.62023 1.70384 8.53007 1.70384H5.98521C5.40065 1.70384 5.00679 1.70449 4.70028 1.73198C4.40651 1.75836 4.24662 1.80577 4.12399 1.87058C4.02069 1.92518 3.92452 1.99283 3.8374 2.07067C3.73401 2.16312 3.634 2.29627 3.50705 2.56255C3.37462 2.84034 3.23734 3.2088 3.03393 3.75682L2.08768 6.30584C1.88395 6.85474 1.81646 7.04347 1.79172 7.17497C1.61005 8.14152 2.25533 9.06908 3.22464 9.23524C3.35654 9.25781 3.55717 9.26129 4.14274 9.26129H5.07023C5.25717 9.26129 5.4593 9.25932 5.62672 9.27901C5.80364 9.29982 6.05492 9.35458 6.27179 9.551C6.37381 9.64347 6.45784 9.75424 6.51982 9.87719C6.65133 10.1382 6.6374 10.3942 6.61048 10.5702C6.58498 10.7367 6.52988 10.931 6.48022 11.1111L6.01439 12.8003L6.00501 12.8347C5.87513 13.3268 6.01464 13.8509 6.37184 14.2134L6.40935 14.251L6.46667 14.2864C6.52866 14.3088 6.60155 14.2912 6.64591 14.2364L6.65738 14.2239L6.65633 14.2228L10.3569 9.52078C10.4543 9.397 10.5491 9.27245 10.6633 9.1675C10.9166 8.93483 11.2325 8.78186 11.572 8.72669C11.7251 8.70184 11.8814 8.70376 12.0389 8.70376C12.7927 8.70376 13.0245 8.69651 13.1956 8.64748C13.6727 8.51051 14.0465 8.13768 14.1836 7.6606C14.2327 7.48941 14.2388 7.25727 14.2388 6.5028V4.85209Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.7484 11.1004C15.6274 11.8866 15.5288 12.5365 15.3882 13.0496C15.243 13.579 15.0339 14.0407 14.6455 14.4162C14.5638 14.4952 14.4775 14.5699 14.387 14.6387C13.9568 14.9656 13.4683 15.1012 12.923 15.1642C12.3944 15.2252 11.7374 15.2245 10.9419 15.2245H5.05809C4.2626 15.2245 3.6056 15.2252 3.07703 15.1642C2.53171 15.1012 2.04317 14.9656 1.61296 14.6387C1.52248 14.5699 1.43618 14.4952 1.35447 14.4162C0.966081 14.0407 0.756961 13.579 0.611839 13.0496C0.471162 12.5365 0.372616 11.8866 0.251648 11.1004L1.6458 10.8864C1.77181 11.7054 1.85791 12.2602 1.97209 12.6767C2.08174 13.0767 2.1976 13.2701 2.3344 13.4024C2.37603 13.4426 2.42074 13.4807 2.46683 13.5158C2.6184 13.6308 2.8272 13.7161 3.23912 13.7636C3.66812 13.8131 4.22949 13.8145 5.05809 13.8145H10.9419C11.7705 13.8145 12.3319 13.8131 12.7609 13.7636C13.1728 13.7161 13.3816 13.6308 13.5332 13.5158C13.5793 13.4807 13.624 13.4426 13.6656 13.4024C13.8024 13.2701 13.9183 13.0767 14.0279 12.6767C14.1421 12.2602 14.2282 11.7054 14.3542 10.8864L15.7484 11.1004ZM7.71503 0.558394C7.90371 0.52798 8.09629 0.52798 8.28498 0.558394C8.63706 0.615181 8.91293 0.790123 9.14944 0.985327C9.37579 1.17216 9.62518 1.42894 9.90478 1.7163L13.387 5.29491L12.8817 5.78753L12.3763 6.27908L8.89412 2.70047C8.82608 2.63054 8.76286 2.56716 8.70555 2.50873V10.5336H7.29445V2.50873C7.23714 2.56716 7.17392 2.63054 7.10588 2.70047L3.62368 6.27908L3.11835 5.78753L2.61302 5.29491L6.09522 1.7163C6.37482 1.42894 6.62422 1.17216 6.85057 0.985327C7.08707 0.790123 7.36294 0.615181 7.71503 0.558394Z" fill="currentColor"></path></svg></div></div></div><div style="flex: 1 1 0%;"></div></div></div><div class="_9663006" data-um-id="11"><div class="d29f3d7d ds-message _63c77b1" style="--panel-width: 0px;"><div class="fbb737a4">для этой задачи не лучше использовать qcustomplot? </div></div><div class="_11d6b3a"><div class="_425ea0b"><div class="ds-flex _78e0558 _0bbda35" style="align-items: flex-end; gap: 0px;"><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button d4910adc" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px; margin-left: 10px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.94073 1.34948C10.7047 0.902375 11.6503 0.90248 12.4143 1.34948C12.706 1.52022 12.9687 1.79124 13.3104 2.1329C13.652 2.47454 13.9231 2.73727 14.0938 3.029C14.5408 3.79301 14.5409 4.73862 14.0938 5.50257C13.9231 5.79422 13.652 6.0571 13.3104 6.39867L6.65929 13.0498C6.28065 13.4284 6.00692 13.7108 5.6654 13.9097C5.32388 14.1085 4.94312 14.2074 4.42702 14.3498L3.24391 14.6762C2.77524 14.8054 2.34535 14.9263 2.00128 14.9685C1.65193 15.0112 1.17961 15.0014 0.810733 14.6326C0.44189 14.2637 0.432076 13.7914 0.474829 13.442C0.517004 13.098 0.63787 12.668 0.767151 12.1994L1.09349 11.0163C1.23585 10.5002 1.33478 10.1194 1.53356 9.77791C1.73246 9.43639 2.01487 9.16266 2.39352 8.78402L9.04463 2.1329C9.38622 1.79132 9.64908 1.52023 9.94073 1.34948ZM15.5427 14.8399H7.5522L8.96704 13.425H15.5427V14.8399ZM3.39379 9.78429C2.96497 10.2131 2.84241 10.3437 2.75706 10.4901C2.6718 10.6366 2.61858 10.8079 2.4573 11.3926L2.13096 12.5757C2.0018 13.0439 1.92191 13.3419 1.8886 13.5536C2.10038 13.5204 2.39869 13.4417 2.86761 13.3123L4.05072 12.986C4.63541 12.8247 4.80666 12.7715 4.9532 12.6862C5.09965 12.6009 5.23019 12.4783 5.65902 12.0495L10.721 6.9865L8.45574 4.72128L3.39379 9.78429ZM11.7 2.57085C11.3774 2.38205 10.9777 2.38205 10.6551 2.57085C10.5602 2.62653 10.4487 2.72937 10.0449 3.13317L9.45601 3.72101L11.7212 5.98623L12.3101 5.3984C12.7139 4.99464 12.8168 4.88314 12.8725 4.78825C13.0612 4.46567 13.0612 4.06592 12.8725 3.74333C12.8168 3.64834 12.7145 3.53758 12.3101 3.13317C11.9057 2.72869 11.795 2.62647 11.7 2.57085Z" fill="currentColor"></path></svg></div></div></div></div></div></div><div class="_4f9bf79 d7dc56a8 _43c05b5" style="--assistant-last-margin-bottom: 32px;"><div class="ds-message _63c77b1" style="--panel-width: 0px;"><div class="_74c0879" style="--collapsible-area-title-height: 38px; --group-title-sticky-top: 0px;"><div class="_245c867"><div class="_5ab5d64"><div class="ds-icon _970ac5e" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.00198 6.6446C8.75032 6.6446 9.35738 7.25175 9.35745 8.00007C9.35745 8.74844 8.75036 9.35554 8.00198 9.35554C7.25373 9.35539 6.64749 8.74835 6.64749 8.00007C6.64756 7.25184 7.25377 6.64474 8.00198 6.6446Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.97171 1.29987C11.5854 0.718977 13.271 0.642258 14.3145 1.68561C15.3578 2.72908 15.2811 4.41472 14.7002 6.02839C14.4708 6.66567 14.1505 7.32943 13.75 8.00007C14.1505 8.67068 14.4708 9.3345 14.7002 9.97175C15.2811 11.5854 15.3579 13.2711 14.3145 14.3145C13.2711 15.3579 11.5854 15.2812 9.97171 14.7003C9.33446 14.4708 8.67065 14.1505 8.00003 13.7501C7.32939 14.1505 6.66564 14.4708 6.02835 14.7003C4.41467 15.2812 2.72905 15.3578 1.68558 14.3145C0.642216 13.2711 0.718931 11.5854 1.29984 9.97175C1.52921 9.3346 1.84871 8.67055 2.24905 8.00007C1.84872 7.32959 1.52921 6.66551 1.29984 6.02839C0.718913 4.41465 0.642131 2.72906 1.68558 1.68561C2.72903 0.642173 4.41462 0.718948 6.02835 1.29987C6.66547 1.52925 7.32956 1.84876 8.00003 2.24909C8.67051 1.84875 9.33457 1.52925 9.97171 1.29987ZM12.9405 9.21296C12.4392 9.89306 11.8617 10.5681 11.2149 11.2149C10.5681 11.8617 9.89302 12.4392 9.21292 12.9405C9.62538 13.1579 10.0271 13.338 10.4121 13.4766C11.9147 14.0175 12.9173 13.8738 13.3955 13.3956C13.8738 12.9173 14.0175 11.9147 13.4766 10.4122C13.338 10.0272 13.1579 9.62541 12.9405 9.21296ZM3.05862 9.21296C2.84127 9.62529 2.66203 10.0273 2.52347 10.4122C1.98258 11.9147 2.12633 12.9173 2.60452 13.3956C3.08284 13.8737 4.08551 14.0175 5.58792 13.4766C5.9727 13.3381 6.37395 13.1578 6.78616 12.9405C6.1063 12.4393 5.43174 11.8615 4.78519 11.2149C4.13829 10.568 3.55999 9.8932 3.05862 9.21296ZM7.99905 3.79206C7.23185 4.31425 6.45312 4.95519 5.70413 5.70417C4.95515 6.45315 4.31421 7.2319 3.79202 7.99909C4.31437 8.76672 4.95477 9.54659 5.70413 10.296C6.45315 11.045 7.23277 11.6849 8.00003 12.2071C8.76731 11.6849 9.54689 11.045 10.2959 10.296C11.045 9.54692 11.6848 8.76735 12.2071 8.00007C11.6848 7.23281 11.0449 6.45318 10.2959 5.70417C9.54656 4.95481 8.76668 4.3144 7.99905 3.79206ZM5.58792 2.52351C4.08539 1.98261 3.08278 2.12632 2.60452 2.60456C2.12627 3.08281 1.98258 4.08542 2.52347 5.58796C2.66195 5.97259 2.84146 6.37415 3.05862 6.7862C3.55989 6.10617 4.13846 5.43196 4.78519 4.78522C5.43193 4.13849 6.10612 3.55993 6.78616 3.05866C6.37411 2.8415 5.97255 2.66198 5.58792 2.52351ZM13.3955 2.60456C12.9173 2.12637 11.9146 1.98263 10.4121 2.52351C10.0272 2.66207 9.62525 2.84131 9.21292 3.05866C9.89316 3.56002 10.568 4.13833 11.2149 4.78522C11.8614 5.43178 12.4393 6.10633 12.9405 6.7862C13.1577 6.37399 13.3381 5.97273 13.4766 5.58796C14.0174 4.08555 13.8737 3.08287 13.3955 2.60456Z" fill="currentColor"></path></svg></div><span class="_5255ff8 _4d41763">Thought for 14 seconds</span><div class="ds-icon" style="font-size: 14px; width: 14px; height: 14px;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.8487 5.5L11.4239 5.92383L8.6973 8.65137C8.4416 8.90706 8.21565 9.13382 8.01175 9.29785C7.79915 9.46883 7.55598 9.61756 7.25003 9.66602C7.08438 9.69222 6.91568 9.69222 6.75003 9.66602C6.44408 9.61756 6.20091 9.46883 5.98831 9.29785C5.78442 9.13382 5.55846 8.90706 5.30276 8.65137L2.5762 5.92383L2.1514 5.5L3.00003 4.65137L3.42386 5.07617L6.1514 7.80273C6.42598 8.07732 6.59879 8.24849 6.74026 8.3623C6.87294 8.46904 6.92275 8.47813 6.93753 8.48047C6.97898 8.48703 7.02108 8.48703 7.06253 8.48047C7.07731 8.47813 7.12712 8.46904 7.2598 8.3623C7.40127 8.24849 7.57408 8.07732 7.84866 7.80273L10.5762 5.07617L11 4.65137L11.8487 5.5Z" fill="currentColor"></path></svg></div></div><div class="c99b79f8" style="opacity: 0;"></div></div><div class="c2b72bb8"></div><div class="e1675d8b ds-think-content _767406f"><div class="ddd26891 _9b52f6c" style="width: 16px; height: 16px;"><div class="a510c7ce _0652043"></div></div><div class="_9ecc93a"></div><div class="ds-markdown" style="--ds-md-zoom: 1.143;"><p class="ds-markdown-paragraph"><span>Мы переключимся на использование QCustomPlot, так как это более гибкая и производительная библиотека для построения графиков, особенно когда речь идет о большом количестве данных и необходимости частого обновления.</span></p><p class="ds-markdown-paragraph"><span>Преимущества QCustomPlot для нашей задачи:</span></p><ul><li><p class="ds-markdown-paragraph"><span>Высокая производительность при работе с большими массивами данных.</span></p></li><li><p class="ds-markdown-paragraph"><span>Гибкие возможности настройки осей, графиков и взаимодействия с пользователем.</span></p></li><li><p class="ds-markdown-paragraph"><span>Поддержка масштабирования, прокрутки и сохранения графиков.</span></p></li></ul><p class="ds-markdown-paragraph"><span>План:</span></p><ol start="1"><li><p class="ds-markdown-paragraph"><span>Заменить QtCharts на QCustomPlot в проекте.</span></p></li><li><p class="ds-markdown-paragraph"><span>Адаптировать GraphWidget для использования QCustomPlot.</span></p></li><li><p class="ds-markdown-paragraph"><span>Реализовать те же функции: автопрокрутка, ручная навигация, масштабирование.</span></p></li></ol><p class="ds-markdown-paragraph"><span>Шаги:</span></p><ul><li><p class="ds-markdown-paragraph"><span>Скачаем и подключим библиотеку QCustomPlot к проекту.</span></p></li><li><p class="ds-markdown-paragraph"><span>Перепишем GraphWidget, используя QCustomPlot.</span></p></li></ul><p class="ds-markdown-paragraph"><span>Предполагается, что у нас есть 32 графика, каждый в своем QCustomPlot.</span></p><p class="ds-markdown-paragraph"><span>Однако, note: QCustomPlot - это один виджет, который может содержать несколько графиков (множественные оси). Но у нас 32 графика, и мы хотим, чтобы они были отдельными и прокручивались. Поэтому мы можем использовать аналогичный подход с сеткой и 32 экземплярами QCustomPlot.</span></p><p class="ds-markdown-paragraph"><span>Альтернатива: использовать один QCustomPlot с 32 графиками и 32 осями, но это может быть перегружено и сложно для навигации. Поэтому мы будем использовать 32 виджета QCustomPlot в QGridLayout.</span></p><p class="ds-markdown-paragraph"><span>Подключение QCustomPlot:</span></p><ul><li><p class="ds-markdown-paragraph"><span>Добавим файлы qcustomplot.h и qcustomplot.cpp в проект.</span></p></li><li><p class="ds-markdown-paragraph"><span>В CMakeLists.txt добавим их в компиляцию.</span></p></li></ul><p class="ds-markdown-paragraph"><span>Давайте модифицируем GraphWidget для использования QCustomPlot.</span></p><p class="ds-markdown-paragraph"><span>graphwidget.h:</span></p></div></div><div class="_8f7678d"></div></div><div class="ds-markdown" style="--ds-md-zoom: 1.143;"><p class="ds-markdown-paragraph"><span>Вы абсолютно правы! Для такой задачи </span><strong><span>QCustomPlot</span></strong><span> действительно будет лучше по нескольким причинам:</span></p><ol start="1"><li><p class="ds-markdown-paragraph"><strong><span>Высокая производительность</span></strong><span> с большими объемами данных</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Гибкое управление</span></strong><span> данными и отображением</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Встроенные функции</span></strong><span> для работы с историей данных</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Лучшая оптимизация</span></strong><span> для реального времени</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Более удобное API</span></strong><span> для подобных задач</span></p></li></ol><p class="ds-markdown-paragraph"><span>Давайте перепишем реализацию с использованием QCustomPlot:</span></p><h3><span>1. Подключение QCustomPlot</span></h3><p class="ds-markdown-paragraph"><span>Сначала добавим QCustomPlot в проект. Если используете CMake:</span></p><p class="ds-markdown-paragraph"><strong><span>CMakeLists.txt</span></strong></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cmake</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.16</span><span class="token punctuation">)</span>
<span class="token keyword">project</span><span class="token punctuation">(</span>WaveformViewer<span class="token punctuation">)</span>

<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_STANDARD</span> <span class="token number">17</span><span class="token punctuation">)</span>
<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_STANDARD_REQUIRED</span> <span class="token boolean">ON</span><span class="token punctuation">)</span>

<span class="token keyword">find_package</span><span class="token punctuation">(</span>Qt6 REQUIRED COMPONENTS Core Widgets Concurrent<span class="token punctuation">)</span>

<span class="token function">qt_standard_project_setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># Добавляем QCustomPlot</span>
<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">QCP_SOURCE_DIR</span> <span class="token punctuation">${</span><span class="token variable">CMAKE_CURRENT_SOURCE_DIR</span><span class="token punctuation">}</span>/qcustomplot<span class="token punctuation">)</span>
<span class="token keyword">include_directories</span><span class="token punctuation">(</span><span class="token punctuation">${</span><span class="token variable">QCP_SOURCE_DIR</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">qt_add_executable</span><span class="token punctuation">(</span>WaveformViewer
    main.cpp
    mainwindow.cpp
    graphwidget.cpp
    <span class="token punctuation">${</span><span class="token variable">QCP_SOURCE_DIR</span><span class="token punctuation">}</span>/qcustomplot.cpp
<span class="token punctuation">)</span>

<span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>WaveformViewer <span class="token inserted class-name">Qt6::Core</span> <span class="token inserted class-name">Qt6::Widgets</span> <span class="token inserted class-name">Qt6::Concurrent</span><span class="token punctuation">)</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>2. Обновленный GraphWidget с QCustomPlot</span></h3><p class="ds-markdown-paragraph"><strong><span>graphwidget.h</span></strong></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">GRAPHWIDGET_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GRAPHWIDGET_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVBoxLayout&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QHBoxLayout&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QScrollArea&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QSlider&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QCheckBox&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QGroupBox&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"qcustomplot.h"</span></span>

<span class="token keyword">class</span> <span class="token class-name">GraphWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span> <span class="token punctuation">{</span>
    Q_OBJECT

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">explicit</span> <span class="token function">GraphWidget</span><span class="token punctuation">(</span>QWidget<span class="token operator">*</span> parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">updateGraphs</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> newData<span class="token punctuation">,</span> <span class="token keyword">int</span> currentCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">clearGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">setVisibleRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">toggleAutoScroll</span><span class="token punctuation">(</span><span class="token keyword">bool</span> enabled<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">zoomIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">zoomOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">resetZoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">showAllChannels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">showSelectedChannels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">channelVisibilityChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">setupUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">setupGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">updatePlot</span><span class="token punctuation">(</span><span class="token keyword">int</span> channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">setupChannelSelector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Основные layout</span>
    QVBoxLayout<span class="token operator">*</span> mainLayout<span class="token punctuation">;</span>
    QHBoxLayout<span class="token operator">*</span> controlLayout<span class="token punctuation">;</span>
    QGridLayout<span class="token operator">*</span> plotsLayout<span class="token punctuation">;</span>
    QScrollArea<span class="token operator">*</span> scrollArea<span class="token punctuation">;</span>
    QWidget<span class="token operator">*</span> plotsWidget<span class="token punctuation">;</span>
    
    <span class="token comment">// Элементы управления</span>
    QSlider<span class="token operator">*</span> rangeSlider<span class="token punctuation">;</span>
    QLabel<span class="token operator">*</span> rangeLabel<span class="token punctuation">;</span>
    QPushButton<span class="token operator">*</span> zoomInButton<span class="token punctuation">;</span>
    QPushButton<span class="token operator">*</span> zoomOutButton<span class="token punctuation">;</span>
    QPushButton<span class="token operator">*</span> resetZoomButton<span class="token punctuation">;</span>
    QCheckBox<span class="token operator">*</span> autoScrollCheck<span class="token punctuation">;</span>
    QGroupBox<span class="token operator">*</span> channelGroup<span class="token punctuation">;</span>
    
    <span class="token comment">// Данные графиков</span>
    QVector<span class="token operator">&lt;</span>QCustomPlot<span class="token operator">*</span><span class="token operator">&gt;</span> plots<span class="token punctuation">;</span>
    QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;&gt;</span> channelsDataX<span class="token punctuation">;</span>
    QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;&gt;</span> channelsDataY<span class="token punctuation">;</span>
    QVector<span class="token operator">&lt;</span>QCheckBox<span class="token operator">*</span><span class="token operator">&gt;</span> channelCheckboxes<span class="token punctuation">;</span>
    
    <span class="token comment">// Параметры отображения</span>
    <span class="token keyword">int</span> totalPoints <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> visibleRange <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> autoScroll <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">double</span> zoomFactor <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> dataCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// GRAPHWIDGET_H</span></span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><p class="ds-markdown-paragraph"><strong><span>graphwidget.cpp</span></strong></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"graphwidget.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>

<span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">GraphWidget</span><span class="token punctuation">(</span>QWidget<span class="token operator">*</span> parent<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    channelsDataX<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    channelsDataY<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setupUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setupGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setupChannelSelector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">setupUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mainLayout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QVBoxLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Панель управления</span>
    controlLayout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QHBoxLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    autoScrollCheck <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QCheckBox</span><span class="token punctuation">(</span><span class="token string">"Автопрокрутка"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    autoScrollCheck<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>autoScrollCheck<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QCheckBox<span class="token double-colon punctuation">::</span>toggled<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>GraphWidget<span class="token double-colon punctuation">::</span>toggleAutoScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    rangeLabel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"Видимые точки: 500"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    rangeSlider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QSlider</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>Horizontal<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rangeSlider<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rangeSlider<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rangeSlider<span class="token operator">-&gt;</span><span class="token function">setTickPosition</span><span class="token punctuation">(</span>QSlider<span class="token double-colon punctuation">::</span>TicksBelow<span class="token punctuation">)</span><span class="token punctuation">;</span>
    rangeSlider<span class="token operator">-&gt;</span><span class="token function">setTickInterval</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>rangeSlider<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QSlider<span class="token double-colon punctuation">::</span>valueChanged<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>GraphWidget<span class="token double-colon punctuation">::</span>setVisibleRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    zoomInButton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"+ Увеличить"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    zoomOutButton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"- Уменьшить"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resetZoomButton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"Сброс"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token function">connect</span><span class="token punctuation">(</span>zoomInButton<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>GraphWidget<span class="token double-colon punctuation">::</span>zoomIn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>zoomOutButton<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>GraphWidget<span class="token double-colon punctuation">::</span>zoomOut<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>resetZoomButton<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>GraphWidget<span class="token double-colon punctuation">::</span>resetZoom<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>autoScrollCheck<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>rangeLabel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>rangeSlider<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>zoomInButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>zoomOutButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>resetZoomButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    controlLayout<span class="token operator">-&gt;</span><span class="token function">addStretch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Группа выбора каналов</span>
    channelGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGroupBox</span><span class="token punctuation">(</span><span class="token string">"Видимые каналы"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QHBoxLayout<span class="token operator">*</span> channelLayout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QHBoxLayout</span><span class="token punctuation">(</span>channelGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    QPushButton<span class="token operator">*</span> showAllBtn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"Все"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QPushButton<span class="token operator">*</span> hideAllBtn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"Ни одного"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>showAllBtn<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>GraphWidget<span class="token double-colon punctuation">::</span>showAllChannels<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>hideAllBtn<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>GraphWidget<span class="token double-colon punctuation">::</span>showSelectedChannels<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    channelLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>showAllBtn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    channelLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>hideAllBtn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Создаем чекбоксы для каналов</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        QCheckBox<span class="token operator">*</span> checkbox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QCheckBox</span><span class="token punctuation">(</span><span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">number</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        checkbox<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        channelCheckboxes<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>checkbox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        channelLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>checkbox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">connect</span><span class="token punctuation">(</span>checkbox<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QCheckBox<span class="token double-colon punctuation">::</span>toggled<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>GraphWidget<span class="token double-colon punctuation">::</span>channelVisibilityChanged<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Область с графиками</span>
    plotsWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    plotsLayout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGridLayout</span><span class="token punctuation">(</span>plotsWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    scrollArea <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QScrollArea</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    scrollArea<span class="token operator">-&gt;</span><span class="token function">setWidget</span><span class="token punctuation">(</span>plotsWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    scrollArea<span class="token operator">-&gt;</span><span class="token function">setWidgetResizable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    mainLayout<span class="token operator">-&gt;</span><span class="token function">addLayout</span><span class="token punctuation">(</span>controlLayout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mainLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>channelGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mainLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>scrollArea<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">setupGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Очищаем предыдущие графики</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> plot <span class="token operator">:</span> plots<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">delete</span> plot<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    plots<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Создаем 32 графика</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        QCustomPlot<span class="token operator">*</span> plot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QCustomPlot</span><span class="token punctuation">(</span>plotsWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
        plot<span class="token operator">-&gt;</span><span class="token function">setMinimumSize</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// Настраиваем оси</span>
        plot<span class="token operator">-&gt;</span>xAxis<span class="token operator">-&gt;</span><span class="token function">setLabel</span><span class="token punctuation">(</span><span class="token string">"Время (точки)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        plot<span class="token operator">-&gt;</span>yAxis<span class="token operator">-&gt;</span><span class="token function">setLabel</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Канал %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// Создаем график</span>
        plot<span class="token operator">-&gt;</span><span class="token function">addGraph</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        plot<span class="token operator">-&gt;</span><span class="token function">graph</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setPen</span><span class="token punctuation">(</span><span class="token function">QPen</span><span class="token punctuation">(</span><span class="token function">QColor</span><span class="token punctuation">(</span><span class="token function">qSin</span><span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token operator">+</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token function">qCos</span><span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token number">0.6</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token operator">+</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token function">qSin</span><span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token number">0.9</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token operator">+</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// Включаем взаимодействие</span>
        plot<span class="token operator">-&gt;</span><span class="token function">setInteractions</span><span class="token punctuation">(</span>QCP<span class="token double-colon punctuation">::</span>iRangeDrag <span class="token operator">|</span> QCP<span class="token double-colon punctuation">::</span>iRangeZoom <span class="token operator">|</span> QCP<span class="token double-colon punctuation">::</span>iSelectPlottables<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// Настраиваем легенду</span>
        plot<span class="token operator">-&gt;</span><span class="token function">plotLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">insertRow</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        plot<span class="token operator">-&gt;</span><span class="token function">plotLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">QCPTextElement</span><span class="token punctuation">(</span>plot<span class="token punctuation">,</span> <span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Канал %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">QFont</span><span class="token punctuation">(</span><span class="token string">"sans"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> QFont<span class="token double-colon punctuation">::</span>Bold<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        plots<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>plot<span class="token punctuation">)</span><span class="token punctuation">;</span>
        plotsLayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>plot<span class="token punctuation">,</span> i <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">,</span> i <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">setupChannelSelector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Изначально все каналы видны</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        plots<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">setVisible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">updateGraphs</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> newData<span class="token punctuation">,</span> <span class="token keyword">int</span> currentCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Добавляем новые данные</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> channel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> channel <span class="token operator">&lt;</span> <span class="token number">32</span> <span class="token operator">&amp;&amp;</span> channel <span class="token operator">&lt;</span> newData<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> channelData <span class="token operator">=</span> newData<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token punctuation">;</span>
        
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> channelData<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            channelsDataX<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>dataCounter <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            channelsDataY<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>channelData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    dataCounter <span class="token operator">+=</span> newData<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    totalPoints <span class="token operator">=</span> channelsDataX<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Обновляем графики</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> channel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> channel <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>plots<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">isVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">updatePlot</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    rangeLabel<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Точек: %1 | Всего: %2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>visibleRange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>totalPoints<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">updatePlot</span><span class="token punctuation">(</span><span class="token keyword">int</span> channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>channelsDataX<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    
    QCustomPlot<span class="token operator">*</span> plot <span class="token operator">=</span> plots<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token punctuation">;</span>
    QCPGraph<span class="token operator">*</span> graph <span class="token operator">=</span> plot<span class="token operator">-&gt;</span><span class="token function">graph</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Определяем диапазон данных для отображения</span>
    <span class="token keyword">int</span> startIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> displayCount <span class="token operator">=</span> channelsDataX<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>autoScroll <span class="token operator">&amp;&amp;</span> displayCount <span class="token operator">&gt;</span> visibleRange<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        startIndex <span class="token operator">=</span> displayCount <span class="token operator">-</span> visibleRange<span class="token punctuation">;</span>
        displayCount <span class="token operator">=</span> visibleRange<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Применяем масштабирование</span>
    <span class="token keyword">int</span> effectiveRange <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>visibleRange <span class="token operator">*</span> zoomFactor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>autoScroll <span class="token operator">&amp;&amp;</span> displayCount <span class="token operator">&gt;</span> effectiveRange<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        startIndex <span class="token operator">=</span> displayCount <span class="token operator">-</span> effectiveRange<span class="token punctuation">;</span>
        displayCount <span class="token operator">=</span> effectiveRange<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Устанавливаем данные</span>
    QVector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span> <span class="token function">displayX</span><span class="token punctuation">(</span>channelsDataX<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> startIndex<span class="token punctuation">,</span> 
                            channelsDataX<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> startIndex <span class="token operator">+</span> displayCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QVector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span> <span class="token function">displayY</span><span class="token punctuation">(</span>channelsDataY<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> startIndex<span class="token punctuation">,</span> 
                            channelsDataY<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> startIndex <span class="token operator">+</span> displayCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    graph<span class="token operator">-&gt;</span><span class="token function">setData</span><span class="token punctuation">(</span>displayX<span class="token punctuation">,</span> displayY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Настраиваем оси</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>autoScroll<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">double</span> minX <span class="token operator">=</span> displayX<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> displayX<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> maxX <span class="token operator">=</span> displayX<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> displayX<span class="token punctuation">.</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        plot<span class="token operator">-&gt;</span>xAxis<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span>minX<span class="token punctuation">,</span> maxX<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// В ручном режиме не меняем автоматически диапазон по X</span>
        <span class="token comment">// Пользователь сам может настроить с помощью drag/zoom</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>plot<span class="token operator">-&gt;</span>xAxis<span class="token operator">-&gt;</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Если пользователь еще не настроил, устанавливаем разумный диапазон</span>
            <span class="token keyword">double</span> minX <span class="token operator">=</span> displayX<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> displayX<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">double</span> maxX <span class="token operator">=</span> displayX<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> displayX<span class="token punctuation">.</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            plot<span class="token operator">-&gt;</span>xAxis<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span>minX<span class="token punctuation">,</span> maxX<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// Автоматическое масштабирование по Y</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>displayY<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">double</span> minY <span class="token operator">=</span> <span class="token operator">*</span>std<span class="token double-colon punctuation">::</span><span class="token function">min_element</span><span class="token punctuation">(</span>displayY<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> displayY<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> maxY <span class="token operator">=</span> <span class="token operator">*</span>std<span class="token double-colon punctuation">::</span><span class="token function">max_element</span><span class="token punctuation">(</span>displayY<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> displayY<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> margin <span class="token operator">=</span> <span class="token punctuation">(</span>maxY <span class="token operator">-</span> minY<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>margin <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> margin <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
        
        plot<span class="token operator">-&gt;</span>yAxis<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span>minY <span class="token operator">-</span> margin<span class="token punctuation">,</span> maxY <span class="token operator">+</span> margin<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    plot<span class="token operator">-&gt;</span><span class="token function">replot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">setVisibleRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    visibleRange <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> channel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> channel <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>plots<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">isVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">updatePlot</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    rangeLabel<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Видимые точки: %1 | Всего: %2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>visibleRange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>totalPoints<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">toggleAutoScroll</span><span class="token punctuation">(</span><span class="token keyword">bool</span> enabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    autoScroll <span class="token operator">=</span> enabled<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> channel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> channel <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>plots<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">isVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">updatePlot</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">zoomIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    zoomFactor <span class="token operator">*=</span> <span class="token number">0.8</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>zoomFactor <span class="token operator">&lt;</span> <span class="token number">0.1</span><span class="token punctuation">)</span> zoomFactor <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
    <span class="token function">setVisibleRange</span><span class="token punctuation">(</span>visibleRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">zoomOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    zoomFactor <span class="token operator">*=</span> <span class="token number">1.25</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>zoomFactor <span class="token operator">&gt;</span> <span class="token number">10.0</span><span class="token punctuation">)</span> zoomFactor <span class="token operator">=</span> <span class="token number">10.0</span><span class="token punctuation">;</span>
    <span class="token function">setVisibleRange</span><span class="token punctuation">(</span>visibleRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">resetZoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    zoomFactor <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> channel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> channel <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        QCustomPlot<span class="token operator">*</span> plot <span class="token operator">=</span> plots<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token punctuation">;</span>
        plot<span class="token operator">-&gt;</span>xAxis<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> visibleRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
        plot<span class="token operator">-&gt;</span>yAxis<span class="token operator">-&gt;</span><span class="token function">rescale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        plot<span class="token operator">-&gt;</span><span class="token function">replot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">showAllChannels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        channelCheckboxes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        plots<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">setVisible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">showSelectedChannels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        channelCheckboxes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        plots<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">setVisible</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">channelVisibilityChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        plots<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">setVisible</span><span class="token punctuation">(</span>channelCheckboxes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">GraphWidget</span><span class="token double-colon punctuation">::</span><span class="token function">clearGraphs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> channel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> channel <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        channelsDataX<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        channelsDataY<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        plots<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">graph</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        plots<span class="token punctuation">[</span>channel<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">replot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    totalPoints <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    dataCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    rangeLabel<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Видимые точки: 500 | Всего: 0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>3. Оптимизированный DataReader для QCustomPlot</span></h3><p class="ds-markdown-paragraph"><strong><span>filehandler.h</span></strong><span> (оптимизированная версия)</span></p><div class="md-code-block md-code-block-light"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner md-code-block-banner-lite"><div class="_121d384"><div class="d2a24f03"><span class="d813de27">cpp</span></div><div class="d2a24f03 _246a029"><div class="efa13877"><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon" style="margin-right: 4px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Copy</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button ds-text-button ds-text-button--with-icon"><div class="ds-icon ds-atom-button__icon" style="font-size: 16px; width: 16px; height: 16px; margin-right: 3px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.3694 11.4111L15.1234 12.8866C14.8869 14.3043 13.6602 15.3436 12.223 15.3437H3.77667C2.33951 15.3435 1.11273 14.3042 0.876282 12.8866L0.630188 11.4111L2.05402 11.1747L2.29913 12.6493C2.41966 13.3713 3.04469 13.9001 3.77667 13.9003H12.223C12.9551 13.9003 13.5799 13.3714 13.7005 12.6493L13.9456 11.1747L15.3694 11.4111ZM8.72198 8.99406C8.77711 8.9394 8.83786 8.88112 8.90265 8.81633L12.4827 5.2343L13.5042 6.25578L9.92218 9.83586C9.63943 10.1186 9.38757 10.3732 9.15851 10.5575C8.91886 10.7503 8.63947 10.9225 8.28644 10.9784C8.09704 11.0084 7.90357 11.0084 7.71417 10.9784C7.36099 10.9225 7.08084 10.7504 6.84113 10.5575C6.61209 10.3732 6.36016 10.1186 6.07745 9.83586L2.4964 6.25578L3.51691 5.2343L7.09698 8.81633C7.16213 8.88148 7.22324 8.94012 7.27863 8.99504V1.30656H8.72198V8.99406Z" fill="currentColor"></path></svg></div><span class=""><span class="code-info-button-text">Download</span></span></button></div></div></div></div></div><pre><span class="token keyword">class</span> <span class="token class-name">DataReader</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">{</span>
    Q_OBJECT
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">explicit</span> <span class="token function">DataReader</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString<span class="token operator">&amp;</span> filename<span class="token punctuation">,</span> QObject<span class="token operator">*</span> parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token function">QThread</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">filename</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token keyword">void</span> <span class="token function">stopReading</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        keepReading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Метод для получения всех накопленных данных (для истории)</span>
    QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span> <span class="token function">getAllData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
        QMutexLocker <span class="token function">locker</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> allData<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

signals<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">newDataRead</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> newData<span class="token punctuation">,</span> <span class="token keyword">int</span> packetCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">resetRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">{</span>
        QFile <span class="token function">file</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">while</span> <span class="token punctuation">(</span>keepReading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> lastReadPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> lastReadPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    <span class="token punctuation">{</span>
                        QMutexLocker <span class="token function">locker</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        allData<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            allData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">QVector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    emit <span class="token function">resetRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">continue</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>lastReadPosition<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            QDataStream <span class="token function">in</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
            in<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>QDataStream<span class="token double-colon punctuation">::</span>Qt_6_0<span class="token punctuation">)</span><span class="token punctuation">;</span>

            QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span> data<span class="token punctuation">;</span>
            <span class="token keyword">int</span> packetCount<span class="token punctuation">;</span>
            QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span> newDataPackets<span class="token punctuation">;</span>

            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">.</span><span class="token function">atEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                in <span class="token operator">&gt;&gt;</span> data <span class="token operator">&gt;&gt;</span> packetCount<span class="token punctuation">;</span>
                
                <span class="token keyword">if</span> <span class="token punctuation">(</span>in<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> QDataStream<span class="token double-colon punctuation">::</span>Ok <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">32</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    newDataPackets<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    lastReadPosition <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>newDataPackets<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// Сохраняем в общий буфер</span>
                <span class="token punctuation">{</span>
                    QMutexLocker <span class="token function">locker</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> packet <span class="token operator">:</span> newDataPackets<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            allData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>packet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                
                <span class="token comment">// Транспонируем для отправки новых данных</span>
                QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span> <span class="token function">newDataByChannels</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    newDataByChannels<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">QVector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> packet <span class="token operator">:</span> newDataPackets<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        newDataByChannels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>packet<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                
                emit <span class="token function">newDataRead</span><span class="token punctuation">(</span>newDataByChannels<span class="token punctuation">,</span> packetCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    QString filename<span class="token punctuation">;</span>
    qint64 lastReadPosition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> keepReading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">mutable</span> QMutex mutex<span class="token punctuation">;</span>
    QVector<span class="token operator">&lt;</span>QVector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;&gt;</span> allData<span class="token punctuation">;</span> <span class="token comment">// Полная история данных</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _33882ae"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none" class="_9bc997d _28d7e84"><path d="M-5.24537e-07 0C-2.34843e-07 6.62742 5.37258 12 12 12L0 12L-5.24537e-07 0Z" fill="currentColor"></path></svg></div><h3><span>Преимущества использования QCustomPlot для этой задачи:</span></h3><ol start="1"><li><p class="ds-markdown-paragraph"><strong><span>Производительность</span></strong><span>: QCustomPlot оптимизирован для большого количества точек</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Гибкое управление данными</span></strong><span>: Встроенные механизмы для работы с историей</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Интерактивность</span></strong><span>: Drag &amp; zoom из коробки</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Кастомизация</span></strong><span>: Легко настраивать цвета, стили, оси</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Память</span></strong><span>: Более эффективное использование памяти при больших объемах данных</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Обновление графиков</span></strong><span>: Метод </span><code>replot()</code><span> оптимизирован для частых обновлений</span></p></li></ol><h3><span>Дополнительные улучшения, которые можно добавить:</span></h3><ol start="1"><li><p class="ds-markdown-paragraph"><strong><span>Экспорт данных</span></strong><span> в CSV</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Синхронизацию осей</span></strong><span> между графиками</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Разные цветовые схемы</span></strong></p></li><li><p class="ds-markdown-paragraph"><strong><span>Статистику</span></strong><span> по каналам</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Триггеры</span></strong><span> и маркеры</span></p></li><li><p class="ds-markdown-paragraph"><strong><span>Спектральный анализ</span></strong></p></li></ol><p class="ds-markdown-paragraph"><span>QCustomPlot действительно намного лучше подходит для таких задач визуализации данных в реальном времени, особенно когда требуется работа с историей и гибкое управление отображением.</span></p></div></div><div class="ds-theme" style="--ds-rgb-hover: 245 245 245; --ds-rgb-primary: 77 107 254; --ds-button-hover-color: #2563EB; --ds-bordered-secondary-button-color: var(--dsr-text-1); --ds-input-prefix-color: var(--dsr-text-1);"></div><div class="ds-flex _0a3d93b" style="align-items: center; gap: 10px;"><div class="ds-flex _965abe9 _54866f7" style="align-items: center; gap: 10px;"><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.14926 4.02039C7.11194 4.02039 7.8798 4.02023 8.49594 4.07605C9.12125 4.13276 9.65789 4.25194 10.1414 4.53113C10.7201 4.86536 11.2008 5.34597 11.535 5.92468C11.8142 6.40824 11.9334 6.94488 11.9901 7.57019C12.0459 8.18631 12.0457 8.95426 12.0457 9.91687C12.0457 10.8795 12.0459 11.6474 11.9901 12.2635C11.9334 12.8889 11.8142 13.4255 11.535 13.9091C11.2008 14.4877 10.7201 14.9684 10.1414 15.3026C9.65789 15.5818 9.12125 15.701 8.49594 15.7577C7.87981 15.8135 7.11193 15.8134 6.14926 15.8134C5.18664 15.8134 4.41871 15.8135 3.80258 15.7577C3.17727 15.701 2.64063 15.5818 2.15707 15.3026C1.57837 14.9684 1.09775 14.4877 0.763519 13.9091C0.484335 13.4255 0.365153 12.8889 0.308441 12.2635C0.252618 11.6474 0.252777 10.8795 0.252777 9.91687C0.252777 8.95425 0.252634 8.18632 0.308441 7.57019C0.365153 6.94488 0.484335 6.40824 0.763519 5.92468C1.09774 5.34596 1.57836 4.86535 2.15707 4.53113C2.64063 4.25194 3.17727 4.13276 3.80258 4.07605C4.41871 4.02024 5.18663 4.02039 6.14926 4.02039ZM6.14926 5.37781C5.16178 5.37781 4.46631 5.37768 3.92563 5.42664C3.39431 5.47479 3.07856 5.5658 2.83578 5.70593C2.46317 5.92112 2.15351 6.23077 1.93832 6.60339C1.7982 6.84617 1.70718 7.16192 1.65903 7.69324C1.61007 8.23391 1.6102 8.9294 1.6102 9.91687C1.6102 10.9044 1.61006 11.5998 1.65903 12.1405C1.70718 12.6718 1.7982 12.9876 1.93832 13.2303C2.15352 13.6029 2.46318 13.9126 2.83578 14.1278C3.07856 14.2679 3.39431 14.3589 3.92563 14.4071C4.46631 14.4561 5.16179 14.4559 6.14926 14.4559C7.13679 14.4559 7.83221 14.4561 8.37289 14.4071C8.90422 14.3589 9.21996 14.2679 9.46274 14.1278C9.83532 13.9126 10.145 13.6029 10.3602 13.2303C10.5003 12.9876 10.5913 12.6718 10.6395 12.1405C10.6885 11.5998 10.6883 10.9044 10.6883 9.91687C10.6883 8.92941 10.6885 8.23391 10.6395 7.69324C10.5913 7.16192 10.5003 6.84617 10.3602 6.60339C10.145 6.23078 9.83533 5.92113 9.46274 5.70593C9.21996 5.5658 8.90421 5.47479 8.37289 5.42664C7.83221 5.37766 7.13679 5.37781 6.14926 5.37781ZM9.80161 0.368042C10.7638 0.368042 11.5314 0.367947 12.1473 0.423706C12.7725 0.480374 13.3093 0.598826 13.7928 0.877808C14.3716 1.21198 14.8521 1.69361 15.1864 2.27234C15.4655 2.75581 15.5857 3.29171 15.6424 3.91687C15.6983 4.53307 15.6971 5.30167 15.6971 6.26453V7.82996C15.6971 8.29271 15.6989 8.59 15.6649 8.84851C15.4668 10.3526 14.4009 11.5739 12.9832 11.9989V10.5468C13.6973 10.1904 14.2104 9.49669 14.3192 8.67175C14.3387 8.52354 14.3407 8.33586 14.3407 7.82996V6.26453C14.3407 5.27713 14.3398 4.58155 14.2909 4.04089C14.2427 3.50975 14.1526 3.19379 14.0125 2.95105C13.7974 2.57856 13.4875 2.26876 13.1151 2.05359C12.8723 1.91353 12.5564 1.82244 12.0252 1.77429C11.4847 1.72534 10.7888 1.72546 9.80161 1.72546H7.71469C6.75617 1.72565 5.92662 2.27704 5.52328 3.07898H4.07016C4.54218 1.51138 5.99317 0.368253 7.71469 0.368042H9.80161Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.92142 0.349213C10.3745 0.349295 12.5564 1.50526 13.9558 3.299L15.1282 2.12765C15.3304 1.92552 15.6768 2.06949 15.6768 2.35544V5.53929C15.6766 5.71632 15.533 5.85982 15.356 5.86008H12.1711C11.8855 5.85976 11.7427 5.51471 11.9443 5.31255L12.9642 4.29062C11.8238 2.74311 9.98914 1.74112 7.92142 1.74104C4.46442 1.74104 1.66239 4.54307 1.66239 8.00006C1.66239 11.4571 4.46442 14.2591 7.92142 14.2591C11.3783 14.2589 14.1804 11.457 14.1804 8.00006H15.5723C15.5723 12.2252 12.1465 15.6508 7.92142 15.6509C3.6962 15.6509 0.270569 12.2253 0.270569 8.00006C0.270569 3.77485 3.6962 0.349213 7.92142 0.349213Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.27861 0.811633C8.81985 0.142255 9.79016 0.0422445 10.4537 0.557662L10.5823 0.669367L10.6065 0.693605L10.6097 0.695713L10.6392 0.72522C11.3549 1.44685 11.6336 2.49474 11.3716 3.47675L11.3705 3.48097L11.361 3.5168L11.36 3.51891L10.8889 5.2261C10.8796 5.26003 10.8706 5.29164 10.8626 5.32094C10.8934 5.32101 10.927 5.322 10.9627 5.322H11.9006C12.4263 5.322 12.783 5.31906 13.0651 5.36731C14.8182 5.66725 15.9851 7.34574 15.6564 9.09363C15.6035 9.37493 15.4769 9.70926 15.2939 10.2023L14.337 12.7799C14.1401 13.3105 13.9773 13.7518 13.8101 14.1025C13.6375 14.4646 13.4385 14.7794 13.1441 15.0425C12.9712 15.197 12.7801 15.3303 12.5751 15.4387C12.2259 15.6232 11.8608 15.7 11.4612 15.7359C11.0742 15.7705 10.6034 15.7696 10.0374 15.7696H4.87371C4.08047 15.7696 3.42922 15.7703 2.90728 15.7138C2.37206 15.6558 1.88985 15.5311 1.4667 15.2237C1.22409 15.0475 1.01072 14.834 0.834405 14.5914C0.52696 14.1683 0.401312 13.6861 0.343323 13.1509C0.286761 12.6288 0.28747 11.977 0.28747 11.1834V9.51411C0.28747 8.84785 0.281286 8.36721 0.399176 7.95656C0.671091 7.00941 1.41109 6.26838 2.35823 5.99645C2.76888 5.87855 3.24952 5.88579 3.91579 5.88579C4.11977 5.88579 4.14542 5.88325 4.16238 5.88053C4.23526 5.8687 4.30403 5.83669 4.35839 5.78674C4.37104 5.77511 4.38755 5.7561 4.51436 5.59494L8.25648 0.839033L8.25754 0.837979L8.27861 0.811633ZM1.69116 11.1834C1.69116 12.0083 1.69211 12.5712 1.73859 13.0002C1.78365 13.4158 1.86467 13.6222 1.96937 13.7663C2.05914 13.8898 2.16727 13.999 2.29079 14.0888C2.43495 14.1935 2.6421 14.2745 3.05797 14.3195C3.45891 14.363 3.97631 14.3656 4.71564 14.3659C4.30795 13.8053 4.06447 13.1172 4.06437 12.371V8.59412H5.46807V12.371C5.46832 13.4734 6.3616 14.367 7.46401 14.367H10.0374C10.6286 14.367 11.0269 14.3663 11.3368 14.3385C11.6339 14.3118 11.7956 14.2639 11.9196 14.1984C12.024 14.1431 12.1213 14.0747 12.2094 13.996C12.3139 13.9025 12.4151 13.7679 12.5434 13.4986C12.6774 13.2177 12.8162 12.8451 13.0219 12.2909L13.9787 9.71328C14.1848 9.15822 14.253 8.96737 14.278 8.83439C14.4617 7.85698 13.8092 6.91901 12.829 6.75098C12.6956 6.72816 12.4928 6.72464 11.9006 6.72464H10.9627C10.7737 6.72464 10.5693 6.72663 10.4 6.70672C10.2211 6.68568 9.96696 6.6303 9.74764 6.43167C9.64448 6.33817 9.5595 6.22616 9.49683 6.10183C9.36384 5.8379 9.37793 5.57905 9.40515 5.40104C9.43094 5.23267 9.48666 5.03623 9.53688 4.8541L10.0079 3.14585L10.0174 3.11108C10.1488 2.61344 10.0077 2.08344 9.64648 1.71687L9.60854 1.67893L9.55058 1.6431C9.48789 1.62049 9.41419 1.6382 9.36932 1.69368L9.35773 1.70633L9.35878 1.70738L5.61666 6.46224C5.51816 6.58741 5.42231 6.71336 5.30683 6.81948C5.05069 7.05477 4.73119 7.20945 4.3879 7.26525C4.23309 7.29038 4.07507 7.28843 3.91579 7.28843C3.1535 7.28843 2.9191 7.29576 2.74604 7.34534C2.26358 7.48385 1.88558 7.86087 1.74702 8.34331C1.69732 8.51642 1.69116 8.75116 1.69116 9.51411V11.1834Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.72451 15.1086C7.18929 15.7706 6.22975 15.8695 5.57357 15.3598L5.44643 15.2493L5.42247 15.2253L5.41934 15.2233L5.39016 15.1941C4.68239 14.4805 4.40679 13.4442 4.66589 12.4731L4.66693 12.4689L4.67631 12.4335L4.67735 12.4314L5.14318 10.7432C5.15243 10.7096 5.1613 10.6784 5.16923 10.6494C5.13878 10.6493 5.10558 10.6484 5.07023 10.6484H4.14274C3.62288 10.6484 3.27015 10.6513 2.9912 10.6035C1.25757 10.3069 0.103662 8.64709 0.42863 6.91861C0.480965 6.64044 0.606164 6.30981 0.787119 5.8223L1.73336 3.27328C1.92812 2.74859 2.08912 2.31215 2.25442 1.96542C2.42515 1.60731 2.62191 1.296 2.91304 1.03584C3.08408 0.883016 3.273 0.751185 3.47579 0.644009C3.82102 0.461569 4.18214 0.385575 4.57731 0.350131C4.95993 0.315849 5.42553 0.316783 5.98521 0.316783H11.0916C11.876 0.316783 12.52 0.316134 13.0362 0.372015C13.5655 0.429358 14.0423 0.552599 14.4608 0.856601C14.7007 1.03091 14.9117 1.24199 15.086 1.48187C15.3901 1.90033 15.5143 2.37716 15.5717 2.90645C15.6276 3.42275 15.6269 4.06727 15.6269 4.85209V6.5028C15.6269 7.16167 15.633 7.63697 15.5164 8.04306C15.2475 8.97969 14.5158 9.71248 13.5791 9.9814C13.173 10.098 12.6977 10.0908 12.0389 10.0908C11.8372 10.0908 11.8118 10.0933 11.795 10.096C11.723 10.1077 11.6549 10.1394 11.6012 10.1888C11.5887 10.2003 11.5724 10.2191 11.447 10.3784L7.74639 15.0815L7.74535 15.0826L7.72451 15.1086ZM14.2388 4.85209C14.2388 4.03635 14.2379 3.47971 14.1919 3.05547C14.1473 2.64449 14.0672 2.44037 13.9637 2.29785C13.8749 2.17569 13.768 2.06776 13.6458 1.97896C13.5033 1.87539 13.2984 1.7953 12.8872 1.75074C12.4907 1.70779 11.979 1.70518 11.2479 1.70489C11.6511 2.25924 11.8918 2.93974 11.8919 3.67762V7.41257H10.5038V3.67762C10.5036 2.58751 9.62023 1.70384 8.53007 1.70384H5.98521C5.40065 1.70384 5.00679 1.70449 4.70028 1.73198C4.40651 1.75836 4.24662 1.80577 4.12399 1.87058C4.02069 1.92518 3.92452 1.99283 3.8374 2.07067C3.73401 2.16312 3.634 2.29627 3.50705 2.56255C3.37462 2.84034 3.23734 3.2088 3.03393 3.75682L2.08768 6.30584C1.88395 6.85474 1.81646 7.04347 1.79172 7.17497C1.61005 8.14152 2.25533 9.06908 3.22464 9.23524C3.35654 9.25781 3.55717 9.26129 4.14274 9.26129H5.07023C5.25717 9.26129 5.4593 9.25932 5.62672 9.27901C5.80364 9.29982 6.05492 9.35458 6.27179 9.551C6.37381 9.64347 6.45784 9.75424 6.51982 9.87719C6.65133 10.1382 6.6374 10.3942 6.61048 10.5702C6.58498 10.7367 6.52988 10.931 6.48022 11.1111L6.01439 12.8003L6.00501 12.8347C5.87513 13.3268 6.01464 13.8509 6.37184 14.2134L6.40935 14.251L6.46667 14.2864C6.52866 14.3088 6.60155 14.2912 6.64591 14.2364L6.65738 14.2239L6.65633 14.2228L10.3569 9.52078C10.4543 9.397 10.5491 9.27245 10.6633 9.1675C10.9166 8.93483 11.2325 8.78186 11.572 8.72669C11.7251 8.70184 11.8814 8.70376 12.0389 8.70376C12.7927 8.70376 13.0245 8.69651 13.1956 8.64748C13.6727 8.51051 14.0465 8.13768 14.1836 7.6606C14.2327 7.48941 14.2388 7.25727 14.2388 6.5028V4.85209Z" fill="currentColor"></path></svg></div></div><div class="ds-icon-button db183363" tabindex="-1" role="button" aria-disabled="false" style="--hover-size: 28px; width: 28px; height: 28px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.7484 11.1004C15.6274 11.8866 15.5288 12.5365 15.3882 13.0496C15.243 13.579 15.0339 14.0407 14.6455 14.4162C14.5638 14.4952 14.4775 14.5699 14.387 14.6387C13.9568 14.9656 13.4683 15.1012 12.923 15.1642C12.3944 15.2252 11.7374 15.2245 10.9419 15.2245H5.05809C4.2626 15.2245 3.6056 15.2252 3.07703 15.1642C2.53171 15.1012 2.04317 14.9656 1.61296 14.6387C1.52248 14.5699 1.43618 14.4952 1.35447 14.4162C0.966081 14.0407 0.756961 13.579 0.611839 13.0496C0.471162 12.5365 0.372616 11.8866 0.251648 11.1004L1.6458 10.8864C1.77181 11.7054 1.85791 12.2602 1.97209 12.6767C2.08174 13.0767 2.1976 13.2701 2.3344 13.4024C2.37603 13.4426 2.42074 13.4807 2.46683 13.5158C2.6184 13.6308 2.8272 13.7161 3.23912 13.7636C3.66812 13.8131 4.22949 13.8145 5.05809 13.8145H10.9419C11.7705 13.8145 12.3319 13.8131 12.7609 13.7636C13.1728 13.7161 13.3816 13.6308 13.5332 13.5158C13.5793 13.4807 13.624 13.4426 13.6656 13.4024C13.8024 13.2701 13.9183 13.0767 14.0279 12.6767C14.1421 12.2602 14.2282 11.7054 14.3542 10.8864L15.7484 11.1004ZM7.71503 0.558394C7.90371 0.52798 8.09629 0.52798 8.28498 0.558394C8.63706 0.615181 8.91293 0.790123 9.14944 0.985327C9.37579 1.17216 9.62518 1.42894 9.90478 1.7163L13.387 5.29491L12.8817 5.78753L12.3763 6.27908L8.89412 2.70047C8.82608 2.63054 8.76286 2.56716 8.70555 2.50873V10.5336H7.29445V2.50873C7.23714 2.56716 7.17392 2.63054 7.10588 2.70047L3.62368 6.27908L3.11835 5.78753L2.61302 5.29491L6.09522 1.7163C6.37482 1.42894 6.62422 1.17216 6.85057 0.985327C7.08707 0.790123 7.36294 0.615181 7.71503 0.558394Z" fill="currentColor"></path></svg></div></div></div><div style="flex: 1 1 0%;"></div></div></div></div><div class="_871cbca"><div class="d72636e2"></div><div class="aaff8b8f"><button role="button" aria-disabled="false" class="ds-atom-button _0e98de6 ds-floating-button ds-floating-button--icon ds-floating-button--lg" style="padding: 9px; font-size: 14px; line-height: 22px;"><div class="ds-icon ds-atom-button__icon" style="font-size: 14px; width: 14px; height: 14px; margin-right: 0px;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.8487 5.5L11.4239 5.92383L8.6973 8.65137C8.4416 8.90706 8.21565 9.13382 8.01175 9.29785C7.79915 9.46883 7.55598 9.61756 7.25003 9.66602C7.08438 9.69222 6.91568 9.69222 6.75003 9.66602C6.44408 9.61756 6.20091 9.46883 5.98831 9.29785C5.78442 9.13382 5.55846 8.90706 5.30276 8.65137L2.5762 5.92383L2.1514 5.5L3.00003 4.65137L3.42386 5.07617L6.1514 7.80273C6.42598 8.07732 6.59879 8.24849 6.74026 8.3623C6.87294 8.46904 6.92275 8.47813 6.93753 8.48047C6.97898 8.48703 7.02108 8.48703 7.06253 8.48047C7.07731 8.47813 7.12712 8.46904 7.2598 8.3623C7.40127 8.24849 7.57408 8.07732 7.84866 7.80273L10.5762 5.07617L11 4.65137L11.8487 5.5Z" fill="currentColor"></path></svg></div><span class=""></span></button><div class="_77cefa5 _3d616d3"><div class="_020ab5b"><div class="_24fad49"><div class="ds-scroll-area__gutters" style="position: absolute; inset: 0px; --container-height: 62px;"><div class="ds-scroll-area__horizontal-gutter" style="left: 8px; right: 8px; bottom: 0px; height: 8px;"><div class="ds-scroll-area__horizontal-bar" style="display: none;"></div></div><div class="ds-scroll-area__vertical-gutter" style="right: 0px; top: 20px; bottom: 0px; width: 6px;"><div class="ds-scroll-area__vertical-bar" style="display: none;"></div></div></div><textarea class="_27c9245 ds-scroll-area d96f2d2a" placeholder="Message DeepSeek" rows="2"></textarea><div class="b13855df">
</div></div><div class="ec4f5d61"><button role="button" aria-disabled="false" class="ds-atom-button f79352dc ds-toggle-button ds-toggle-button--selected ds-toggle-button--md" tabindex="0" style="transform: translateZ(0px);"><div class="ds-icon ds-atom-button__icon" style="font-size: 14px; width: 14px; height: 14px; color: var(--dsw-alias-brand-text); margin-right: 0px;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.06431 5.93342C7.68763 5.93342 8.19307 6.43904 8.19322 7.06233C8.19322 7.68573 7.68772 8.19123 7.06431 8.19123C6.44099 8.19113 5.9354 7.68567 5.9354 7.06233C5.93555 6.43911 6.44108 5.93353 7.06431 5.93342Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M8.6815 0.963693C10.1169 0.447019 11.6266 0.374829 12.5633 1.31135C13.5 2.24805 13.4277 3.75776 12.911 5.19319C12.7126 5.74431 12.4386 6.31796 12.0965 6.89729C12.4969 7.54638 12.8141 8.19018 13.036 8.80647C13.5527 10.2419 13.6251 11.7516 12.6883 12.6883C11.7516 13.625 10.242 13.5527 8.8065 13.036C8.19022 12.8141 7.54641 12.4969 6.89732 12.0965C6.31797 12.4386 5.74435 12.7125 5.19322 12.911C3.75777 13.4276 2.2481 13.5 1.31138 12.5633C0.374859 11.6266 0.447049 10.1168 0.963724 8.68147C1.17185 8.10338 1.46321 7.50063 1.82896 6.8924C1.52182 6.35711 1.27235 5.82825 1.08872 5.31819C0.572068 3.88278 0.499714 2.37306 1.43638 1.43635C2.37308 0.499655 3.8828 0.572044 5.31822 1.08869C5.82828 1.27232 6.35715 1.5218 6.89243 1.82893C7.50066 1.46318 8.10341 1.17181 8.6815 0.963693ZM11.3573 8.01154C10.9083 8.62253 10.3901 9.22873 9.80943 9.8094C9.22877 10.3901 8.62255 10.9083 8.01158 11.3572C8.4257 11.5841 8.8287 11.7688 9.21275 11.9071C10.5456 12.3868 11.4246 12.2547 11.8397 11.8397C12.2548 11.4246 12.3869 10.5456 11.9071 9.21272C11.7688 8.82866 11.5841 8.42568 11.3573 8.01154ZM2.56529 8.02912C2.37344 8.39322 2.21495 8.74796 2.09263 9.08772C1.61291 10.4204 1.74512 11.2995 2.16001 11.7147C2.57505 12.1297 3.45415 12.2618 4.78697 11.7821C5.11057 11.6656 5.44786 11.5164 5.7938 11.3367C5.249 10.9223 4.70922 10.4533 4.19029 9.9344C3.57578 9.31987 3.03169 8.67633 2.56529 8.02912ZM6.90708 3.2469C6.24065 3.70479 5.5646 4.26321 4.91392 4.91389C4.26325 5.56456 3.70482 6.24063 3.24693 6.90705C3.72674 7.63325 4.32777 8.37459 5.03892 9.08576C5.64943 9.69627 6.28183 10.2265 6.90806 10.6678C7.59368 10.2025 8.2908 9.63076 8.96079 8.96076C9.6308 8.29075 10.2025 7.59366 10.6678 6.90803C10.2265 6.2818 9.69631 5.6494 9.08579 5.03889C8.37462 4.32773 7.63328 3.72672 6.90708 3.2469ZM11.7147 2.15998C11.2996 1.74509 10.4204 1.61288 9.08775 2.0926C8.74835 2.21479 8.39382 2.37271 8.03013 2.56428C8.67728 3.03065 9.31995 3.5758 9.93443 4.19026C10.4534 4.7092 10.9223 5.24896 11.3368 5.79377C11.5164 5.44785 11.6656 5.11052 11.7821 4.78694C12.2618 3.45416 12.1297 2.57502 11.7147 2.15998ZM4.91197 2.2176C3.57922 1.73788 2.70004 1.86995 2.28501 2.28498C1.87001 2.70003 1.73791 3.5792 2.21763 4.91194C2.31709 5.18822 2.44112 5.47427 2.58677 5.7674C3.01931 5.1887 3.51474 4.6158 4.06529 4.06526C4.61584 3.5147 5.18872 3.01928 5.76743 2.58674C5.47431 2.4411 5.18824 2.31706 4.91197 2.2176Z" fill="currentColor"></path></svg></div><span class=""><span class="_6dbc175">DeepThink</span></span></button><button role="button" aria-disabled="false" class="ds-atom-button f79352dc ds-toggle-button ds-toggle-button--md" tabindex="0" style="transform: translateZ(0px);"><div class="ds-icon ds-atom-button__icon" style="font-size: 14px; width: 14px; height: 14px; color: var(--dsw-alias-label-primary); margin-right: 0px;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.00003 0.150391C10.7832 0.150391 13.8496 3.21685 13.8496 7C13.8496 10.7832 10.7832 13.8496 7.00003 13.8496C3.21688 13.8496 0.150421 10.7832 0.150421 7C0.150421 3.21685 3.21688 0.150391 7.00003 0.150391ZM5.37796 7.59961C5.4267 9.03204 5.64754 10.2965 5.97366 11.2197C6.15996 11.7471 6.36946 12.1301 6.57327 12.3701C6.77751 12.6105 6.92343 12.6504 7.00003 12.6504C7.07663 12.6504 7.22255 12.6105 7.42679 12.3701C7.6306 12.1301 7.8401 11.7471 8.0264 11.2197C8.35252 10.2965 8.57336 9.03204 8.6221 7.59961H5.37796ZM1.38187 7.59961C1.61456 9.80492 3.11593 11.6304 5.14261 12.3359C5.03268 12.1128 4.93227 11.8724 4.8428 11.6191C4.46342 10.5451 4.22775 9.13988 4.17874 7.59961H1.38187ZM9.82132 7.59961C9.77232 9.13988 9.53664 10.5451 9.15726 11.6191C9.06774 11.8726 8.96648 12.1127 8.85648 12.3359C10.8836 11.6307 12.3855 9.80524 12.6182 7.59961H9.82132ZM7.00003 1.34961C6.92343 1.34961 6.77751 1.38949 6.57327 1.62988C6.36946 1.86988 6.15996 2.25291 5.97366 2.78027C5.64754 3.70351 5.4267 4.96796 5.37796 6.40039H8.6221C8.57336 4.96796 8.35252 3.70351 8.0264 2.78027C7.8401 2.25291 7.6306 1.86988 7.42679 1.62988C7.22255 1.38949 7.07663 1.34961 7.00003 1.34961ZM8.85648 1.66309C8.96663 1.88656 9.06763 2.12715 9.15726 2.38086C9.53664 3.45487 9.77232 4.86012 9.82132 6.40039H12.6182C12.3855 4.19465 10.8837 2.36828 8.85648 1.66309ZM5.14261 1.66309C3.11578 2.3685 1.61457 4.19497 1.38187 6.40039H4.17874C4.22775 4.86012 4.46342 3.45487 4.8428 2.38086C4.93237 2.1273 5.03253 1.88645 5.14261 1.66309Z" fill="currentColor"></path></svg></div><span class=""><span class="_6dbc175">Search</span></span></button><div class="bf38813a"><div class="ds-icon-button f02f0e25" tabindex="0" role="button" aria-disabled="false" style="--hover-size: 34px; width: 34px; height: 34px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.5498 9.75006V5.00006H6.9502V9.75006C6.9502 10.33 7.4201 10.7999 8 10.7999C8.5799 10.7999 9.0498 10.33 9.0498 9.75006V4.50006C9.0498 2.95366 7.7964 1.70026 6.25 1.70026C4.7036 1.70026 3.4502 2.95366 3.4502 4.50006V9.75006C3.4502 12.263 5.4871 14.2999 8 14.2999C10.5129 14.2999 12.5498 12.263 12.5498 9.75006V4.00006H13.9502V9.75006C13.9502 13.0362 11.2861 15.7003 8 15.7003C4.71391 15.7003 2.0498 13.0362 2.0498 9.75006V4.50006C2.04981 2.18047 3.9304 0.299867 6.25 0.299866C8.5696 0.299866 10.4502 2.18046 10.4502 4.50006V9.75006C10.4502 11.1032 9.3531 12.2003 8 12.2003C6.6469 12.2003 5.5498 11.1032 5.5498 9.75006Z" fill="currentColor"></path></svg></div></div><input type="file" multiple="" accept=".epub,.mobi,.azw3,.pdf,.png,.jpg,.jpeg,.svg,.svgz,.bmp,.gif,.webp,.ico,.xbm,.dib,.pjp,.tif,.pjpeg,.avif,.apng,.tiff,.jfif,.txt,.md,.csv,.tsv,.html,.json,.log,.dot,.go,.h,.c,.cpp,.cxx,.cc,.cs,.java,.js,.css,.jsp,.php,.py,.py3,.asp,.yaml,.yml,.ini,.conf,.ts,.tsx,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.abap,.asc,.ash,.ampl,.mod,.g4,.apib,.apl,.dyalog,.asax,.ascx,.ashx,.asmx,.aspx,.axd,.dats,.hats,.sats,.as,.adb,.ada,.ads,.agda,.als,.apacheconf,.vhost,.cls,.applescript,.scpt,.arc,.ino,.asciidoc,.adoc,.aj,.asm,.a51,.inc,.nasm,.aug,.ahk,.ahkl,.au3,.awk,.auk,.gawk,.mawk,.nawk,.bat,.cmd,.befunge,.bison,.bb,.decls,.bmx,.bsv,.boo,.b,.bf,.brs,.bro,.cats,.idc,.w,.cake,.cshtml,.csx,.c++,.cp,.h++,.hh,.hpp,.hxx,.inl,.ipp,.tcc,.tpp,.c-objdump,.chs,.clp,.cmake,.in,.cob,.cbl,.ccp,.cobol,.cpy,.capnp,.mss,.ceylon,.chpl,.ch,.ck,.cirru,.clw,.icl,.dcl,.click,.clj,.boot,.cl2,.cljc,.cljs,.hl,.cljscm,.cljx,.hic,.coffee,._coffee,.cjsx,.cson,.iced,.cfm,.cfml,.cfc,.lisp,.asd,.cl,.l,.lsp,.ny,.podsl,.sexp,.cps,.coq,.v,.cppobjdump,.c++-objdump,.c++objdump,.cpp-objdump,.cxx-objdump,.creole,.cr,.feature,.cu,.cuh,.cy,.pyx,.pxd,.pxi,.d,.di,.d-objdump,.com,.dm,.zone,.arpa,.darcspatch,.dpatch,.dart,.diff,.patch,.dockerfile,.djs,.dylan,.dyl,.intr,.lid,.E,.ecl,.eclxml,.sch,.brd,.epj,.e,.ex,.exs,.elm,.el,.emacs,.desktop,.em,.emberscript,.erl,.es,.escript,.hrl,.xrl,.yrl,.fs,.fsi,.fsx,.fx,.flux,.f90,.f,.f03,.f08,.f77,.f95,.for,.fpp,.factor,.fy,.fancypack,.fan,.fth,.4th,.forth,.fr,.frt,.ftl,.g,.gco,.gcode,.gms,.gap,.gd,.gi,.tst,.s,.ms,.glsl,.fp,.frag,.frg,.fsh,.fshader,.geo,.geom,.glslv,.gshader,.shader,.vert,.vrx,.vsh,.vshader,.gml,.kid,.ebuild,.eclass,.po,.pot,.glf,.gp,.gnu,.gnuplot,.plot,.plt,.golo,.gs,.gst,.gsx,.vark,.grace,.gradle,.gf,.graphql,.gv,.man,.1in,.1m,.1x,.3in,.3m,.3qt,.3x,.me,.n,.rno,.roff,.groovy,.grt,.gtpl,.gvy,.gsp,.hcl,.tf,.hlsl,.fxh,.hlsli,.htm,.st,.xht,.xhtml,.mustache,.jinja,.eex,.erb,.deface,.phtml,.http,.haml,.handlebars,.hbs,.hb,.hs,.hsc,.hx,.hxsl,.hy,.pro,.dlm,.ipf,.cfg,.prefs,.properties,.irclog,.weechatlog,.idr,.lidr,.ni,.i7x,.iss,.io,.ik,.thy,.ijs,.flex,.jflex,.geojson,.lock,.topojson,.json5,.jsonld,.jq,.jsx,.jade,.j,._js,.bones,.es6,.jake,.jsb,.jscad,.jsfl,.jsm,.jss,.njs,.pac,.sjs,.ssjs,.sublime-build,.sublime-commands,.sublime-completions,.sublime-keymap,.sublime-macro,.sublime-menu,.sublime-mousemap,.sublime-project,.sublime-settings,.sublime-theme,.sublime-workspace,.sublime_metrics,.sublime_session,.xsjs,.xsjslib,.jl,.ipynb,.krl,.kicad_pcb,.kit,.kt,.ktm,.kts,.lfe,.ll,.lol,.lsl,.lslp,.lvproj,.lasso,.las,.lasso8,.lasso9,.ldml,.latte,.lean,.hlean,.less,.lex,.ly,.ily,.m,.ld,.lds,.liquid,.lagda,.litcoffee,.lhs,.ls,._ls,.xm,.x,.xi,.lgt,.logtalk,.lookml,.lua,.fcgi,.nse,.pd_lua,.rbxs,.wlua,.mumps,.m4,.mcr,.mtml,.muf,.mak,.mk,.mkfile,.mako,.mao,.markdown,.mkd,.mkdn,.mkdown,.ron,.mask,.mathematica,.cdf,.ma,.map,.mt,.nb,.nbp,.wl,.wlt,.matlab,.maxpat,.maxhelp,.maxproj,.mxt,.pat,.mediawiki,.wiki,.moo,.metal,.minid,.druby,.duby,.mir,.mirah,.mo,.mms,.mmk,.monkey,.moon,.myt,.ncl,.nl,.nsi,.nsh,.axs,.axi,.nlogo,.nginxconf,.nim,.nimrod,.ninja,.nit,.nix,.nu,.numpy,.numpyw,.numsc,.ml,.eliom,.eliomi,.ml4,.mli,.mll,.mly,.objdump,.mm,.sj,.omgrofl,.opa,.opal,.opencl,.p,.scad,.org,.ox,.oxh,.oxo,.oxygene,.oz,.pwn,.aw,.ctp,.php3,.php4,.php5,.php6,.php7,.php8,.phps,.phpt,.pls,.pck,.pkb,.pks,.plb,.plsql,.sql,.pov,.pan,.psc,.parrot,.pasm,.pir,.pas,.dfm,.dpr,.lpr,.pp,.pl,.al,.cgi,.perl,.ph,.plx,.pm,.pod,.psgi,.t,.6pl,.6pm,.nqp,.p6,.p6l,.p6m,.pl6,.pm6,.pkl,.pig,.pike,.pmod,.pogo,.pony,.ps,.eps,.ps1,.psd1,.psm1,.pde,.prolog,.yap,.spin,.proto,.pub,.pd,.pb,.pbi,.purs,.bzl,.gyp,.lmi,.pyde,.pyi,.pyp,.pyt,.pyw,.rpy,.tac,.wsgi,.xpy,.pytb,.qml,.qbs,.pri,.r,.rd,.rsx,.raml,.rdoc,.rbbas,.rbfrm,.rbmnu,.rbres,.rbtbar,.rbuistate,.rhtml,.rmd,.rkt,.rktd,.rktl,.scrbl,.rl,.raw,.reb,.r2,.r3,.rebol,.red,.reds,.cw,.rs,.rsh,.robot,.rg,.rb,.builder,.gemspec,.god,.irbrc,.jbuilder,.mspec,.pluginspec,.podspec,.rabl,.rake,.rbuild,.rbw,.rbx,.ru,.ruby,.thor,.watchr,.sas,.scss,.smt2,.smt,.sparql,.rq,.sqf,.hqf,.cql,.ddl,.prc,.tab,.udf,.viw,.db2,.ston,.sage,.sagews,.sls,.sass,.scala,.sbt,.sc,.scaml,.scm,.sld,.sps,.ss,.sci,.sce,.self,.sh,.bash,.bats,.command,.ksh,.tmux,.tool,.zsh,.sh-session,.shen,.sl,.slim,.smali,.tpl,.sp,.sma,.nut,.stan,.ML,.fun,.sig,.sml,.do,.ado,.doh,.ihlp,.mata,.matah,.sthlp,.styl,.scd,.swift,.sv,.svh,.vh,.toml,.txl,.tcl,.adp,.tm,.tcsh,.csh,.tex,.aux,.bbx,.bib,.cbx,.dtx,.ins,.lbx,.ltx,.mkii,.mkiv,.mkvi,.sty,.toc,.tea,.no,.textile,.thrift,.tu,.ttl,.twig,.upc,.anim,.asset,.mat,.meta,.prefab,.unity,.uno,.uc,.ur,.urs,.vcl,.vhdl,.vhd,.vhf,.vhi,.vho,.vhs,.vht,.vhw,.vala,.vapi,.veo,.vim,.vb,.bas,.frm,.frx,.vba,.vbhtml,.vbs,.volt,.vue,.owl,.webidl,.x10,.xc,.xml,.ant,.axml,.ccxml,.clixml,.cproject,.csl,.csproj,.ct,.dita,.ditamap,.ditaval,.config,.dotsettings,.filters,.fsproj,.fxml,.glade,.grxml,.iml,.ivy,.jelly,.jsproj,.kml,.launch,.mdpolicy,.mxml,.nproj,.nuspec,.odd,.osm,.plist,.props,.ps1xml,.psc1,.pt,.rdf,.rss,.scxml,.srdf,.storyboard,.stTheme,.sublime-snippet,.targets,.tmCommand,.tml,.tmLanguage,.tmPreferences,.tmSnippet,.tmTheme,.ui,.urdf,.ux,.vbproj,.vcxproj,.vssettings,.vxml,.wsdl,.wsf,.wxi,.wxl,.wxs,.x3d,.xacro,.xaml,.xib,.xlf,.xliff,.xmi,.dist,.xproj,.xsd,.xul,.zcml,.xsp-config,.metadata,.xpl,.xproc,.xquery,.xq,.xql,.xqm,.xqy,.xs,.xslt,.xsl,.xojo_code,.xojo_menu,.xojo_report,.xojo_script,.xojo_toolbar,.xojo_window,.xtend,.reek,.rviz,.sublime-syntax,.syntax,.yaml-tmlanguage,.yang,.y,.yacc,.yy,.zep,.zimpl,.zmpl,.zpl,.ec,.eh,.edn,.fish,.mu,.nc,.ooc,.rst,.rest,.wisp,.prg,.prw,.gitignore,.gitkeep,.gitmodules,.example,.avifs,.blp,.bufr,.bw,.cur,.dcx,.dds,.emf,.fit,.fits,.flc,.fli,.ftc,.ftu,.gbr,.grib,.h5,.hdf,.hif,.icb,.icns,.iim,.im,.j2c,.j2k,.jp2,.jpc,.jpe,.jpf,.jpx,.mpeg,.mpg,.msp,.pbm,.pcd,.pcx,.pfm,.pgm,.pnm,.ppm,.psd,.pxr,.qoi,.ras,.rgb,.rgba,.sgi,.tga,.vda,.vst,.wmf,.xpm" style="display: none;"><div class="ds-icon-button _7436101 bcc55ca1 ds-icon-button--disabled" tabindex="-1" role="button" aria-disabled="true" style="--hover-size: 34px; width: 34px; height: 34px;"><div class="ds-icon-button__hover-bg"></div><div class="ds-icon" style="font-size: 16px; width: 16px; height: 16px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.3125 0.981648C8.66767 1.05456 8.97902 1.20565 9.2627 1.4338C9.48724 1.61444 9.73029 1.85939 9.97949 2.1086L14.707 6.83614L13.293 8.2502L9 3.95723V15.0432H7V3.95723L2.70703 8.2502L1.29297 6.83614L6.02051 2.1086C6.26971 1.85939 6.51277 1.61444 6.7373 1.4338C6.97662 1.24132 7.28445 1.04548 7.6875 0.981648C7.8973 0.948471 8.1031 0.956625 8.3125 0.981648Z" fill="currentColor"></path></svg></div></div></div></div></div></div></div><div class="_0fcaa63">AI-generated, for reference only</div></div></div></div></div></div></div></div></div></div></div><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99676e4e1a079dc4',t:'MTc2MTc5MDc5OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;" src="./dudasd_files/saved_resource.html"></iframe><div class="ds-notification-container ds-theme" style="--ds-rgb-hover: 0 0 0 / 4%;"></div><div id="cf-overlay" style="position: fixed; inset: 0px; background-color: rgba(0, 0, 0, 0.7); border: 1px solid grey; z-index: 10000; display: none;"><p style="color: white; text-align: center; margin-top: 50vh;">One more step before you proceed...</p><div style="display: flex; flex-wrap: nowrap; align-items: center; justify-content: center;" id="cf-turnstile"></div></div><script src="./dudasd_files/api.js.Без названия" defer=""></script><iframe id="intercom-frame" style="position: absolute !important; opacity: 0 !important; width: 1px !important; height: 1px !important; top: 0 !important; left: 0 !important; border: none !important; display: block !important; z-index: -1 !important; pointer-events: none;" aria-hidden="true" tabindex="-1" title="Intercom" src="./dudasd_files/saved_resource(1).html"></iframe><div class="intercom-lightweight-app"><style id="intercom-lightweight-app-style" type="text/css">
  @keyframes intercom-lightweight-app-launcher {
    from {
      opacity: 0;
      transform: scale(0.5);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes intercom-lightweight-app-gradient {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes intercom-lightweight-app-messenger {
    0% {
      opacity: 0;
      transform: scale(0);
    }
    40% {
      opacity: 1;
    }
    100% {
      transform: scale(1);
    }
  }

  .intercom-lightweight-app {
    position: fixed;
    z-index: 2147483001;
    width: 0;
    height: 0;
    font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  }

  .intercom-lightweight-app-gradient {
    position: fixed;
    z-index: 2147483002;
    width: 500px;
    height: 500px;
    bottom: 0;
    right: 0;
    pointer-events: none;
    background: radial-gradient(
      ellipse at bottom right,
      rgba(29, 39, 54, 0.16) 0%,
      rgba(29, 39, 54, 0) 72%);
    animation: intercom-lightweight-app-gradient 200ms ease-out;
  }

  .intercom-lightweight-app-launcher {
    position: fixed;
    z-index: 2147483003;
    padding: 0 !important;
    margin: 0 !important;
    border: none;
    bottom: 20px;
    right: 20px;
    max-width: 48px;
    width: 48px;
    max-height: 48px;
    height: 48px;
    border-radius: 50%;
    background: #0f0f0f;
    cursor: pointer;
    box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.06), 0 2px 32px 0 rgba(0, 0, 0, 0.16);
    transition: transform 167ms cubic-bezier(0.33, 0.00, 0.00, 1.00);
    box-sizing: content-box;
  }


  .intercom-lightweight-app-launcher:hover {
    transition: transform 250ms cubic-bezier(0.33, 0.00, 0.00, 1.00);
    transform: scale(1.1)
  }

  .intercom-lightweight-app-launcher:active {
    transform: scale(0.85);
    transition: transform 134ms cubic-bezier(0.45, 0, 0.2, 1);
  }


  .intercom-lightweight-app-launcher:focus {
    outline: none;

    
  }

  .intercom-lightweight-app-launcher-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    left: 0;
    width: 48px;
    height: 48px;
    transition: transform 100ms linear, opacity 80ms linear;
  }

  .intercom-lightweight-app-launcher-icon-open {
    
        opacity: 1;
        transform: rotate(0deg) scale(1);
      
  }

  .intercom-lightweight-app-launcher-icon-open svg {
    width: 24px;
    height: 24px;
  }

  .intercom-lightweight-app-launcher-icon-open svg path {
    fill: rgb(255, 255, 255);
  }

  .intercom-lightweight-app-launcher-icon-self-serve {
    
        opacity: 1;
        transform: rotate(0deg) scale(1);
      
  }

  .intercom-lightweight-app-launcher-icon-self-serve svg {
    height: 44px;
  }

  .intercom-lightweight-app-launcher-icon-self-serve svg path {
    fill: rgb(255, 255, 255);
  }

  .intercom-lightweight-app-launcher-custom-icon-open {
    max-height: 24px;
    max-width: 24px;

    
        opacity: 1;
        transform: rotate(0deg) scale(1);
      
  }

  .intercom-lightweight-app-launcher-icon-minimize {
    
        opacity: 0;
        transform: rotate(-60deg) scale(0);
      
  }

  .intercom-lightweight-app-launcher-icon-minimize svg path {
    fill: rgb(255, 255, 255);
  }

  /* Extended launcher styles */
  .intercom-lightweight-app-launcher.intercom-launcher-extended {
    width: calc(180px - 30px);
    max-width: calc(180px - 30px);
    height: calc(45px - 26px);
    max-height: calc(45px - 26px);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    padding: 12px 16px 12px 12px !important;
    gap: 6px;
    /* Use theme background instead of hardcoded gradient */
    background: #0f0f0f;
    border: 1px solid rgba(255, 255, 255, 0.15);
    box-shadow: 0px -2px 50px rgba(0, 0, 0, 0.1);
    
  }

  .intercom-lightweight-app-launcher.intercom-launcher-extended .intercom-lightweight-app-launcher-icon {
    position: relative;
    width: 24px;
    height: 24px;
  }

  .intercom-lightweight-app-launcher-text {
    /* Match text color with launcher icon */
    color: rgb(255, 255, 255);
    font-size: 14px;
    font-weight: 600;
    line-height: 1.5;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 140px;
    opacity: 1;
    transition: opacity 80ms linear;
  }

  .intercom-lightweight-app-messenger {
    position: fixed;
    z-index: 2147483003;
    overflow: hidden;
    background-color: #ffffff;
    animation: intercom-lightweight-app-messenger 250ms cubic-bezier(0, 1, 1, 1);
    transform-origin: bottom right;

    
        width: 400px;
        height: calc(100% - 40px);
        max-height: 704px;
        min-height: 250px;
        right: 20px;
        bottom: 20px;
        box-shadow: 0 5px 40px rgba(0,0,0,0.16);
      

    border-radius: 16px;
  }

  .intercom-lightweight-app-messenger-header {
    height: 64px;
    border-bottom: none;
    background: #ffffff;
  }

  .intercom-lightweight-app-messenger-footer{
    position:absolute;
    bottom:0;
    width: 100%;
    height: 80px;
    background: #ffffff;
    font-size: 14px;
    line-height: 21px;
    border-top: 1px solid rgba(0, 0, 0, 0.05);
    box-shadow: 0px 0px 25px rgba(0, 0, 0, 0.05);
  }

  @media print {
    .intercom-lightweight-app {
      display: none;
    }
  }
</style></div><div class="ds-theme ds-modal-wrapper ds-modal-wrapper--hide" data-transform-origin="center" style="--ds-rgb-hover: 245 245 245; --ds-rgb-primary: 77 107 254; --ds-button-hover-color: #2563EB; --ds-bordered-secondary-button-color: var(--dsr-text-1); --ds-input-prefix-color: var(--dsr-text-1); z-index: 0;"></div><div class="ds-theme ds-modal-wrapper ds-modal-wrapper--hide" data-transform-origin="center" style="--ds-rgb-hover: 245 245 245; --ds-rgb-primary: 77 107 254; --ds-button-hover-color: #2563EB; --ds-bordered-secondary-button-color: var(--dsr-text-1); --ds-input-prefix-color: var(--dsr-text-1); z-index: 0;"></div><div class="ds-theme ds-modal-wrapper ds-modal-wrapper--hide" data-transform-origin="center" style="--ds-rgb-hover: 245 245 245; --ds-rgb-primary: 77 107 254; --ds-button-hover-color: #2563EB; --ds-bordered-secondary-button-color: var(--dsr-text-1); --ds-input-prefix-color: var(--dsr-text-1); z-index: 0;"></div><div class="ds-theme ds-modal-wrapper ds-modal-wrapper--hide" data-transform-origin="center" style="--ds-rgb-hover: 245 245 245; --ds-rgb-primary: 77 107 254; --ds-button-hover-color: #2563EB; --ds-bordered-secondary-button-color: var(--dsr-text-1); --ds-input-prefix-color: var(--dsr-text-1); z-index: 0;"></div><div class="ds-theme ds-modal-wrapper ds-modal-wrapper--hide" data-transform-origin="center" style="--ds-rgb-hover: 245 245 245; --ds-rgb-primary: 77 107 254; --ds-button-hover-color: #2563EB; --ds-bordered-secondary-button-color: var(--dsr-text-1); --ds-input-prefix-color: var(--dsr-text-1); z-index: 0;"></div><div class="ds-theme ds-modal-wrapper ds-modal-wrapper--hide" data-transform-origin="center" style="--ds-rgb-hover: 245 245 245; --ds-rgb-primary: 77 107 254; --ds-button-hover-color: #2563EB; --ds-bordered-secondary-button-color: var(--dsr-text-1); --ds-input-prefix-color: var(--dsr-text-1); z-index: 0;"></div><div class="ds-floating-container" style="z-index: 0;"><div class="ds-floating-position-wrapper ds-theme" style="--ds-rgb-hover: 0 0 0 / 4%; z-index: 0; left: 193.055px; top: 53.5px;" data-transform-origin="top"></div></div><div class="ds-floating-container" style="z-index: 0;"><div class="ds-floating-position-wrapper ds-theme" style="--ds-rgb-hover: 0 0 0 / 4%; z-index: 0; left: 1303.3px; top: 224px;" data-transform-origin="top"></div></div><div class="ds-floating-container" style="z-index: 0;"><div class="ds-floating-position-wrapper ds-theme" style="--ds-rgb-hover: 0 0 0 / 4%; z-index: 0; left: 1261.09px; top: 224px;" data-transform-origin="top"></div></div></body></html>